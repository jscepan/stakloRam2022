"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[610],{7707:(T,d,e)=>{e.d(d,{R:()=>E});var c=e(8583),u=e(4333),g=e(7942),l=e(7322),m=e(3722),p=e(3679),h=e(4107),_=e(2024),v=e(8966),A=e(1079),M=e(8287),L=e(6591),P=e(7269),f=e(7716);let E=(()=>{class t{}return t.\u0275fac=function(Z){return new(Z||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[c.ez,u.aw,g.p,_.h,p.UX,m.c,l.lN,h.LD,v.Is,A.Bb,M.n,L.I,P.Co]]}),t})()},4610:(T,d,e)=>{e.r(d),e.d(d,{HistoriesModule:()=>rt});var c=e(8583),u=e(4655),g=e(7095),l=e(8966),m=e(7574),p=e(4463),h=e(7379),_=e(5595),v=e(4292),A=e(136),M=e(4762),L=e(8902),P=e(8228),f=e(3709);class E extends P.g{constructor(){super(...arguments),this.action="",this.objectType="",this.previousValue="",this.newValue="",this.time=new Date,this.user=new f.T}}(0,M.gn)([(0,L.D)(()=>f.T)],E.prototype,"user",void 0);var t=e(7716),x=e(7515);let Z=(()=>{class i extends v.h{constructor(n){super(n,E,A._d),this.baseWebService=n}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(x.I))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var R=e(8939),y=e(4333),B=e(42),C=e(773);function F(i,s){1&i&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"noResults")," "))}function N(i,s){1&i&&(t.TgZ(0,"div",10),t._UZ(1,"mat-spinner"),t.qZA())}let S=(()=>{class i{constructor(n,o,a,r){this.dialogRef=n,this.data=o,this.webService=a,this.translateService=r,this.subs=new p.L,this.isLoading=!0}ngOnInit(){this.isLoading=!0,this.subs.sink=this.webService.getEntityByOid(this.data.oid).pipe((0,R.x)(()=>{this.isLoading=!1})).subscribe(n=>{this.history=n})}exit(){this.dialogRef.close(!1)}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(l.so),t.Y36(l.WI),t.Y36(Z),t.Y36(y.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-history-view"]],features:[t._Bn([Z,h.e,_.y])],decls:24,vars:20,consts:[[1,"container"],[1,"title"],[1,"content"],[1,"grid-container","standard-grid-table"],[1,"grid-item","header","sticky"],["class","no-results",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"no-results"],[1,"spinner"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",4),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",4),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",4),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,F,3,3,"div",5),t.YNc(20,N,2,0,"div",6),t.qZA(),t.qZA(),t.TgZ(21,"div",7),t.TgZ(22,"app-button",8),t.NdJ("clickEvent",function(){return o.exit()}),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,8,"historyView")," "),t.xp6(5),t.hij(" ",t.lcZ(9,10,"buyerName")," "),t.xp6(3),t.hij(" ",t.lcZ(12,12,"date")," "),t.xp6(3),t.hij(" ",t.lcZ(15,14,"amount")," "),t.xp6(3),t.hij(" ",t.lcZ(18,16,"bankStatementNumber")," "),t.xp6(2),t.Q6J("ngIf",o.history&&!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(2),t.Q6J("text",t.lcZ(23,18,"cancel")))},directives:[c.O5,B.r,C.$g],pipes:[y.X$],styles:["[_nghost-%COMP%]{display:flex;height:calc(80vh)}.container[_ngcontent-%COMP%]{height:calc(100%);min-width:50vw;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-grow:0;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column;margin-top:20px;overflow-y:auto;overflow-x:hidden}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto auto}.container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;flex-grow:0;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),i})(),H=(()=>{class i{constructor(n){this._matDialog=n}openDialog(n=""){return new m.y(o=>{const a=new l.vA;a.data={oid:n},this._matDialog.open(S,a).afterClosed().subscribe(()=>{o.next(),o.complete()},()=>o.error())})}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(l.uw))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var W=e(5153),w=e(287),J=e(4605),O=e(7322),D=e(3722),b=e(4107),K=e(1862),V=e(4286);function Q(i,s){if(1&i&&(t.TgZ(0,"mat-option",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const n=s.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.displayName)," ")}}function Y(i,s){if(1&i&&(t.TgZ(0,"mat-option",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const n=s.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.displayName)," ")}}function z(i,s){1&i&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"noResults")," "))}function q(i,s){1&i&&(t.TgZ(0,"div",17),t._UZ(1,"mat-spinner"),t.qZA())}function X(i,s){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",18),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",18),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"lowercase"),t.qZA(),t.TgZ(8,"div",18),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"div",18),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"div",18),t._uU(15),t.qZA(),t.TgZ(16,"div",18),t.TgZ(17,"app-button",19),t.NdJ("clickEvent",function(){const r=t.CHM(n).$implicit;return t.oxw().viewHistoryDetails(r.oid)}),t.qZA(),t.qZA(),t.BQk()}if(2&i){const n=s.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,7,n.objectType)," "),t.xp6(3),t.hij(" ",t.lcZ(6,9,t.lcZ(7,11,n.action))," "),t.xp6(4),t.hij(" ",t.xi3(10,13,n.time,"dd.MM.yyyy")," "),t.xp6(3),t.hij(" ",t.xi3(13,16,n.time,"hh:ss")," "),t.xp6(3),t.hij(" ",n.user.displayName," "),t.xp6(2),t.Q6J("iconName","eye")("isTransparentMode",!0)}}const $=[{path:"",component:(()=>{class i{constructor(n,o,a){this.webService=n,this.listEntities=o,this.historyViewPopupService=a,this.subs=new p.L,this.typesOfObject=A.g,this.actionTypesOfObject=A.So,this.isLoading=this.listEntities.isLoading,this.entities=this.listEntities.entities,this.totalEntitiesLength=this.listEntities.totalEntitiesLength,this.searchFilter=new w.h}ngOnInit(){this.subs.sink=this.listEntities.setWebService(this.webService).setOrdering("DESC").requestFirstPage()}typeChange(n){n?(this.searchFilter.addBetweenAttribute({attribute:"object_type",attributeType:"STRING",attributeValue:n.value,type:"EQUAL"}),this.listEntities.setFilter(this.searchFilter)):(this.searchFilter.removeBetweenAttribute("object_type"),this.listEntities.setFilter(this.searchFilter))}actionTypeChange(n){n?this.searchFilter.addBetweenAttribute({attribute:"action",attributeValue:n.value,attributeType:"STRING",type:"EQUAL"}):this.searchFilter.removeBetweenAttribute("action"),this.listEntities.setFilter(this.searchFilter)}dateChanged(n,o){var a,r;if(null===(a=o.target)||void 0===a?void 0:a.value){const I={attribute:"from"===n?"from_date":"to_date",attributeValue:null===(r=o.target)||void 0===r?void 0:r.value,attributeType:"DATE",type:"from"===n?"GREATER_OR_EQUAL":"SMALLER_OR_EQUAL"};this.searchFilter.addBetweenAttribute(I)}else"from"===n?this.searchFilter.removeBetweenAttribute("from_date"):"to"===n&&this.searchFilter.removeBetweenAttribute("to_date");this.listEntities.setFilter(this.searchFilter)}inputSearchHandler(n){this.searchFilter.criteriaQuick=n,this.listEntities.setFilter(this.searchFilter)}viewHistoryDetails(n){this.subs.sink=this.historyViewPopupService.openDialog(n).subscribe(()=>{})}bottomReachedHandler(){this.listEntities.requestNextPage()}orderBy(n){this.searchFilter.ordering=n,this.listEntities.setFilter(this.searchFilter)}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(Z),t.Y36(_.y),t.Y36(H))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-histories"]],features:[t._Bn([Z,W.T,_.y,H])],decls:70,vars:81,consts:[[1,"container"],[1,"search-bar"],[3,"placeholder","changeEvent"],[1,"min-with"],["type","date","matInput","",3,"change"],[3,"valueChange"],[3,"value",4,"ngFor","ngForOf"],["value","ASC"],["value","DESC"],["scrollToBottom","",1,"histories",3,"bottomReached"],[1,"grid-container","standard-grid-table"],[1,"grid-item","header","sticky"],["class","no-results",4,"ngIf"],["class","spinner",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"no-results"],[1,"spinner"],[1,"grid-item"],[3,"iconName","isTransparentMode","clickEvent"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"app-search-input",2),t.NdJ("changeEvent",function(r){return o.inputSearchHandler(r)}),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",3),t.TgZ(5,"mat-label"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"input",4),t.NdJ("change",function(r){return o.dateChanged("from",r)}),t.qZA(),t.qZA(),t.TgZ(9,"mat-form-field",3),t.TgZ(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",4),t.NdJ("change",function(r){return o.dateChanged("to",r)}),t.qZA(),t.qZA(),t.TgZ(14,"mat-form-field"),t.TgZ(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-select",5),t.NdJ("valueChange",function(r){return o.typeChange(r)}),t.TgZ(19,"mat-option"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.YNc(22,Q,3,4,"mat-option",6),t.qZA(),t.qZA(),t.TgZ(23,"mat-form-field"),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"mat-select",5),t.NdJ("valueChange",function(r){return o.actionTypeChange(r)}),t.TgZ(28,"mat-option"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.YNc(31,Y,3,4,"mat-option",6),t.qZA(),t.qZA(),t.TgZ(32,"mat-form-field",3),t.TgZ(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"mat-select",5),t.NdJ("valueChange",function(r){return o.orderBy(r)}),t.TgZ(37,"mat-option",7),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"mat-option",8),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",9),t.NdJ("bottomReached",function(){return o.bottomReachedHandler()}),t.TgZ(44,"div",10),t.TgZ(45,"div",11),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"div",11),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"div",11),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"div",11),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",11),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"div",11),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.YNc(63,z,3,3,"div",12),t.ALo(64,"async"),t.ALo(65,"async"),t.YNc(66,q,2,0,"div",13),t.ALo(67,"async"),t.YNc(68,X,18,19,"ng-container",14),t.ALo(69,"async"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("placeholder",t.lcZ(3,41,"searchFor")),t.xp6(3),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(7,43,"fromDate")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(12,45,"toDate")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(17,47,"objectType")," "),t.xp6(4),t.Oqu(t.lcZ(21,49,"all")),t.xp6(2),t.Q6J("ngForOf",o.typesOfObject),t.xp6(2),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(26,51,"action")," "),t.xp6(4),t.Oqu(t.lcZ(30,53,"all")),t.xp6(2),t.Q6J("ngForOf",o.actionTypesOfObject),t.xp6(2),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(35,55,"sortBy")," "),t.xp6(4),t.Oqu(t.lcZ(39,57,"asc")),t.xp6(3),t.Oqu(t.lcZ(42,59,"desc")),t.xp6(5),t.hij(" ",t.lcZ(47,61,"objectType")," "),t.xp6(3),t.hij(" ",t.lcZ(50,63,"action")," "),t.xp6(3),t.hij(" ",t.lcZ(53,65,"date")," "),t.xp6(3),t.hij(" ",t.lcZ(56,67,"time")," "),t.xp6(3),t.hij(" ",t.lcZ(59,69,"user")," "),t.xp6(3),t.hij(" ",t.lcZ(62,71,"viewDetails")," "),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(64,73,o.totalEntitiesLength)&&!t.lcZ(65,75,o.isLoading)),t.xp6(3),t.Q6J("ngIf",t.lcZ(67,77,o.isLoading)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(69,79,o.entities)))},directives:[J.J,O.KE,O.hX,D.Nt,b.gD,K.ey,c.sg,V.C,c.O5,C.$g,B.r],pipes:[y.X$,c.Ov,c.i8,c.uU],styles:["[_nghost-%COMP%]{display:flex;height:calc(100%)}.container[_ngcontent-%COMP%]{height:calc(100%)}.container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .histories[_ngcontent-%COMP%]{height:calc(100% - 100px);overflow-y:auto;overflow-x:hidden}.container[_ngcontent-%COMP%]   .histories[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto auto auto auto}.min-with[_ngcontent-%COMP%]{max-width:120px}"]}),i})(),canActivate:[g.Y],data:{permission:"HISTORIES_VIEW"}}];let G=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.Bz.forChild($)],u.Bz]}),i})();var j=e(2024),k=e(2763),tt=e(6460),et=e(8287),U=e(3679),it=e(7707),nt=e(6591),ot=e(7269),st=e(7012);let at=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,y.aw,j.h,it.R,U.UX,D.c,O.lN,b.LD,nt.I,ot.Co,st.o,C.Cq]]}),i})(),rt=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,G,y.aw,j.h,k.i,tt.n,et.n,C.Cq,U.UX,U.u5,at,D.c,O.lN,b.LD]]}),i})()},7012:(T,d,e)=>{e.d(d,{o:()=>g});var c=e(8583),u=e(7716);let g=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=u.oAB({type:l}),l.\u0275inj=u.cJS({imports:[[c.ez]]}),l})()},3749:(T,d,e)=>{e.d(d,{w:()=>m});var c=e(4762),u=e(8902),g=e(8228),l=e(8324);class m extends g.g{constructor(){super(...arguments),this.name="",this.address="",this.maticalNumber="",this.pib="",this.contactPerson="",this.phoneNumberFix="",this.phoneNumberMobile="",this.email=""}}(0,c.gn)([(0,u.D)(()=>l.v)],m.prototype,"city",void 0)},7379:(T,d,e)=>{e.d(d,{e:()=>p});var c=e(4292),u=e(136),g=e(3749),l=e(7716),m=e(7515);let p=(()=>{class h extends c.h{constructor(v){super(v,g.w,u.Hz),this.baseWebService=v}}return h.\u0275fac=function(v){return new(v||h)(l.LFG(m.I))},h.\u0275prov=l.Yz7({token:h,factory:h.\u0275fac}),h})()}}]);