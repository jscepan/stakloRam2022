"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[400],{6400:(b,m,n)=>{n.r(m),n.d(m,{CountriesModule:()=>B});var r=n(8583),p=n(4655),o=n(7095),u=n(2905),h=n(287),c=n(5595),e=n(4463),v=n(29),t=n(7716),T=n(8933),O=n(4605),P=n(42),Z=n(4286),_=n(773),M=n(4333);function S(s,C){1&s&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"noResults")," "))}function d(s,C){1&s&&(t.TgZ(0,"div",10),t._UZ(1,"mat-spinner"),t.qZA())}function E(s,C){if(1&s){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",11),t._uU(2),t.qZA(),t.TgZ(3,"div",11),t.TgZ(4,"app-button",12),t.NdJ("clickEvent",function(){const A=t.CHM(a).$implicit;return t.oxw().editCountry(A.oid)}),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.BQk()}if(2&s){const a=C.$implicit,l=t.oxw();t.xp6(2),t.Oqu(a.description),t.xp6(2),t.Q6J("text",t.lcZ(5,3,"edit"))("disabled",!l.hasPrivilege("COUNTRY_CREATE"))}}const g=[{path:"",component:(()=>{class s{constructor(a,l,x,A){this.countryCreateEditPopupService=a,this.webService=l,this.listEntities=x,this.authStoreService=A,this.subs=new e.L,this.entities=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.totalEntitiesLength=this.listEntities.totalEntitiesLength,this.keyword=""}ngOnInit(){this.subs.sink=this.listEntities.setWebService(this.webService).requestFirstPage()}hasPrivilege(a){return this.authStoreService.isAllowed(a)}inputSearchHandler(a){const l=new h.h;l.criteriaQuick=a,this.listEntities.setFilter(l)}createCountry(){this.countryCreateEditPopupService.openDialog().subscribe(a=>{a&&this.listEntities.requestFirstPage()})}editCountry(a){this.countryCreateEditPopupService.openDialog(a).subscribe(l=>{l&&this.listEntities.requestFirstPage()})}bottomReachedHandler(){this.listEntities.requestNextPage()}ngOnDestroy(){this.subs.unsubscribe()}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(u.b),t.Y36(v.N),t.Y36(c.y),t.Y36(T.g))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-countries"]],features:[t._Bn([v.N,u.b,c.y])],decls:20,vars:26,consts:[[1,"container"],[1,"search-bar"],[3,"placeholder","keyword","changeEvent"],[1,"create-button",3,"iconName","text","disabled","clickEvent"],["scrollToBottom","",1,"grid-container","standard-grid-table",3,"bottomReached"],[1,"grid-item","header","sticky"],["class","no-results",4,"ngIf"],["class","spinner",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"no-results"],[1,"spinner"],[1,"grid-item"],[3,"text","disabled","clickEvent"]],template:function(a,l){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"app-search-input",2),t.NdJ("changeEvent",function(A){return l.inputSearchHandler(A)}),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-button",3),t.NdJ("clickEvent",function(){return l.createCountry()}),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.NdJ("bottomReached",function(){return l.bottomReachedHandler()}),t.TgZ(7,"div",5),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",5),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,S,3,3,"div",6),t.ALo(14,"async"),t.ALo(15,"async"),t.YNc(16,d,2,0,"div",7),t.ALo(17,"async"),t.YNc(18,E,6,5,"ng-container",8),t.ALo(19,"async"),t.qZA(),t.qZA()),2&a&&(t.xp6(2),t.Q6J("placeholder",t.lcZ(3,10,"searchFor"))("keyword",l.keyword),t.xp6(2),t.Q6J("iconName","plus")("text",t.lcZ(5,12,"createCountry"))("disabled",!l.hasPrivilege("COUNTRY_CREATE")),t.xp6(4),t.Oqu(t.lcZ(9,14,"description")),t.xp6(3),t.Oqu(t.lcZ(12,16,"edit")),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(14,18,l.totalEntitiesLength)&&!t.lcZ(15,20,l.isLoading)),t.xp6(3),t.Q6J("ngIf",t.lcZ(17,22,l.isLoading)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(19,24,l.entities)))},directives:[O.J,P.r,Z.C,r.O5,r.sg,_.$g],pipes:[M.X$,r.Ov],styles:[".container[_ngcontent-%COMP%]{height:calc(100%);min-width:500px}.container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;max-height:calc(100% - 120px);overflow-y:auto;margin-top:20px}"]}),s})(),canActivate:[o.Y],data:{permission:"COUNTRIES_VIEW"}}];let f=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[p.Bz.forChild(g)],p.Bz]}),s})();var y=n(2024),L=n(8966),I=n(3497),R=n(6460),D=n(8287);let B=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[r.ez,f,M.aw,y.h,L.Is,I.N,R.n,_.Cq,D.n]]}),s})()},2905:(b,m,n)=>{n.d(m,{b:()=>S});var r=n(8966),p=n(7574),o=n(3679),u=n(4794),h=n(4463),c=n(29),e=n(7716),v=n(8794),t=n(4333),T=n(8583),O=n(7322),P=n(3722),Z=n(42);function _(d,E){if(1&d){const i=e.EpF();e.TgZ(0,"form",3),e.TgZ(1,"mat-form-field"),e.TgZ(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",4),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"app-button",6),e.NdJ("clickEvent",function(){return e.CHM(i),e.oxw().cancel()}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"app-button",7),e.NdJ("clickEvent",function(){return e.CHM(i),e.oxw().handleSubmitButton()}),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&d){const i=e.oxw();e.Q6J("formGroup",i.formGroup),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(4,9,"description")," "),e.xp6(4),e.Q6J("text",e.lcZ(8,11,"cancel")),e.xp6(2),e.Q6J("text",e.lcZ(10,13,"save"))("disabled",i.isEdit&&!i.formGroup.dirty||i.formGroup.invalid)}}let M=(()=>{class d{constructor(i,g,f,y,L){this.dialogRef=i,this.data=g,this.globalService=f,this.webService=y,this.translateService=L,this.subs=new h.L,this.isEdit=!1}get descriptionControl(){return this.formGroup.get("description")}ngOnInit(){this.isEdit=!!this.data.oid,this.countryOID=this.data.oid,this.isEdit?this.initializeEdit():this.initializeCreate()}initializeCreate(){this.formGroup=new o.cw({description:new o.NI("",[o.kI.required])})}initializeEdit(){this.webService.getEntityByOid(this.countryOID).subscribe(i=>{i&&(this.formGroup=new o.cw({description:new o.NI(i.description,[o.kI.required])}))})}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){this.isEdit?this.webService.updateEntity(this.countryOID,this.formGroup.value).subscribe(i=>{i&&(this.globalService.showBasicAlert(u.I.success,this.translateService.instant("successfully"),this.translateService.instant("countryIsSuccessfullyUpdated")),this.dialogRef.close(i))}):this.webService.createEntity(this.formGroup.value).subscribe(i=>{i&&(this.globalService.showBasicAlert(u.I.success,this.translateService.instant("successfully"),this.translateService.instant("newCountryIsSuccessfullyCreated")),this.dialogRef.close(i))})}ngOnDestroy(){this.subs.unsubscribe()}}return d.\u0275fac=function(i){return new(i||d)(e.Y36(r.so),e.Y36(r.WI),e.Y36(v.U),e.Y36(c.N),e.Y36(t.sK))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-country-create-edit"]],features:[e._Bn([c.N])],decls:6,vars:4,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],[1,"form",3,"formGroup"],["matInput","","formControlName","description"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"]],template:function(i,g){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.YNc(5,_,11,15,"form",2),e.qZA()),2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,g.isEdit?"editCountry":"createCountry")," "),e.xp6(2),e.Q6J("ngIf",g.formGroup))},directives:[T.O5,o._Y,o.JL,o.sg,O.KE,O.hX,P.Nt,o.Fj,o.JJ,o.u,Z.r],pipes:[t.X$],styles:[".container[_ngcontent-%COMP%]{height:100%;width:100%}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:column;margin-top:20px;display:flex}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),d})(),S=(()=>{class d{constructor(i){this._matDialog=i}openDialog(i=""){return new p.y(g=>{const f=new r.vA;f.data={oid:i},this._matDialog.open(M,f).afterClosed().subscribe(y=>{g.next(y),g.complete()},()=>g.error())})}}return d.\u0275fac=function(i){return new(i||d)(e.LFG(r.uw))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac}),d})()},4286:(b,m,n)=>{n.d(m,{C:()=>u});var r=n(7716),p=n(2759),o=n(4395);let u=(()=>{class h{constructor(e){this.component=e,this.bottomReached=new r.vpe,this.className="scrollbar",this.scrollDelay=200}ngOnInit(){(0,p.R)(this.component.nativeElement,"scroll").pipe((0,o.b)(this.scrollDelay)).subscribe(()=>{const e=this.component.nativeElement;e.offsetHeight+e.scrollTop+10>=e.scrollHeight&&this.bottomReached.emit()})}}return h.\u0275fac=function(e){return new(e||h)(r.Y36(r.SBq))},h.\u0275dir=r.lG2({type:h,selectors:[["","scrollToBottom",""]],hostVars:2,hostBindings:function(e,v){2&e&&r.Tol(v.className)},outputs:{bottomReached:"bottomReached"}}),h})()},9360:(b,m,n)=>{n.d(m,{K:()=>p});var r=n(8228);class p extends r.g{constructor(){super(...arguments),this.description=""}}},287:(b,m,n)=>{n.d(m,{h:()=>r});class r{constructor(){this.criteriaQuick="",this.betweenAttributes=[],this.ordering="ASC"}getBetweenAttributes(){return this.betweenAttributes}addBetweenAttribute(o){let u=this.betweenAttributes.findIndex(h=>h.attribute===o.attribute);u<0?this.betweenAttributes.push(o):this.betweenAttributes[u]=o}clearAllBetweenAttributes(){this.betweenAttributes=[]}removeBetweenAttribute(o){let u=this.betweenAttributes.findIndex(h=>h.attribute===o);u>=0&&this.betweenAttributes.splice(u,1)}}},5595:(b,m,n)=>{n.d(m,{y:()=>u});var r=n(6215),p=n(8939),o=n(287);class u{constructor(){this.entities$=new r.X([]),this.totalEntitiesLength$=new r.X(void 0),this.bottomReached$=new r.X(!1),this.isLoading$=new r.X(!1),this.entities=this.entities$.asObservable(),this.totalEntitiesLength=this.totalEntitiesLength$.asObservable(),this.isLoading=this.isLoading$.asObservable(),this.searchModel=new o.h,this.NUMBER_OF_ITEMS_ON_PAGE=50}get numberOfItemsOnPage(){return this.NUMBER_OF_ITEMS_ON_PAGE}setWebService(c){return this.webService=c,this}setOrdering(c){return this.searchModel.ordering=c,this}setFilter(c){this.searchModel=c,this.requestFirstPage()}requestFirstPage(){this.bottomReached$.next(!1),this.entities$.next([]),this.totalEntitiesLength$.next(0),this.requestNextPage()}requestNextPage(){var c;this.bottomReached$.getValue()||(this.isLoading$.next(!0),null===(c=this.webService)||void 0===c||c.searchEntities(this.searchModel,this.entities$.getValue().length||0,this.NUMBER_OF_ITEMS_ON_PAGE).pipe((0,p.x)(()=>{this.isLoading$.next(!1)})).subscribe(e=>{this.entities$.next(this.entities$.getValue().concat(e.entities));const v=this.entities$.getValue().length||0;this.bottomReached$.next(!(v<e.totalCount)),this.totalEntitiesLength$.next(e.totalCount)}))}}},29:(b,m,n)=>{n.d(m,{N:()=>c});var r=n(4292),p=n(136),o=n(9360),u=n(7716),h=n(7515);let c=(()=>{class e extends r.h{constructor(t){super(t,o.K,p.HT),this.baseWebService=t}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(h.I))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e})()}}]);