"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[400],{7095:(O,u,n)=>{n.d(u,{Y:()=>t});var i=n(4794),c=n(7716),a=n(8933),p=n(8794),r=n(4655),s=n(4333);let t=(()=>{class m{constructor(E,l,C,v){this.authStoreService=E,this.globalService=l,this.router=C,this.translateService=v}canActivate(E){var l;return!(!(null===(l=this.authStoreService.user)||void 0===l?void 0:l.privileges)||!this.authStoreService.isAllowed(E.data.permission))||(this.globalService.showBasicAlert(i.I.error,this.translateService.instant("Nedozvoljeno"),this.translateService.instant("Nemate pristup")),!1)}}return m.\u0275fac=function(E){return new(E||m)(c.LFG(a.g),c.LFG(p.U),c.LFG(r.F0),c.LFG(s.sK))},m.\u0275prov=c.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6400:(O,u,n)=>{n.r(u),n.d(u,{CountriesModule:()=>R});var i=n(8583),c=n(4655),a=n(7095),p=n(2905),r=n(287),s=n(5595),t=n(4463),m=n(29),e=n(7716),E=n(8933),l=n(4605),C=n(42),v=n(4286),y=n(4237),M=n(4333);function b(d,P){if(1&d){const h=e.EpF();e.ynx(0),e.TgZ(1,"div",7),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"app-button",8),e.NdJ("clickEvent",function(){const x=e.CHM(h).$implicit;return e.oxw().editCountry(x.oid)}),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.BQk()}if(2&d){const h=P.$implicit,f=e.oxw();e.xp6(2),e.Oqu(h.description),e.xp6(2),e.Q6J("text",e.lcZ(5,3,"edit"))("disabled",!f.hasPrivilege("COUNTRY_CREATE"))}}const I=[{path:"",component:(()=>{class d{constructor(h,f,D,x){this.countryCreateEditPopupService=h,this.webService=f,this.listEntities=D,this.authStoreService=x,this.subs=new t.L,this.entities=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.keyword=""}ngOnInit(){this.subs.sink=this.listEntities.setWebService(this.webService).requestFirstPage()}hasPrivilege(h){return this.authStoreService.isAllowed(h)}inputSearchHandler(h){const f=new r.h;f.criteriaQuick=h,this.listEntities.setFilter(f)}createCountry(){this.countryCreateEditPopupService.openDialog().subscribe(h=>{h&&this.listEntities.requestFirstPage()})}editCountry(h){this.countryCreateEditPopupService.openDialog(h).subscribe(f=>{f&&this.listEntities.requestFirstPage()})}bottomReachedHandler(){this.listEntities.requestNextPage()}ngOnDestroy(){this.subs.unsubscribe()}}return d.\u0275fac=function(h){return new(h||d)(e.Y36(p.b),e.Y36(m.N),e.Y36(s.y),e.Y36(E.g))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-countries"]],features:[e._Bn([m.N,p.b,s.y])],decls:16,vars:20,consts:[[1,"container"],[1,"search-bar"],[3,"placeholder","keyword","changeEvent"],[1,"create-button",3,"text","disabled","clickEvent"],["scrollToBottom","",1,"grid-container","standard-grid-table",3,"componentLoading","bottomReached"],[1,"grid-item","header","sticky"],[4,"ngFor","ngForOf"],[1,"grid-item"],[3,"text","disabled","clickEvent"]],template:function(h,f){1&h&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"app-search-input",2),e.NdJ("changeEvent",function(x){return f.inputSearchHandler(x)}),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-button",3),e.NdJ("clickEvent",function(){return f.createCountry()}),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.NdJ("bottomReached",function(){return f.bottomReachedHandler()}),e.ALo(7,"async"),e.TgZ(8,"div",5),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",5),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.YNc(14,b,6,5,"ng-container",6),e.ALo(15,"async"),e.qZA(),e.qZA()),2&h&&(e.xp6(2),e.Q6J("placeholder",e.lcZ(3,8,"searchFor"))("keyword",f.keyword),e.xp6(2),e.Q6J("text",e.lcZ(5,10,"createCountry"))("disabled",!f.hasPrivilege("COUNTRY_CREATE")),e.xp6(2),e.Q6J("componentLoading",e.lcZ(7,12,f.isLoading)||!1),e.xp6(3),e.Oqu(e.lcZ(10,14,"description")),e.xp6(3),e.Oqu(e.lcZ(13,16,"edit")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(15,18,f.entities)))},directives:[l.J,C.r,v.C,y.T,i.sg],pipes:[M.X$,i.Ov],styles:[".container[_ngcontent-%COMP%]{height:calc(100%)}.container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;max-height:calc(100% - 100px);overflow-y:auto}"]}),d})(),canActivate:[a.Y],data:{permission:"COUNTRIES_VIEW"}}];let o=(()=>{class d{}return d.\u0275fac=function(h){return new(h||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[[c.Bz.forChild(I)],c.Bz]}),d})();var _=n(2024),S=n(8966),T=n(3497),A=n(6460),L=n(8109),Z=n(8287);let R=(()=>{class d{}return d.\u0275fac=function(h){return new(h||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[[i.ez,o,M.aw,_.h,S.Is,T.N,A.n,L.V,Z.n]]}),d})()},2905:(O,u,n)=>{n.d(u,{b:()=>b});var i=n(8966),c=n(7574),a=n(3679),p=n(4794),r=n(4463),s=n(29),t=n(7716),m=n(8794),e=n(4333),E=n(8583),l=n(7322),C=n(3722),v=n(42);function y(g,I){if(1&g){const o=t.EpF();t.TgZ(0,"form",3),t.TgZ(1,"mat-form-field"),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"app-button",6),t.NdJ("clickEvent",function(){return t.CHM(o),t.oxw().cancel()}),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"app-button",7),t.NdJ("clickEvent",function(){return t.CHM(o),t.oxw().handleSubmitButton()}),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&g){const o=t.oxw();t.Q6J("formGroup",o.formGroup),t.xp6(2),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(4,9,"description")," "),t.xp6(4),t.Q6J("text",t.lcZ(8,11,"cancel")),t.xp6(2),t.Q6J("text",t.lcZ(10,13,"save"))("disabled",o.isEdit&&!o.formGroup.dirty||o.formGroup.invalid)}}let M=(()=>{class g{constructor(o,_,S,T,A){this.dialogRef=o,this.data=_,this.globalService=S,this.webService=T,this.translateService=A,this.subs=new r.L,this.isEdit=!1}get descriptionControl(){return this.formGroup.get("description")}ngOnInit(){this.isEdit=!!this.data.oid,this.countryOID=this.data.oid,this.isEdit?this.initializeEdit():this.initializeCreate()}initializeCreate(){this.formGroup=new a.cw({description:new a.NI("",[a.kI.required])})}initializeEdit(){this.webService.getEntityByOid(this.countryOID).subscribe(o=>{o&&(this.formGroup=new a.cw({description:new a.NI(o.description,[a.kI.required])}))})}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){this.isEdit?this.webService.updateEntity(this.countryOID,this.formGroup.value).subscribe(o=>{o&&(this.globalService.showBasicAlert(p.I.success,this.translateService.instant("successfully"),this.translateService.instant("countryIsSuccessfullyUpdated")),this.dialogRef.close(o))}):this.webService.createEntity(this.formGroup.value).subscribe(o=>{o&&(this.globalService.showBasicAlert(p.I.success,this.translateService.instant("successfully"),this.translateService.instant("newCountryIsSuccessfullyCreated")),this.dialogRef.close(o))})}ngOnDestroy(){this.subs.unsubscribe()}}return g.\u0275fac=function(o){return new(o||g)(t.Y36(i.so),t.Y36(i.WI),t.Y36(m.U),t.Y36(s.N),t.Y36(e.sK))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-country-create-edit"]],features:[t._Bn([s.N])],decls:6,vars:4,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],[1,"form",3,"formGroup"],["matInput","","formControlName","description"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"]],template:function(o,_){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.YNc(5,y,11,15,"form",2),t.qZA()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,_.isEdit?"editCountry":"createCountry")," "),t.xp6(2),t.Q6J("ngIf",_.formGroup))},directives:[E.O5,a._Y,a.JL,a.sg,l.KE,l.hX,C.Nt,a.Fj,a.JJ,a.u,v.r],pipes:[e.X$],styles:[".container[_ngcontent-%COMP%]{height:100%;width:100%}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:column;margin-top:20px;display:flex}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),g})(),b=(()=>{class g{constructor(o){this._matDialog=o}openDialog(o=""){return new c.y(_=>{const S=new i.vA;S.data={oid:o},this._matDialog.open(M,S).afterClosed().subscribe(T=>{_.next(T),_.complete()},()=>_.error())})}}return g.\u0275fac=function(o){return new(o||g)(t.LFG(i.uw))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac}),g})()},4605:(O,u,n)=>{n.d(u,{J:()=>E});var i=n(7716),c=n(3679),a=n(4395),p=n(7322),r=n(3722),s=n(8583),t=n(5411);function m(l,C){1&l&&i._UZ(0,"i-feather",4)}function e(l,C){if(1&l){const v=i.EpF();i.TgZ(0,"i-feather",5),i.NdJ("click",function(){return i.CHM(v),i.oxw().resetSearchInputValue()}),i.qZA()}}let E=(()=>{class l{constructor(){this.keyword="",this.placeholder="Search for...",this.debounceTime=500,this.minCharacters=1,this.changeEvent=new i.vpe,this.searchInput=new c.NI}ngOnInit(){this.inputChangeSubscription=this.searchInput.valueChanges.pipe((0,a.b)(this.debounceTime)).subscribe(()=>{(0===this.searchInput.value.length||this.searchInput.value.length>=this.minCharacters)&&this.changeEvent.emit(this.searchInput.value)})}ngOnChanges(v){v.keyword&&v.keyword.previousValue&&v.keyword.currentValue!==v.keyword.previousValue&&this.searchInput.setValue(this.keyword,{emitEvent:!1})}resetSearchInputValue(){this.searchInput.setValue("")}ngOnDestroy(){this.inputChangeSubscription.unsubscribe()}}return l.\u0275fac=function(v){return new(v||l)},l.\u0275cmp=i.Xpm({type:l,selectors:[["app-search-input"]],inputs:{keyword:"keyword",placeholder:"placeholder",debounceTime:"debounceTime",minCharacters:"minCharacters"},outputs:{changeEvent:"changeEvent"},features:[i.TTD],decls:6,vars:5,consts:[[1,"me-search-input-form-field"],["type","text","matInput","",3,"formControl","autocomplete"],["matSuffix","","name","search","class","search-icon",4,"ngIf"],["name","x","class","close","matSuffix","",3,"click",4,"ngIf"],["matSuffix","","name","search",1,"search-icon"],["name","x","matSuffix","",1,"close",3,"click"]],template:function(v,y){1&v&&(i.TgZ(0,"mat-form-field",0),i.TgZ(1,"mat-label"),i._uU(2),i.qZA(),i._UZ(3,"input",1),i.YNc(4,m,1,0,"i-feather",2),i.YNc(5,e,1,0,"i-feather",3),i.qZA()),2&v&&(i.xp6(2),i.Oqu(y.placeholder),i.xp6(1),i.Q6J("formControl",y.searchInput)("autocomplete","off"),i.xp6(1),i.Q6J("ngIf",!y.searchInput.value),i.xp6(1),i.Q6J("ngIf",y.searchInput.value))},directives:[p.KE,p.hX,r.Nt,c.Fj,c.JJ,c.oH,s.O5,t.uy,p.R9],styles:[".me-search-input-form-field .mat-form-field-wrapper{padding-bottom:0}\n"],encapsulation:2,changeDetection:0}),l})()},4237:(O,u,n)=>{n.d(u,{T:()=>c});var i=n(7716);let c=(()=>{class a{constructor(r,s){this.targetEl=r,this.renderer=s,this.hostPosition="relative",this.componentLoading=!1}ngOnInit(){this.uid="loading-container-"+this.generateRandomString();const r=this.renderer.createElement("div");this.renderer.setStyle(r,"display",this.componentLoading?"flex":"none"),this.renderer.setStyle(r,"justify-content","center"),this.renderer.setStyle(r,"align-items","center"),this.renderer.addClass(r,this.uid),this.renderer.setStyle(r,"position","absolute"),this.renderer.setStyle(r,"top","0"),this.renderer.setStyle(r,"background","#ffffff80"),this.renderer.setStyle(r,"width","100%"),this.renderer.setStyle(r,"height","100%"),this.renderer.setStyle(r,"z-index","9");const s=this.renderer.createElement("div");this.renderer.addClass(s,"me-component-loader");const t=this.renderer.createElement("div"),m=this.renderer.createElement("div"),e=this.renderer.createElement("div"),E=this.renderer.createElement("div"),l=this.renderer.createElement("div"),C=this.renderer.createElement("div"),v=this.renderer.createElement("div"),y=this.renderer.createElement("div"),M=this.renderer.createElement("div"),b=this.renderer.createElement("div"),g=this.renderer.createElement("div"),I=this.renderer.createElement("div");this.renderer.appendChild(s,t),this.renderer.appendChild(s,m),this.renderer.appendChild(s,e),this.renderer.appendChild(s,E),this.renderer.appendChild(s,l),this.renderer.appendChild(s,C),this.renderer.appendChild(s,v),this.renderer.appendChild(s,y),this.renderer.appendChild(s,M),this.renderer.appendChild(s,b),this.renderer.appendChild(s,g),this.renderer.appendChild(s,I),this.renderer.appendChild(r,s),this.renderer.appendChild(this.targetEl.nativeElement,r)}ngOnChanges(r){if(r.componentLoading){const t=this.targetEl.nativeElement.querySelector("."+this.uid);t&&this.renderer.setStyle(t,"display",this.componentLoading?"flex":"none")}}generateRandomString(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}}return a.\u0275fac=function(r){return new(r||a)(i.Y36(i.SBq),i.Y36(i.Qsj))},a.\u0275dir=i.lG2({type:a,selectors:[["","componentLoading",""]],hostVars:2,hostBindings:function(r,s){2&r&&i.Udp("position",s.hostPosition)},inputs:{componentLoading:"componentLoading"},features:[i.TTD]}),a})()},4286:(O,u,n)=>{n.d(u,{C:()=>p});var i=n(7716),c=n(2759),a=n(4395);let p=(()=>{class r{constructor(t){this.component=t,this.bottomReached=new i.vpe,this.className="scrollbar",this.scrollDelay=200}ngOnInit(){(0,c.R)(this.component.nativeElement,"scroll").pipe((0,a.b)(this.scrollDelay)).subscribe(()=>{const t=this.component.nativeElement;t.offsetHeight+t.scrollTop+10>=t.scrollHeight&&this.bottomReached.emit()})}}return r.\u0275fac=function(t){return new(t||r)(i.Y36(i.SBq))},r.\u0275dir=i.lG2({type:r,selectors:[["","scrollToBottom",""]],hostVars:2,hostBindings:function(t,m){2&t&&i.Tol(m.className)},outputs:{bottomReached:"bottomReached"}}),r})()},9360:(O,u,n)=>{n.d(u,{K:()=>c});var i=n(8228);class c extends i.g{constructor(){super(...arguments),this.description=""}}},287:(O,u,n)=>{n.d(u,{h:()=>i});class i{constructor(){this.criteriaQuick="",this.objectsOIDS=[],this.attributes=[],this.ordering="ASC"}}},5595:(O,u,n)=>{n.d(u,{y:()=>a});var i=n(6215),c=n(287);class a{constructor(){this.entities$=new i.X([]),this.totalEntitiesLength$=new i.X(void 0),this.bottomReached$=new i.X(!1),this.isLoading$=new i.X(!1),this.entities=this.entities$.asObservable(),this.totalEntitiesLength=this.totalEntitiesLength$.asObservable(),this.isLoading=this.isLoading$.asObservable(),this.searchModel=new c.h,this.NUMBER_OF_ITEMS_ON_PAGE=50}get numberOfItemsOnPage(){return this.NUMBER_OF_ITEMS_ON_PAGE}setWebService(r){return this.webService=r,this}setOrdering(r){return this.searchModel.ordering=r,this}setFilter(r){this.searchModel=r,this.requestFirstPage()}requestFirstPage(){this.bottomReached$.next(!1),this.entities$.next([]),this.totalEntitiesLength$.next(0),this.requestNextPage()}requestNextPage(){var r;this.bottomReached$.getValue()||(this.isLoading$.next(!0),null===(r=this.webService)||void 0===r||r.searchEntities(this.searchModel,this.entities$.getValue().length||0,this.NUMBER_OF_ITEMS_ON_PAGE).subscribe(s=>{this.entities$.next(this.entities$.getValue().concat(s.entities));const t=this.entities$.getValue().length||0;this.bottomReached$.next(!(t<s.totalCount)),this.totalEntitiesLength$.next(s.totalCount),this.isLoading$.next(!1)}))}}},29:(O,u,n)=>{n.d(u,{N:()=>s});var i=n(4292),c=n(136),a=n(9360),p=n(7716),r=n(7515);let s=(()=>{class t extends i.h{constructor(e){super(e,a.K,c.HT),this.baseWebService=e}}return t.\u0275fac=function(e){return new(e||t)(p.LFG(r.I))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t})()}}]);