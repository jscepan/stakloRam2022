"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[610],{7707:(T,d,e)=>{e.d(d,{R:()=>E});var c=e(8583),u=e(4333),g=e(7942),l=e(7322),h=e(3722),p=e(3679),m=e(4107),_=e(2024),v=e(8966),f=e(1079),L=e(8287),x=e(6591),P=e(7269),A=e(7716);let E=(()=>{class t{}return t.\u0275fac=function(Z){return new(Z||t)},t.\u0275mod=A.oAB({type:t}),t.\u0275inj=A.cJS({imports:[[c.ez,u.aw,g.p,_.h,p.UX,h.c,l.lN,m.LD,v.Is,f.Bb,L.n,x.I,P.Co]]}),t})()},4610:(T,d,e)=>{e.r(d),e.d(d,{HistoriesModule:()=>lt});var c=e(8583),u=e(4655),g=e(7095),l=e(8966),h=e(7574),p=e(4463),m=e(7379),_=e(5595),v=e(4292),f=e(136),L=e(4762),x=e(8902),P=e(8228),A=e(3709);class E extends P.g{constructor(){super(...arguments),this.action="",this.objectType="",this.previousValue="",this.newValue="",this.time=new Date,this.user=new A.T}}(0,L.gn)([(0,x.D)(()=>A.T)],E.prototype,"user",void 0);var t=e(7716),b=e(7515);let Z=(()=>{class i extends v.h{constructor(n){super(n,E,f._d),this.baseWebService=n}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(b.I))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var j=e(8939),y=e(4333),H=e(42),O=e(773);function N(i,s){1&i&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"noResults")," "))}function W(i,s){1&i&&(t.TgZ(0,"div",10),t._UZ(1,"mat-spinner"),t.qZA())}let S=(()=>{class i{constructor(n,o,a,r){this.dialogRef=n,this.data=o,this.webService=a,this.translateService=r,this.subs=new p.L,this.isLoading=!0}ngOnInit(){this.isLoading=!0,this.subs.sink=this.webService.getEntityByOid(this.data.oid).pipe((0,j.x)(()=>{this.isLoading=!1})).subscribe(n=>{this.history=n})}exit(){this.dialogRef.close(!1)}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(l.so),t.Y36(l.WI),t.Y36(Z),t.Y36(y.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-history-view"]],features:[t._Bn([Z,m.e,_.y])],decls:24,vars:20,consts:[[1,"container"],[1,"title"],[1,"content"],[1,"grid-container","standard-grid-table"],[1,"grid-item","header","sticky"],["class","no-results",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"no-results"],[1,"spinner"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",4),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",4),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",4),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,N,3,3,"div",5),t.YNc(20,W,2,0,"div",6),t.qZA(),t.qZA(),t.TgZ(21,"div",7),t.TgZ(22,"app-button",8),t.NdJ("clickEvent",function(){return o.exit()}),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,8,"historyView")," "),t.xp6(5),t.hij(" ",t.lcZ(9,10,"buyerName")," "),t.xp6(3),t.hij(" ",t.lcZ(12,12,"date")," "),t.xp6(3),t.hij(" ",t.lcZ(15,14,"amount")," "),t.xp6(3),t.hij(" ",t.lcZ(18,16,"bankStatementNumber")," "),t.xp6(2),t.Q6J("ngIf",o.history&&!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(2),t.Q6J("text",t.lcZ(23,18,"cancel")))},directives:[c.O5,H.r,O.$g],pipes:[y.X$],styles:["[_nghost-%COMP%]{display:flex;height:calc(80vh)}.container[_ngcontent-%COMP%]{height:calc(100%);min-width:50vw;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-grow:0;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column;margin-top:20px;overflow-y:auto;overflow-x:hidden}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto auto}.container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;flex-grow:0;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),i})(),B=(()=>{class i{constructor(n){this._matDialog=n}openDialog(n=""){return new h.y(o=>{const a=new l.vA;a.data={oid:n},this._matDialog.open(S,a).afterClosed().subscribe(()=>{o.next(),o.complete()},()=>o.error())})}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(l.uw))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var K=e(5153),w=e(287),J=e(4605),C=e(7322),D=e(3722),U=e(4107),V=e(1862),Y=e(4286);function Q(i,s){if(1&i&&(t.TgZ(0,"mat-option",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const n=s.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.displayName)," ")}}function z(i,s){if(1&i&&(t.TgZ(0,"mat-option",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const n=s.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.displayName)," ")}}function X(i,s){1&i&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"noResults")," "))}function $(i,s){1&i&&(t.TgZ(0,"div",17),t._UZ(1,"mat-spinner"),t.qZA())}function G(i,s){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",18),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",18),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"lowercase"),t.qZA(),t.TgZ(8,"div",18),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"div",18),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"div",18),t._uU(15),t.qZA(),t.TgZ(16,"div",18),t.TgZ(17,"app-button",19),t.NdJ("clickEvent",function(){const r=t.CHM(n).$implicit;return t.oxw().viewHistoryDetails(r.oid)}),t.qZA(),t.qZA(),t.BQk()}if(2&i){const n=s.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,7,n.objectType)," "),t.xp6(3),t.hij(" ",t.lcZ(6,9,t.lcZ(7,11,n.action))," "),t.xp6(4),t.hij(" ",t.xi3(10,13,n.time,"dd.MM.yyyy")," "),t.xp6(3),t.hij(" ",t.xi3(13,16,n.time,"hh:ss")," "),t.xp6(3),t.hij(" ",n.user.displayName," "),t.xp6(2),t.Q6J("iconName","eye")("isTransparentMode",!0)}}const q=[{path:"",component:(()=>{class i{constructor(n,o,a){this.webService=n,this.listEntities=o,this.historyViewPopupService=a,this.subs=new p.L,this.typesOfObject=f.g,this.actionTypesOfObject=f.So,this.isLoading=this.listEntities.isLoading,this.entities=this.listEntities.entities,this.totalEntitiesLength=this.listEntities.totalEntitiesLength,this.searchFilter=new w.h}ngOnInit(){this.subs.sink=this.listEntities.setWebService(this.webService).setOrdering("DESC").requestFirstPage()}typeChange(n){n?(this.searchFilter.attributes=[{object_type:[n.value]}],this.listEntities.setFilter(this.searchFilter)):(this.searchFilter.attributes=[],this.listEntities.setFilter(this.searchFilter))}actionTypeChange(n){if(n){const o={attribute:"action",attributeValue:n.value,attributeType:"STRING",type:"EQUAL"};let a=this.searchFilter.betweenAttributes.findIndex(r=>r.attribute===o.attribute);a<0?this.searchFilter.betweenAttributes.push(o):this.searchFilter.betweenAttributes[a]=o}else{let o=this.searchFilter.betweenAttributes.findIndex(a=>"action"===a.attribute);o>=0&&this.searchFilter.betweenAttributes.splice(o,1)}this.listEntities.setFilter(this.searchFilter)}dateChanged(n,o){var a,r;if(null===(a=o.target)||void 0===a?void 0:a.value){const M={attribute:"from"===n?"from_date":"to_date",attributeValue:null===(r=o.target)||void 0===r?void 0:r.value,attributeType:"DATE",type:"from"===n?"GREATER_OR_EQUAL":"SMALLER_OR_EQUAL"};let R=this.searchFilter.betweenAttributes.findIndex(ct=>ct.attribute===M.attribute);R<0?this.searchFilter.betweenAttributes.push(M):this.searchFilter.betweenAttributes[R]=M}else this.searchFilter.betweenAttributes=[];this.listEntities.setFilter(this.searchFilter)}inputSearchHandler(n){this.searchFilter.criteriaQuick=n,this.listEntities.setFilter(this.searchFilter)}viewHistoryDetails(n){this.subs.sink=this.historyViewPopupService.openDialog(n).subscribe(()=>{})}bottomReachedHandler(){this.listEntities.requestNextPage()}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(Z),t.Y36(_.y),t.Y36(B))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-histories"]],features:[t._Bn([Z,K.T,_.y,B])],decls:63,vars:68,consts:[[1,"container"],[1,"search-bar"],[3,"placeholder","changeEvent"],[1,"date-filter"],["type","date","matInput","",3,"change"],[1,"type-filter"],[3,"valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"action-type-filter"],["scrollToBottom","",1,"histories",3,"bottomReached"],[1,"grid-container","standard-grid-table"],[1,"grid-item","header","sticky"],["class","no-results",4,"ngIf"],["class","spinner",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"no-results"],[1,"spinner"],[1,"grid-item"],[3,"iconName","isTransparentMode","clickEvent"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"app-search-input",2),t.NdJ("changeEvent",function(r){return o.inputSearchHandler(r)}),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"mat-form-field"),t.TgZ(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"input",4),t.NdJ("change",function(r){return o.dateChanged("from",r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",3),t.TgZ(11,"mat-form-field"),t.TgZ(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"input",4),t.NdJ("change",function(r){return o.dateChanged("to",r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",5),t.TgZ(17,"mat-form-field"),t.TgZ(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"mat-select",6),t.NdJ("valueChange",function(r){return o.typeChange(r)}),t.TgZ(22,"mat-option"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.YNc(25,Q,3,4,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",8),t.TgZ(27,"mat-form-field"),t.TgZ(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"mat-select",6),t.NdJ("valueChange",function(r){return o.actionTypeChange(r)}),t.TgZ(32,"mat-option"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.YNc(35,z,3,4,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",9),t.NdJ("bottomReached",function(){return o.bottomReachedHandler()}),t.TgZ(37,"div",10),t.TgZ(38,"div",11),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"div",11),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"div",11),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",11),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"div",11),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"div",11),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.YNc(56,X,3,3,"div",12),t.ALo(57,"async"),t.ALo(58,"async"),t.YNc(59,$,2,0,"div",13),t.ALo(60,"async"),t.YNc(61,G,18,19,"ng-container",14),t.ALo(62,"async"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("placeholder",t.lcZ(3,34,"searchFor")),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(8,36,"fromDate")," "),t.xp6(5),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(14,38,"toDate")," "),t.xp6(5),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(20,40,"objectType")," "),t.xp6(4),t.Oqu(t.lcZ(24,42,"all")),t.xp6(2),t.Q6J("ngForOf",o.typesOfObject),t.xp6(3),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(30,44,"action")," "),t.xp6(4),t.Oqu(t.lcZ(34,46,"all")),t.xp6(2),t.Q6J("ngForOf",o.actionTypesOfObject),t.xp6(4),t.hij(" ",t.lcZ(40,48,"objectType")," "),t.xp6(3),t.hij(" ",t.lcZ(43,50,"action")," "),t.xp6(3),t.hij(" ",t.lcZ(46,52,"date")," "),t.xp6(3),t.hij(" ",t.lcZ(49,54,"time")," "),t.xp6(3),t.hij(" ",t.lcZ(52,56,"user")," "),t.xp6(3),t.hij(" ",t.lcZ(55,58,"viewDetails")," "),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(57,60,o.totalEntitiesLength)&&!t.lcZ(58,62,o.isLoading)),t.xp6(3),t.Q6J("ngIf",t.lcZ(60,64,o.isLoading)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(62,66,o.entities)))},directives:[J.J,C.KE,C.hX,D.Nt,U.gD,V.ey,c.sg,Y.C,c.O5,O.$g,H.r],pipes:[y.X$,c.Ov,c.i8,c.uU],styles:["[_nghost-%COMP%]{display:flex;height:calc(100%)}.container[_ngcontent-%COMP%]{height:calc(100%)}.container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .histories[_ngcontent-%COMP%]{height:calc(100% - 100px);overflow-y:auto;overflow-x:hidden}.container[_ngcontent-%COMP%]   .histories[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto auto auto auto}"]}),i})(),canActivate:[g.Y],data:{permission:"HISTORIES_VIEW"}}];let k=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.Bz.forChild(q)],u.Bz]}),i})();var F=e(2024),tt=e(2763),et=e(6460),it=e(8287),I=e(3679),nt=e(7707),ot=e(6591),st=e(7269),at=e(7012);let rt=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,y.aw,F.h,nt.R,I.UX,D.c,C.lN,U.LD,ot.I,st.Co,at.o,O.Cq]]}),i})(),lt=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,k,y.aw,F.h,tt.i,et.n,it.n,O.Cq,I.UX,I.u5,rt,D.c,C.lN,U.LD]]}),i})()},7012:(T,d,e)=>{e.d(d,{o:()=>g});var c=e(8583),u=e(7716);let g=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=u.oAB({type:l}),l.\u0275inj=u.cJS({imports:[[c.ez]]}),l})()},3749:(T,d,e)=>{e.d(d,{w:()=>h});var c=e(4762),u=e(8902),g=e(8228),l=e(8324);class h extends g.g{constructor(){super(...arguments),this.name="",this.address="",this.maticalNumber="",this.pib="",this.contactPerson="",this.phoneNumberFix="",this.phoneNumberMobile="",this.email=""}}(0,c.gn)([(0,u.D)(()=>l.v)],h.prototype,"city",void 0)},7379:(T,d,e)=>{e.d(d,{e:()=>p});var c=e(4292),u=e(136),g=e(3749),l=e(7716),h=e(7515);let p=(()=>{class m extends c.h{constructor(v){super(v,g.w,u.Hz),this.baseWebService=v}}return m.\u0275fac=function(v){return new(v||m)(l.LFG(h.I))},m.\u0275prov=l.Yz7({token:m,factory:m.\u0275fac}),m})()}}]);