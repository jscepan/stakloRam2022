"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[62],{4936:(D,_,e)=>{e.d(_,{x:()=>F});var m=e(8966),u=e(7574),o=e(3679),s=e(4794),a=e(4463),l=e(7379),c=e(7650),g=e(2134),d=e(5595),M=e(287),t=e(7716),I=e(8794),v=e(119),E=e(9808),O=e(7322),C=e(4107),P=e(6591),A=e(3194),B=e(3336),T=e(4802),x=e(7269),L=e(42);function Z(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"mat-option"),t.TgZ(1,"ngx-mat-select-search",13),t.NdJ("ngModelChange",function(f){return t.CHM(n),t.oxw(2).searchHandler(f)}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.ALo(4,"async"),t.qZA(),t.qZA()}if(2&r){const n=t.oxw(2);t.xp6(1),t.s9C("placeholderLabel",t.lcZ(2,7,"searchFor")),t.s9C("noEntriesFoundLabel",t.lcZ(3,9,"noResults")),t.Q6J("formControl",n.searchControl)("hideClearSearchButton",!0)("clearSearchInput",!0)("searching",t.lcZ(4,11,n.isLoading)||!1)("disableScrollToActiveOnOptionsChanged",!0)}}function U(r,p){if(1&r&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&r){const n=t.oxw(2);t.Q6J("value",n.selectedBuyer),t.xp6(1),t.Oqu(n.selectedBuyer.name)}}function S(r,p){if(1&r&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&r){const n=t.oxw().$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.name," ")}}function N(r,p){if(1&r&&(t.ynx(0),t.YNc(1,S,2,2,"mat-option",7),t.BQk()),2&r){const n=p.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==i.selectedBuyer?null:i.selectedBuyer.oid)!==n.oid)}}function W(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"form",4),t.TgZ(1,"mat-form-field"),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",5),t.NdJ("infiniteScroll",function(){return t.CHM(n),t.oxw().bottomReachedHandler()})("selectionChange",function(f){return t.CHM(n),t.oxw().selectBuyer(f)}),t.YNc(6,Z,5,13,"mat-option",6),t.YNc(7,U,2,2,"mat-option",7),t.YNc(8,N,2,1,"ng-container",8),t.ALo(9,"async"),t.qZA(),t.qZA(),t.TgZ(10,"mat-form-field"),t.TgZ(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",9),t.qZA(),t.TgZ(15,"mat-form-field"),t.TgZ(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field"),t.TgZ(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"input",11),t.qZA(),t.TgZ(25,"mat-form-field"),t.TgZ(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"input",12),t.qZA(),t.qZA()}if(2&r){const n=t.oxw();t.Q6J("formGroup",n.formGroup),t.xp6(2),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(4,31,"buyer")," "),t.xp6(2),t.Q6J("disabled",n.isEdit)("compareWith",n.compareFn),t.xp6(1),t.Q6J("ngIf",!n.isEdit),t.xp6(1),t.Q6J("ngIf",n.selectedBuyer),t.xp6(1),t.Q6J("ngForOf",t.lcZ(9,33,n.buyersEntities)),t.xp6(3),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(13,35,"amount")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(18,37,"date")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(23,39,"bankStatementNumber")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(28,41,"comment")," ")}}function R(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"app-button",16),t.NdJ("clickEvent",function(){return t.CHM(n),t.oxw().cancel()}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"app-button",17),t.NdJ("clickEvent",function(){return t.CHM(n),t.oxw().handleSubmitButton()}),t.ALo(4,"translate"),t.qZA(),t.qZA()}if(2&r){const n=t.oxw();t.xp6(1),t.Q6J("text",t.lcZ(2,3,"cancel")),t.xp6(2),t.Q6J("text",t.lcZ(4,5,"save"))("disabled",n.isEdit&&!n.formGroup.dirty||n.formGroup.invalid)}}let K=(()=>{class r{constructor(n,i,f,h,y,b,J,Y){this.dialogRef=n,this.data=i,this.globalService=f,this.webService=h,this.buyerWebService=y,this.translateService=b,this.el=J,this.listEntities=Y,this.subs=new a.L,this.isEdit=!1,this.buyersEntities=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.searchControl=new o.NI,this.compareFn=g.nt}ngOnInit(){this.isEdit=!!this.data.oid,this.incomeOID=this.data.oid,this.subs.sink=this.listEntities.setWebService(this.buyerWebService).requestFirstPage(),this.isEdit?this.initializeEdit():this.initializeCreate(this.data.buyer,this.data.amount)}initializeCreate(n,i){n&&(this.selectedBuyer=n),this.formGroup=new o.cw({date:new o.NI((new Date).toISOString().substring(0,10),[o.kI.required]),bankStatementNumber:new o.NI(""),amount:new o.NI(i||0,[o.kI.required,o.kI.min(0)]),comment:new o.NI("",[]),buyer:new o.NI(this.selectedBuyer,o.kI.required)})}initializeEdit(){this.subs.sink=this.webService.getEntityByOid(this.incomeOID).subscribe(n=>{n&&(this.selectedBuyer=n.buyer,this.formGroup=new o.cw({date:new o.NI(n.date,[o.kI.required]),bankStatementNumber:new o.NI(n.bankStatementNumber),amount:new o.NI(n.amount,[o.kI.required,o.kI.min(0)]),comment:new o.NI(n.comment,[]),buyer:new o.NI(this.selectedBuyer,o.kI.required)}))})}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){const n=this.formGroup.value;this.isEdit?this.webService.updateEntity(this.incomeOID,n).subscribe(i=>{i&&(this.globalService.showBasicAlert(s.I.success,this.translateService.instant("successfully"),this.translateService.instant("incomeIsSuccessfullyUpdated")),this.dialogRef.close(i))}):this.webService.createEntity(n).subscribe(i=>{i&&(this.globalService.showBasicAlert(s.I.success,this.translateService.instant("successfully"),this.translateService.instant("newIncomeIsSuccessfullyCreated")),this.dialogRef.close(i))})}bottomReachedHandler(){this.listEntities.requestNextPage()}selectBuyer(n){n&&n.value&&(this.selectedBuyer=n.value)}searchHandler(n){let i=new M.h;i.criteriaQuick=n,this.listEntities.setFilter(i)}setFocusOn(n,i=0,f=!1){const h=this.el.nativeElement.querySelectorAll('[formcontrolname="'+n+'"]')[i<0?0:i];null==h||h.focus(),f&&h.select()}ngOnDestroy(){this.subs.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(m.so),t.Y36(m.WI),t.Y36(I.U),t.Y36(c.L),t.Y36(l.e),t.Y36(v.sK),t.Y36(t.SBq),t.Y36(d.y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-income-create-edit"]],features:[t._Bn([c.L,l.e,d.y])],decls:7,vars:5,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],["class","button-section",4,"ngIf"],[1,"form",3,"formGroup"],["formControlName","buyer","msInfiniteScroll","",3,"disabled","compareWith","infiniteScroll","selectionChange"],[4,"ngIf"],[3,"value",4,"ngIf"],[4,"ngFor","ngForOf"],["type","text","appDecimal","","matInput","","formControlName","amount"],["type","date","matInput","","formControlName","date"],["type","text","matInput","","formControlName","bankStatementNumber"],["type","text","matInput","","formControlName","comment"],[3,"formControl","placeholderLabel","noEntriesFoundLabel","hideClearSearchButton","clearSearchInput","searching","disableScrollToActiveOnOptionsChanged","ngModelChange"],[3,"value"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.YNc(5,W,30,43,"form",2),t.YNc(6,R,5,7,"div",3),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,i.isEdit?"editIncome":"createIncome")," "),t.xp6(2),t.Q6J("ngIf",i.formGroup),t.xp6(1),t.Q6J("ngIf",i.formGroup))},directives:[E.O5,o._Y,o.JL,o.sg,O.KE,O.hX,C.gD,o.JJ,o.u,P.s,E.sg,A.Nt,o.Fj,B.U,T.ey,x.nu,o.oH,L.r],pipes:[v.X$,E.Ov],styles:["[_nghost-%COMP%]{display:flex;height:calc(100%)}.container[_ngcontent-%COMP%]{height:calc(100%)}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px;color:var(--color-black)}.container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),r})(),F=(()=>{class r{constructor(n){this._matDialog=n}openDialog(n="",i,f=0){return new u.y(h=>{const y=new m.vA;y.data={oid:n,buyer:i,amount:f},this._matDialog.open(K,y).afterClosed().subscribe(b=>{h.next(b),h.complete()},()=>h.error())})}}return r.\u0275fac=function(n){return new(n||r)(t.LFG(m.uw))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})()},6225:(D,_,e)=>{e.d(_,{y:()=>v});var m=e(9808),u=e(119),o=e(2024),s=e(7707),a=e(3679),l=e(7322),c=e(3194),g=e(4107),d=e(6591),M=e(7269),t=e(7012),I=e(7716);let v=(()=>{class E{}return E.\u0275fac=function(C){return new(C||E)},E.\u0275mod=I.oAB({type:E}),E.\u0275inj=I.cJS({imports:[[m.ez,u.aw,o.h,s.R,a.UX,c.c,l.lN,g.LD,d.I,M.Co,t.o]]}),E})()},7707:(D,_,e)=>{e.d(_,{R:()=>O});var m=e(9808),u=e(119),o=e(7942),s=e(7322),a=e(3194),l=e(3679),c=e(4107),g=e(2024),d=e(8966),M=e(1079),t=e(8287),I=e(6591),v=e(7269),E=e(7716);let O=(()=>{class C{}return C.\u0275fac=function(A){return new(A||C)},C.\u0275mod=E.oAB({type:C}),C.\u0275inj=E.cJS({imports:[[m.ez,u.aw,o.p,g.h,l.UX,a.c,s.lN,c.LD,d.Is,M.Bb,t.n,I.I,v.Co]]}),C})()},3336:(D,_,e)=>{e.d(_,{U:()=>u});var m=e(7716);let u=(()=>{class o{constructor(a){this.el=a}keyup(){this.validateNumber(this.el.nativeElement.value)}validateNumber(a){a=a.replace(/[^\d,.-]/g,"");let l=-1;for(let c=0;c<a.length;c++)if("."===a.charAt(c)||","===a.charAt(c)){l=c;break}a=(a=a.replaceAll(".","")).replaceAll(",",""),0===l?a="0."+a:l>0&&(a=a.substring(0,l)+"."+(a.length>l?a.substring(l):"")),this.el.nativeElement.value=a}}return o.\u0275fac=function(a){return new(a||o)(m.Y36(m.SBq))},o.\u0275dir=m.lG2({type:o,selectors:[["","appDecimal",""]],hostBindings:function(a,l){1&a&&m.NdJ("keyup",function(){return l.keyup()})}}),o})()},7012:(D,_,e)=>{e.d(_,{o:()=>o});var m=e(9808),u=e(7716);let o=(()=>{class s{}return s.\u0275fac=function(l){return new(l||s)},s.\u0275mod=u.oAB({type:s}),s.\u0275inj=u.cJS({imports:[[m.ez]]}),s})()},3749:(D,_,e)=>{e.d(_,{w:()=>a});var m=e(4762),u=e(8902),o=e(8228),s=e(8324);class a extends o.g{constructor(){super(...arguments),this.name="",this.address="",this.maticalNumber="",this.pib="",this.contactPerson="",this.phoneNumberFix="",this.phoneNumberMobile="",this.email=""}}(0,m.gn)([(0,u.D)(()=>s.v)],a.prototype,"city",void 0)},7379:(D,_,e)=>{e.d(_,{e:()=>l});var m=e(4292),u=e(136),o=e(3749),s=e(7716),a=e(7515);let l=(()=>{class c extends m.h{constructor(d){super(d,o.w,u.Hz),this.baseWebService=d}}return c.\u0275fac=function(d){return new(d||c)(s.LFG(a.I))},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac}),c})()},7650:(D,_,e)=>{e.d(_,{L:()=>M});var m=e(4292),u=e(136),o=e(4762),s=e(8902),a=e(8228),l=e(3749);class c extends a.g{constructor(){super(...arguments),this.date=new Date,this.bankStatementNumber="",this.amount=0,this.comment="",this.buyer=new l.w}}(0,o.gn)([(0,s.D)(()=>l.w)],c.prototype,"buyer",void 0);var g=e(7716),d=e(7515);let M=(()=>{class t extends m.h{constructor(v){super(v,c,u.ku),this.baseWebService=v}}return t.\u0275fac=function(v){return new(v||t)(g.LFG(d.I))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t})()}}]);