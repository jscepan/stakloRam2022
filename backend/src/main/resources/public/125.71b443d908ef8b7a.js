"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[125],{9125:($,h,n)=>{n.r(h),n.d(h,{IncomesModule:()=>Q});var c=n(9808),m=n(8555),E=n(7095),p=n(4065),x=n(4794),b=n(3851),g=n(8879),I=n(287),v=n(5595),y=n(4463),Z=n(4420),t=n(5e3),S=n(8794),d=n(9285),L=n(8933),M=n(4605),u=n(7322),A=n(7531),f=n(4107),F=n(508),N=n(42),O=n(4286),C=n(773);function U(i,a){1&i&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"noResults")," "))}function j(i,a){1&i&&(t.TgZ(0,"div",17),t._UZ(1,"mat-spinner"),t.qZA())}function J(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",18),t._uU(2),t.qZA(),t.TgZ(3,"div",18),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",19),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"div",18),t._uU(10),t.qZA(),t.TgZ(11,"div",18),t._uU(12),t.qZA(),t.TgZ(13,"div",18)(14,"app-button",20),t.NdJ("clickEvent",function(){const r=t.CHM(e).$implicit;return t.oxw().editIncome(r.oid)}),t.qZA()(),t.TgZ(15,"div",18)(16,"app-button",20),t.NdJ("clickEvent",function(){const r=t.CHM(e).$implicit;return t.oxw().deleteIncome(r)}),t.qZA()(),t.BQk()}if(2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.buyer.name," "),t.xp6(2),t.hij(" ",t.xi3(5,9,e.date,"dd.MM.yyyy")," "),t.xp6(3),t.hij(" ",t.Dn7(8,12,e.amount,"1.2-2","de")," "),t.xp6(3),t.hij(" ",e.bankStatementNumber," "),t.xp6(2),t.hij(" ",e.comment," "),t.xp6(2),t.Q6J("iconName","edit")("isTransparentMode",!0),t.xp6(2),t.Q6J("iconName","trash-2")("isTransparentMode",!0)}}const P=[{path:"",component:(()=>{class i{constructor(e,o,s,r,l,q,k,H){this.globalService=e,this.translateService=o,this.webService=s,this.sweetAlertService=r,this.listEntities=l,this.router=q,this.incomeCreateEditPopupService=k,this.authStoreService=H,this.subs=new y.L,this.isLoading=this.listEntities.isLoading,this.entities=this.listEntities.entities,this.totalEntitiesLength=this.listEntities.totalEntitiesLength,this.keyword="",this.searchFilter=new I.h}ngOnInit(){this.searchFilter.ordering="DESC",this.subs.sink=this.listEntities.setWebService(this.webService).setOrdering("DESC").requestFirstPage()}hasPrivilege(e){return this.authStoreService.isAllowed(e)}inputSearchHandler(e){this.searchFilter.criteriaQuick=e,this.listEntities.setFilter(this.searchFilter)}dateChanged(e,o){var s,r;if(null===(s=o.target)||void 0===s?void 0:s.value){const l={attribute:"from"===e?"from_date":"to_date",attributeValue:null===(r=o.target)||void 0===r?void 0:r.value,attributeType:"DATE",type:"from"===e?"GREATER_OR_EQUAL":"SMALLER_OR_EQUAL"};this.searchFilter.addBetweenAttribute(l)}else"from"===e?this.searchFilter.removeBetweenAttribute("from_date"):"to"===e&&this.searchFilter.removeBetweenAttribute("to_date");this.listEntities.setFilter(this.searchFilter)}outcomes(){this.router.navigate(["outcomes"])}createIncome(){this.incomeCreateEditPopupService.openDialog().subscribe(e=>{e&&this.listEntities.requestFirstPage()})}editIncome(e){this.incomeCreateEditPopupService.openDialog(e).subscribe(o=>{o&&this.listEntities.requestFirstPage()})}deleteIncome(e){this.subs.sink.$deleteIncome=this.sweetAlertService.getDataBackFromSweetAlert().subscribe(s=>{s&&s.confirmed&&(this.subs.sink=this.webService.deleteEntity([e]).subscribe(()=>{this.globalService.showBasicAlert(x.I.success,this.translateService.instant("incomeDeleted"),this.translateService.instant("incomeHaveBeenSuccessfullyDeleted")),this.listEntities.requestFirstPage()}))});const o={mode:"warning",icon:"alert-triangle",type:{name:b.N.submit,buttons:{submit:this.translateService.instant("delete"),cancel:this.translateService.instant("cancel")}},title:this.translateService.instant("deleteIncome"),message:this.translateService.instant("areYouSureYouWantToDeleteTheIncome")};this.sweetAlertService.openMeSweetAlert(o)}bottomReachedHandler(){this.listEntities.requestNextPage()}orderBy(e){this.searchFilter.ordering=e,this.listEntities.setFilter(this.searchFilter)}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(S.U),t.Y36(d.sK),t.Y36(Z.L),t.Y36(g.T),t.Y36(v.y),t.Y36(m.F0),t.Y36(p.x),t.Y36(L.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-incomes"]],features:[t._Bn([Z.L,g.T,v.y,p.x])],decls:59,vars:72,consts:[[1,"container"],[1,"search-bar"],[3,"placeholder","keyword","changeEvent"],[1,"min-with"],["type","date","matInput","",3,"change"],[3,"valueChange"],["value","ASC"],["value","DESC"],[3,"text","isTransparentMode","clickEvent"],[3,"iconName","text","disabled","clickEvent"],["scrollToBottom","",1,"incomes",3,"bottomReached"],[1,"grid-container","standard-grid-table"],[1,"grid-item","header","sticky"],["class","no-results",4,"ngIf"],["class","spinner",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"no-results"],[1,"spinner"],[1,"grid-item"],[1,"grid-item","align-right"],[3,"iconName","isTransparentMode","clickEvent"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-search-input",2),t.NdJ("changeEvent",function(r){return o.inputSearchHandler(r)}),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",3)(5,"mat-label"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"input",4),t.NdJ("change",function(r){return o.dateChanged("from",r)}),t.qZA()(),t.TgZ(9,"mat-form-field",3)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",4),t.NdJ("change",function(r){return o.dateChanged("to",r)}),t.qZA()(),t.TgZ(14,"mat-form-field",3)(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-select",5),t.NdJ("valueChange",function(r){return o.orderBy(r)}),t.TgZ(19,"mat-option",6),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"mat-option",7),t._uU(23),t.ALo(24,"translate"),t.qZA()()(),t.TgZ(25,"app-button",8),t.NdJ("clickEvent",function(){return o.outcomes()}),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"app-button",9),t.NdJ("clickEvent",function(){return o.createIncome()}),t.ALo(28,"translate"),t.qZA()(),t.TgZ(29,"div",10),t.NdJ("bottomReached",function(){return o.bottomReachedHandler()}),t.TgZ(30,"div",11)(31,"div",12),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"div",12),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"div",12),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"div",12),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"div",12),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"div",12),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",12),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.YNc(52,U,3,3,"div",13),t.ALo(53,"async"),t.ALo(54,"async"),t.YNc(55,j,2,0,"div",14),t.ALo(56,"async"),t.YNc(57,J,17,16,"ng-container",15),t.ALo(58,"async"),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("placeholder",t.lcZ(3,34,"searchFor"))("keyword",o.keyword),t.xp6(3),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(7,36,"fromDate")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(12,38,"toDate")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(17,40,"sortBy")," "),t.xp6(4),t.Oqu(t.lcZ(21,42,"asc")),t.xp6(3),t.Oqu(t.lcZ(24,44,"desc")),t.xp6(2),t.Q6J("text",t.lcZ(26,46,"outcomes"))("isTransparentMode",!0),t.xp6(2),t.Q6J("iconName","plus")("text",t.lcZ(28,48,"createIncome"))("disabled",!o.hasPrivilege("INCOME_CREATE")),t.xp6(5),t.hij(" ",t.lcZ(33,50,"buyerName")," "),t.xp6(3),t.hij(" ",t.lcZ(36,52,"date")," "),t.xp6(3),t.hij(" ",t.lcZ(39,54,"amount")," "),t.xp6(3),t.hij(" ",t.lcZ(42,56,"bankStatementNumber")," "),t.xp6(3),t.hij(" ",t.lcZ(45,58,"comment")," "),t.xp6(3),t.hij(" ",t.lcZ(48,60,"edit")," "),t.xp6(3),t.hij(" ",t.lcZ(51,62,"delete")," "),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(53,64,o.totalEntitiesLength)&&!t.lcZ(54,66,o.isLoading)),t.xp6(3),t.Q6J("ngIf",t.lcZ(56,68,o.isLoading)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(58,70,o.entities)))},directives:[M.J,u.KE,u.hX,A.Nt,f.gD,F.ey,N.r,O.C,c.O5,C.Ou,c.sg],pipes:[d.X$,c.Ov,c.uU,c.JJ],styles:["[_nghost-%COMP%]{display:flex;height:100%}.container[_ngcontent-%COMP%]{height:100%;min-width:500px}.container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.container[_ngcontent-%COMP%]   .incomes[_ngcontent-%COMP%]{height:calc(100% - 120px);overflow-y:auto;margin-top:20px}.container[_ngcontent-%COMP%]   .incomes[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto auto auto auto auto}.min-with[_ngcontent-%COMP%]{max-width:130px}"]}),i})(),canActivate:[E.Y],data:{permission:"INCOMES_VIEW"}}];let B=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(P)],m.Bz]}),i})();var _=n(2024),D=n(2763),R=n(6460),Y=n(8287),w=n(6225),T=n(3075);let Q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,B,d.aw,_.h,D.i,R.n,Y.n,w.y,C.Cq,u.lN,T.UX,T.u5,A.c,f.LD]]}),i})()}}]);