"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[789],{6789:(A,y,i)=>{i.d(y,{r:()=>F});var u=i(8966),_=i(2916),o=i(3075),m=i(13),C=i(4794),h=i(287),e=i(5595),E=i(4463),l=i(2134),I=i(4068),x=i(29),O=i(5986),t=i(5e3),P=i(8794),S=i(9285),M=i(8933),c=i(9808),v=i(7322),r=i(7531),d=i(4107),g=i(6759),b=i(508),T=i(3586),L=i(42);function D(s,f){if(1&s&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&s){const n=t.oxw(3);t.Q6J("value",n.selectedCountry),t.xp6(1),t.Oqu(n.selectedCountry.description)}}function N(s,f){if(1&s&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&s){const n=t.oxw().$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.description," ")}}function w(s,f){if(1&s&&(t.ynx(0),t.YNc(1,N,2,2,"mat-option",13),t.BQk()),2&s){const n=f.$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",(null==a.selectedCountry?null:a.selectedCountry.oid)!==n.oid)}}function G(s,f){if(1&s){const n=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-select",11),t.NdJ("infiniteScroll",function(){return t.CHM(n),t.oxw(2).bottomReachedHandler()})("selectionChange",function(p){return t.CHM(n),t.oxw(2).selectCountry(p)}),t.TgZ(5,"mat-option"),t._UZ(6,"ngx-mat-select-search",12),t.ALo(7,"translate"),t.ALo(8,"translate"),t.ALo(9,"async"),t.qZA(),t.YNc(10,D,2,2,"mat-option",13),t.YNc(11,w,2,1,"ng-container",14),t.ALo(12,"async"),t.qZA()()}if(2&s){const n=t.oxw(2);t.xp6(1),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(3,15,"country")," "),t.xp6(2),t.Q6J("compareWith",n.compareFn),t.xp6(2),t.s9C("placeholderLabel",t.lcZ(7,17,"searchFor")),t.s9C("noEntriesFoundLabel",t.lcZ(8,19,"noResults")),t.Q6J("formControl",n.searchControl)("hideClearSearchButton",!0)("clearSearchInput",!1)("searching",t.lcZ(9,21,n.isLoading)||!1)("disableScrollToActiveOnOptionsChanged",!0),t.xp6(4),t.Q6J("ngIf",n.selectedCountry),t.xp6(1),t.Q6J("ngForOf",t.lcZ(12,23,n.countries))}}function J(s,f){if(1&s){const n=t.EpF();t.TgZ(0,"form",3)(1,"mat-form-field")(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.YNc(11,G,13,25,"mat-form-field",6),t.TgZ(12,"app-button",7),t.NdJ("clickEvent",function(){return t.CHM(n),t.oxw().createCountry()}),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",8)(15,"app-button",9),t.NdJ("clickEvent",function(){return t.CHM(n),t.oxw().cancel()}),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"app-button",10),t.NdJ("clickEvent",function(){return t.CHM(n),t.oxw().handleSubmitButton()}),t.ALo(18,"translate"),t.qZA()()()}if(2&s){const n=t.oxw();t.Q6J("formGroup",n.formGroup),t.xp6(2),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(4,18,"zipCode")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(9,20,"name")," "),t.xp6(3),t.Q6J("ngIf",n.countryControl),t.xp6(1),t.Q6J("text",t.lcZ(13,22,"createCountry"))("color","secondary")("disabled",!n.hasPrivilege("COUNTRY_CREATE")),t.xp6(3),t.Q6J("text",t.lcZ(16,24,"cancel")),t.xp6(2),t.Q6J("text",t.lcZ(18,26,"save"))("disabled",n.isEdit&&!n.formGroup.dirty||n.formGroup.invalid)}}let U=(()=>{class s{constructor(n,a,p,Z,Y,B,R,W,Q){this.dialogRef=n,this.data=a,this.globalService=p,this.countryCreateEditPopupService=Z,this.webService=Y,this.countryWebService=B,this.translateService=R,this.listEntities=W,this.authStoreService=Q,this.subs=new E.L,this.isEdit=!1,this.countries=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.compareFn=l.nt,this.searchControl=new o.NI,this.debounceTime=500}get countryControl(){return this.formGroup.get("country")}ngOnInit(){this.isEdit=!!this.data.oid,this.cityOID=this.data.oid,this.subs.sink=this.listEntities.setWebService(this.countryWebService).requestFirstPage(),this.isEdit?this.initializeEdit():this.initializeCreate(),this.inputSearchControlSubscription=this.searchControl.valueChanges.pipe((0,m.b)(this.debounceTime)).subscribe(()=>{this.searchHandler(this.searchControl.value)})}hasPrivilege(n){return this.authStoreService.isAllowed(n)}initializeCreate(){this.formGroup=new o.cw({zipCode:new o.NI("",[o.kI.required]),name:new o.NI("",[o.kI.required]),country:new o.NI("",[o.kI.required])})}initializeEdit(){this.webService.getEntityByOid(this.cityOID).subscribe(n=>{n&&(this.selectedCountry=n.country,this.formGroup=new o.cw({zipCode:new o.NI(n.zipCode,[o.kI.required]),name:new o.NI(n.name,[o.kI.required]),country:new o.NI(this.selectedCountry,[o.kI.required])}))})}selectCountry(n){n&&n.value&&(this.selectedCountry=n.value)}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){const n=this.formGroup.value;this.isEdit?this.webService.updateEntity(this.cityOID,n).subscribe(a=>{a&&(this.globalService.showBasicAlert(C.I.success,this.translateService.instant("successfully"),this.translateService.instant("cityIsSuccessfullyUpdated")),this.dialogRef.close(a))}):this.webService.createEntity(n).subscribe(a=>{a&&(this.globalService.showBasicAlert(C.I.success,this.translateService.instant("successfully"),this.translateService.instant("newCityIsSuccessfullyCreated")),this.dialogRef.close(a))})}createCountry(){this.countryCreateEditPopupService.openDialog().subscribe(n=>{n&&this.listEntities.requestFirstPage()})}bottomReachedHandler(){this.listEntities.requestNextPage()}searchHandler(n){let a=new h.h;a.criteriaQuick=n,this.listEntities.setFilter(a)}ngOnDestroy(){this.inputSearchControlSubscription.unsubscribe(),this.subs.unsubscribe()}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(u.so),t.Y36(u.WI),t.Y36(P.U),t.Y36(O.b),t.Y36(I.D),t.Y36(x.N),t.Y36(S.sK),t.Y36(e.y),t.Y36(M.g))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-city-create-edit"]],features:[t._Bn([I.D,x.N,O.b,e.y])],decls:6,vars:4,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],[1,"form",3,"formGroup"],["matInput","","formControlName","zipCode"],["matInput","","formControlName","name"],[4,"ngIf"],[1,"create-button",3,"text","color","disabled","clickEvent"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"],["formControlName","country","msInfiniteScroll","",3,"compareWith","infiniteScroll","selectionChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel","hideClearSearchButton","clearSearchInput","searching","disableScrollToActiveOnOptionsChanged"],[3,"value",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,J,19,28,"form",2),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,a.isEdit?"editCity":"createCity")," "),t.xp6(2),t.Q6J("ngIf",a.formGroup))},directives:[c.O5,o._Y,o.JL,o.sg,v.KE,v.hX,r.Nt,o.Fj,o.JJ,o.u,d.gD,g.s,b.ey,T.nu,o.oH,c.sg,L.r],pipes:[S.X$,c.Ov],styles:[".container[_ngcontent-%COMP%]{height:100%;width:100%}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px;align-items:center}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),s})(),F=(()=>{class s{constructor(n){this._matDialog=n}openDialog(n=""){return new _.y(a=>{const p=new u.vA;p.data={oid:n},this._matDialog.open(U,p).afterClosed().subscribe(Z=>{a.next(Z),a.complete()},()=>a.error())})}}return s.\u0275fac=function(n){return new(n||s)(t.LFG(u.uw))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})()},5986:(A,y,i)=>{i.d(y,{b:()=>M});var u=i(8966),_=i(2916),o=i(3075),m=i(4794),C=i(4463),h=i(29),e=i(5e3),E=i(8794),l=i(9285),I=i(9808),x=i(7322),O=i(7531),t=i(42);function P(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"form",3)(1,"mat-form-field")(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",4),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.TgZ(11,"div",6)(12,"app-button",7),e.NdJ("clickEvent",function(){return e.CHM(r),e.oxw().cancel()}),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"app-button",8),e.NdJ("clickEvent",function(){return e.CHM(r),e.oxw().handleSubmitButton()}),e.ALo(15,"translate"),e.qZA()()()}if(2&c){const r=e.oxw();e.Q6J("formGroup",r.formGroup),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(4,14,"description")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(9,16,"identCode")," "),e.xp6(4),e.Q6J("text",e.lcZ(13,18,"cancel")),e.xp6(2),e.Q6J("text",e.lcZ(15,20,"save"))("disabled",r.isEdit&&!r.formGroup.dirty||r.formGroup.invalid)}}let S=(()=>{class c{constructor(r,d,g,b,T){this.dialogRef=r,this.data=d,this.globalService=g,this.webService=b,this.translateService=T,this.subs=new C.L,this.isEdit=!1}get descriptionControl(){return this.formGroup.get("description")}get identificationCodeControl(){return this.formGroup.get("identificationCode")}ngOnInit(){this.isEdit=!!this.data.oid,this.countryOID=this.data.oid,this.isEdit?this.initializeEdit():this.initializeCreate()}initializeCreate(){this.formGroup=new o.cw({description:new o.NI("",[o.kI.required]),identificationCode:new o.NI("",[o.kI.required])})}initializeEdit(){this.webService.getEntityByOid(this.countryOID).subscribe(r=>{r&&(this.formGroup=new o.cw({description:new o.NI(r.description,[o.kI.required]),identificationCode:new o.NI(r.identificationCode,[o.kI.required])}))})}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){this.isEdit?this.webService.updateEntity(this.countryOID,this.formGroup.value).subscribe(r=>{r&&(this.globalService.showBasicAlert(m.I.success,this.translateService.instant("successfully"),this.translateService.instant("countryIsSuccessfullyUpdated")),this.dialogRef.close(r))}):this.webService.createEntity(this.formGroup.value).subscribe(r=>{r&&(this.globalService.showBasicAlert(m.I.success,this.translateService.instant("successfully"),this.translateService.instant("newCountryIsSuccessfullyCreated")),this.dialogRef.close(r))})}ngOnDestroy(){this.subs.unsubscribe()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(u.so),e.Y36(u.WI),e.Y36(E.U),e.Y36(h.N),e.Y36(l.sK))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-country-create-edit"]],features:[e._Bn([h.N])],decls:6,vars:4,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],[1,"form",3,"formGroup"],["matInput","","formControlName","description"],["matInput","","formControlName","identificationCode"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"]],template:function(r,d){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,P,16,22,"form",2),e.qZA()),2&r&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,d.isEdit?"editCountry":"createCountry")," "),e.xp6(2),e.Q6J("ngIf",d.formGroup))},directives:[I.O5,o._Y,o.JL,o.sg,x.KE,x.hX,O.Nt,o.Fj,o.JJ,o.u,t.r],pipes:[l.X$],styles:[".container[_ngcontent-%COMP%]{height:100%;width:100%}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:column;margin-top:20px;display:flex}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),c})(),M=(()=>{class c{constructor(r){this._matDialog=r}openDialog(r=""){return new _.y(d=>{const g=new u.vA;g.data={oid:r},this._matDialog.open(S,g).afterClosed().subscribe(b=>{d.next(b),d.complete()},()=>d.error())})}}return c.\u0275fac=function(r){return new(r||c)(e.LFG(u.uw))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac}),c})()},4068:(A,y,i)=>{i.d(y,{D:()=>h});var u=i(4292),_=i(136),o=i(8324),m=i(5e3),C=i(3164);let h=(()=>{class e extends u.h{constructor(l){super(l,o.v,_.EF),this.baseWebService=l}}return e.\u0275fac=function(l){return new(l||e)(m.LFG(C.I))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac}),e})()},29:(A,y,i)=>{i.d(y,{N:()=>h});var u=i(4292),_=i(136),o=i(9360),m=i(5e3),C=i(3164);let h=(()=>{class e extends u.h{constructor(l){super(l,o.K,_.HT),this.baseWebService=l}}return e.\u0275fac=function(l){return new(l||e)(m.LFG(C.I))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac}),e})()}}]);