"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[869],{869:(Q,M,c)=>{c.r(M),c.d(M,{WorkOrderCreateEditModule:()=>ze});var f=c(9808),x=c(4655),C=c(7095),a=c(3679),d=c(1217),p=c(4794),_=c(136),T=c(287),k=c(5595),z=c(4463),b=c(2134),J=c(7379),L=c(2050),D=c(4395),$=c(9761),V=c(8002),X=c(4292),ee=c(8228);class te extends ee.g{constructor(){super(...arguments),this.url="",this.description=""}}var e=c(7716),ne=c(7515);let B=(()=>{class o extends X.h{constructor(t){super(t,te,_.IF),this.baseWebService=t}upload(t){return this.baseWebService.postRequest(_.Mr+"/"+this.domainName,t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(ne.I))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var re=c(3851),oe=c(8794),E=c(4333),ie=c(7347),se=c(5153),ae=c(8933),I=c(7322),H=c(3722),ce=c(3336),le=c(42),U=c(4107),G=c(6591),j=c(7238),ue=c(1862),Y=c(7269),R=c(7446),P=c(1079);const de=["fileCtrl"];function me(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("value",t.selectedBuyer),e.xp6(1),e.Oqu(t.selectedBuyer.name)}}function _e(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function pe(o,l){if(1&o&&(e.ynx(0),e.YNc(1,_e,2,2,"mat-option",11),e.BQk()),2&o){const t=l.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==n.selectedBuyer?null:n.selectedBuyer.oid)!==t.oid)}}const A=function(){return{standalone:!0}};function ge(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-checkbox",33),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).allowChangeBuyer=r}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("ngModel",t.allowChangeBuyer)("ngModelOptions",e.DdM(6,A)),e.xp6(1),e.Oqu(e.lcZ(2,4,"changeBuyer"))}}function fe(o,l){if(1&o&&(e.TgZ(0,"mat-option"),e._UZ(1,"ngx-mat-select-search",10),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"async"),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.s9C("placeholderLabel",e.lcZ(2,7,"searchFor")),e.s9C("noEntriesFoundLabel",e.lcZ(3,9,"noResults")),e.Q6J("formControl",t.searchControlOnChange)("hideClearSearchButton",!0)("clearSearchInput",!0)("searching",e.lcZ(4,11,t.isLoadingOnChange)||!1)("disableScrollToActiveOnOptionsChanged",!0)}}function he(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.Q6J("value",t.selectedBuyerOnChange),e.xp6(1),e.Oqu(t.selectedBuyerOnChange.name)}}function Ce(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ve(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Ce,2,2,"mat-option",11),e.BQk()),2&o){const t=l.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(null==n.selectedBuyerOnChange?null:n.selectedBuyerOnChange.oid)!==t.oid)}}function Oe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field"),e.TgZ(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-select",34),e.NdJ("infiniteScroll",function(){return e.CHM(t),e.oxw(2).bottomReachedHandlerBuyersOnChange()})("selectionChange",function(r){return e.CHM(t),e.oxw(2).selectBuyerOnChange(r)}),e.YNc(5,fe,5,13,"mat-option",14),e.YNc(6,he,2,2,"mat-option",11),e.YNc(7,ve,2,1,"ng-container",12),e.ALo(8,"async"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(3,9,"buyer")," "),e.xp6(2),e.Q6J("compareWith",t.compareFn),e.xp6(1),e.Q6J("ngIf",t.isEdit),e.xp6(1),e.Q6J("ngIf",t.selectedBuyerOnChange),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,11,t.buyersEntitiesOnChange))}}function xe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-button",35),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw(2).createBuyer()}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("iconName","plus")("disabled",!t.hasPrivilege("BUYER_CREATE"))}}function ke(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function be(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.displayName)," ")}}function Me(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-checkbox",54),e.NdJ("ngModelChange",function(r){e.CHM(t);const i=e.oxw().index;return e.oxw(2).sumForGrindingsItems[i].isCalculated=r})("change",function(){e.CHM(t);const r=e.oxw().index,i=e.oxw(2);return i.calculateGrindingLengthForItem(r),i.calculateWorkOrderSumOfGrinding()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw().index,n=e.oxw(2);let r;e.Q6J("color","primary")("ngModel",n.sumForGrindingsItems[t].isCalculated)("ngModelOptions",e.DdM(7,A))("disabled","M2"!==(null==(r=n.getUOM(t))?null:r.value)),e.xp6(1),e.Oqu(e.lcZ(2,5,"calcLength"))}}function Ze(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",55),e.TgZ(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",56),e.NdJ("ngModelChange",function(r){e.CHM(t);const i=e.oxw().index;return e.oxw(2).sumForGrindingsItems[i].value=r})("change",function(){return e.CHM(t),e.oxw(3).calculateWorkOrderSumOfGrinding()}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().index,n=e.oxw(2);e.xp6(1),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(3,7,"length")," "),e.xp6(2),e.Q6J("ngModel",n.sumForGrindingsItems[t].value)("ngModelOptions",e.DdM(9,A))}}function ye(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",36),e.TgZ(1,"div",37),e.TgZ(2,"mat-form-field",38),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"input",39,40),e.NdJ("keydown.enter",function(){return e.CHM(t),e.MAs(7).closePanel()})("keypress",function(r){const s=e.CHM(t).index,u=e.oxw(2);return u.onKeypress(r,"description",s),u.calculateGrindingLengthForItem(s),u.switchOnCalcBasedOnDescription(s)})("change",function(){const i=e.CHM(t).index;return e.oxw(2).switchOnCalcBasedOnDescription(i)}),e.qZA(),e.TgZ(8,"mat-autocomplete",null,41),e.YNc(10,ke,2,2,"mat-option",42),e.ALo(11,"async"),e.qZA(),e.qZA(),e.TgZ(12,"mat-form-field",43),e.TgZ(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-select",44),e.NdJ("focusout",function(){const i=e.CHM(t).index,s=e.oxw(2);return s.calculateWorkOrderSum(i),s.calculateGrindingLengthForItem(i)})("openedChange",function(r){const s=e.CHM(t).index;return e.oxw(2).openedToggleOnUomSelect(r,s)}),e.YNc(17,be,3,4,"mat-option",42),e.qZA(),e.qZA(),e.TgZ(18,"mat-form-field",43),e.TgZ(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"input",45),e.NdJ("keypress",function(r){const s=e.CHM(t).index;return e.oxw(2).onKeypress(r,"dimension1",s)})("change",function(){const i=e.CHM(t).index,s=e.oxw(2);return s.calculateWorkOrderSum(i),s.calculateGrindingLengthForItem(i)})("focusout",function(){const i=e.CHM(t).index;return e.oxw(2).calculateWorkOrderSum(i)}),e.qZA(),e.qZA(),e.TgZ(23,"mat-form-field",43),e.TgZ(24,"mat-label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"input",46),e.NdJ("keypress",function(r){const s=e.CHM(t).index;return e.oxw(2).onKeypress(r,"dimension2",s)})("change",function(){const i=e.CHM(t).index,s=e.oxw(2);return s.calculateWorkOrderSum(i),s.calculateGrindingLengthForItem(i)})("focusout",function(){const i=e.CHM(t).index;return e.oxw(2).calculateWorkOrderSum(i)}),e.qZA(),e.qZA(),e.TgZ(28,"mat-form-field",43),e.TgZ(29,"mat-label"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"input",47),e.NdJ("keypress",function(r){const s=e.CHM(t).index;return e.oxw(2).onKeypress(r,"quantity",s)})("change",function(){const i=e.CHM(t).index,s=e.oxw(2);return s.calculateWorkOrderSum(i),s.calculateGrindingLengthForItem(i)})("focusout",function(){const i=e.CHM(t).index;return e.oxw(2).calculateWorkOrderSum(i)}),e.qZA(),e.qZA(),e.TgZ(33,"mat-form-field",43),e.TgZ(34,"mat-label"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"input",48),e.NdJ("keypress",function(r){const s=e.CHM(t).index;return e.oxw(2).onKeypress(r,"sumQuantity",s)})("change",function(){return e.CHM(t),e.oxw(2).calculateSum()}),e.qZA(),e.qZA(),e.TgZ(38,"mat-form-field"),e.TgZ(39,"mat-label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"input",49),e.NdJ("keypress",function(r){const s=e.CHM(t).index;return e.oxw(2).onKeypress(r,"note",s)}),e.qZA(),e.qZA(),e.TgZ(43,"app-button",50),e.NdJ("clickEvent",function(){const i=e.CHM(t).index;return e.oxw(2).removeItem(i)}),e.qZA(),e.TgZ(44,"mat-checkbox",51),e.NdJ("change",function(r){const s=e.CHM(t).index;return e.oxw(2).calculateWorkOrderSum(s,r.checked)}),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.YNc(47,Me,3,8,"mat-checkbox",52),e.YNc(48,Ze,5,10,"mat-form-field",53),e.qZA(),e.qZA()}if(2&o){const t=l.index,n=e.MAs(9),r=e.oxw(2);let i;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(5,47,"description")," "),e.xp6(2),e.Q6J("matAutocomplete",n)("matTooltip",null==(i=r.getDescription(t))?null:i.value),e.xp6(4),e.Q6J("ngForOf",e.lcZ(11,49,r.getFilteredOptions(t))),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(15,51,"uom")," "),e.xp6(3),e.Q6J("ngForOf",r.uomOptions),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(21,53,"widthMM")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(26,55,"heightMM")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(31,57,"quantity")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(36,59,"sum")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(41,61,"note")," "),e.xp6(3),e.Q6J("iconName","minus")("isTransparentMode",!0),e.xp6(1),e.Q6J("color","primary")("checked",!0),e.xp6(1),e.Oqu(e.lcZ(46,63,"consMeas")),e.xp6(2),e.Q6J("ngIf",!r.sumForGrindingsItems[t].isCalculated),e.xp6(1),e.Q6J("ngIf",r.sumForGrindingsItems[t].isCalculated)}}function we(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-button",57),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw(2).addSumOfGrindingItems()}),e.ALo(1,"translate"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("iconName","plus")("text",e.lcZ(1,4,"addGrinding")+" ("+t.sumOfGrinding+")")("isTransparentMode",!0)("disabled",!t.isBuyerSelected)}}function Te(o,l){1&o&&(e.TgZ(0,"div",61),e.TgZ(1,"div",62),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",63),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sumMeter2")),e.xp6(3),e.Oqu(e.lcZ(6,4,"quantity")))}function Ae(o,l){if(1&o&&(e.TgZ(0,"div",64),e.TgZ(1,"div",62),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"div",63),e._uU(5),e.ALo(6,"number"),e.qZA(),e.qZA()),2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(e.Dn7(3,2,t.sumMeter2,"1.2-2","de")),e.xp6(3),e.hij(" ",e.Dn7(6,6,t.sumMeter2Quantity,"1.2-2","de")," ")}}function Ee(o,l){1&o&&(e.TgZ(0,"div",61),e.TgZ(1,"div",62),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",63),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sumMeter")),e.xp6(3),e.Oqu(e.lcZ(6,4,"quantity")))}function Ie(o,l){if(1&o&&(e.TgZ(0,"div",64),e.TgZ(1,"div",62),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"div",63),e._uU(5),e.ALo(6,"number"),e.qZA(),e.qZA()),2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(e.Dn7(3,2,t.sumMeter,"1.2-2","de")),e.xp6(3),e.hij(" ",e.Dn7(6,6,t.sumMeterQuantity,"1.2-2","de")," ")}}function Pe(o,l){1&o&&(e.TgZ(0,"div",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sumPieces")," "))}function Ne(o,l){if(1&o&&(e.TgZ(0,"div",64),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.Dn7(2,1,t.sumPieces,"1.2-2","de")," ")}}function qe(o,l){1&o&&(e.TgZ(0,"div",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sumHours")," "))}function We(o,l){if(1&o&&(e.TgZ(0,"div",64),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.Dn7(2,1,t.sumHours,"1.2-2","de")," ")}}function Se(o,l){if(1&o&&(e.TgZ(0,"div",58),e.YNc(1,Te,7,6,"div",59),e.YNc(2,Ae,7,10,"div",60),e.YNc(3,Ee,7,6,"div",59),e.YNc(4,Ie,7,10,"div",60),e.YNc(5,Pe,3,3,"div",59),e.YNc(6,Ne,3,5,"div",60),e.YNc(7,qe,3,3,"div",59),e.YNc(8,We,3,5,"div",60),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.sumMeter2>0),e.xp6(1),e.Q6J("ngIf",t.sumMeter2>0),e.xp6(1),e.Q6J("ngIf",t.sumMeter>0),e.xp6(1),e.Q6J("ngIf",t.sumMeter>0),e.xp6(1),e.Q6J("ngIf",t.sumPieces>0),e.xp6(1),e.Q6J("ngIf",t.sumPieces>0),e.xp6(1),e.Q6J("ngIf",t.sumHours>0),e.xp6(1),e.Q6J("ngIf",t.sumHours>0)}}const Fe=function(o){return{"background-image":o}};function Qe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",65),e.TgZ(1,"div",66),e.TgZ(2,"app-button",67),e.NdJ("clickEvent",function(){const i=e.CHM(t).index;return e.oxw(2).uploadFile(i)}),e.qZA(),e.TgZ(3,"input",68,69),e.NdJ("change",function(r){const s=e.CHM(t).index;return e.oxw(2).onFileSelected(r,s)}),e.qZA(),e.TgZ(5,"mat-form-field"),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"input",70),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.description=r}),e.qZA(),e.qZA(),e.TgZ(10,"app-button",67),e.NdJ("clickEvent",function(){const i=e.CHM(t).index;return e.oxw(2).removeImage(i)}),e.qZA(),e.qZA(),e._UZ(11,"div",71),e.qZA()}if(2&o){const t=l.$implicit;e.xp6(2),e.Q6J("iconName","upload")("isTransparentMode",!0),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(8,12,"description")," "),e.xp6(2),e.Q6J("ngModel",t.description)("ngModelOptions",e.DdM(14,A)),e.xp6(1),e.Q6J("iconName","minus")("isTransparentMode",!0),e.xp6(1),e.Q6J("ngStyle",e.VKq(15,Fe,"url("+t.fullUrl+")"))}}function Je(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"form",5),e.TgZ(1,"div",6),e.TgZ(2,"mat-form-field"),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"input",7),e.NdJ("keypress",function(r){return e.CHM(t),e.oxw().onKeypress(r,"number")}),e.qZA(),e.qZA(),e.TgZ(7,"app-button",8),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().setWorkOrderNumber()}),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"mat-form-field"),e.TgZ(11,"mat-label"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"mat-select",9),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw().buyerChanged()})("infiniteScroll",function(){return e.CHM(t),e.oxw().bottomReachedHandlerBuyers()})("selectionChange",function(r){return e.CHM(t),e.oxw().selectBuyer(r)}),e.TgZ(15,"mat-option"),e._UZ(16,"ngx-mat-select-search",10),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"async"),e.qZA(),e.YNc(20,me,2,2,"mat-option",11),e.YNc(21,pe,2,1,"ng-container",12),e.ALo(22,"async"),e.qZA(),e.qZA(),e.YNc(23,ge,3,7,"mat-checkbox",13),e.YNc(24,Oe,9,13,"mat-form-field",14),e.YNc(25,xe,1,2,"app-button",15),e.qZA(),e.TgZ(26,"div",6),e.TgZ(27,"mat-form-field"),e.TgZ(28,"mat-label"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"input",16),e.NdJ("keypress",function(r){return e.CHM(t),e.oxw().onKeypress(r,"forPerson")}),e.qZA(),e.qZA(),e.TgZ(32,"mat-form-field"),e.TgZ(33,"mat-label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"input",17),e.NdJ("keypress",function(r){return e.CHM(t),e.oxw().onKeypress(r,"description")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",6),e.TgZ(38,"mat-form-field"),e.TgZ(39,"mat-label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"input",18),e.NdJ("keypress",function(r){return e.CHM(t),e.oxw().onKeypress(r,"dateOfCreate")}),e.qZA(),e.qZA(),e.TgZ(43,"mat-form-field"),e.TgZ(44,"mat-label"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"input",19),e.NdJ("keypress",function(r){return e.CHM(t),e.oxw().onKeypress(r,"placeOfIssue")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",20),e.YNc(49,ye,49,65,"div",21),e.qZA(),e.TgZ(50,"div",22),e.TgZ(51,"div",23),e.TgZ(52,"app-button",24),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().addNewItem()}),e.ALo(53,"translate"),e.qZA(),e.YNc(54,we,2,6,"app-button",25),e.qZA(),e.YNc(55,Se,9,8,"div",26),e.qZA(),e.TgZ(56,"div",6),e.TgZ(57,"mat-form-field",27),e.TgZ(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"textarea",28),e.NdJ("keypress",function(r){return e.CHM(t),e.oxw().onKeypress(r,"note")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",29),e.YNc(63,Qe,12,17,"div",30),e.qZA(),e.TgZ(64,"app-button",31),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().addNewImage()}),e.ALo(65,"translate"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.formGroup),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(5,61,"numberOfWorkOrder")," "),e.xp6(3),e.Q6J("isTransparentMode",!0)("text",e.lcZ(8,63,"createNumber")),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(13,65,"buyer")," "),e.xp6(2),e.Q6J("compareWith",t.compareFn)("disabled",t.isEdit)("matTooltip",(null==t.selectedBuyer?null:t.selectedBuyer.name)||""),e.xp6(2),e.s9C("placeholderLabel",e.lcZ(17,67,"searchFor")),e.s9C("noEntriesFoundLabel",e.lcZ(18,69,"noResults")),e.Q6J("formControl",t.searchControl)("hideClearSearchButton",!0)("clearSearchInput",!0)("searching",e.lcZ(19,71,t.isLoading)||!1)("disableScrollToActiveOnOptionsChanged",!0),e.xp6(4),e.Q6J("ngIf",t.selectedBuyer),e.xp6(1),e.Q6J("ngForOf",e.lcZ(22,73,t.buyersEntities)),e.xp6(2),e.Q6J("ngIf",t.isEdit),e.xp6(1),e.Q6J("ngIf",t.isEdit&&t.allowChangeBuyer),e.xp6(1),e.Q6J("ngIf",!t.isEdit),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(30,75,"forNeedsOf")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(35,77,"description")," "),e.xp6(5),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(41,79,"dateOfCreate")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(46,81,"placeOfIssue")," "),e.xp6(4),e.Q6J("ngForOf",t.workOrderItemsFormArr.controls),e.xp6(3),e.Q6J("iconName","plus")("text",e.lcZ(53,83,"addNewItem"))("disabled",!t.isBuyerSelected),e.xp6(2),e.Q6J("ngIf",t.sumOfGrinding>0),e.xp6(1),e.Q6J("ngIf",t.sumMeter2>0||t.sumMeter>0||t.sumPieces>0||t.sumHours>0),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(60,85,"note")," "),e.xp6(4),e.Q6J("ngForOf",t.workOrderImages),e.xp6(1),e.Q6J("text",e.lcZ(65,87,"addImage"))}}function Le(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-button",74),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw(2).handleSubmitButton(!0)}),e.ALo(1,"translate"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("text",e.lcZ(1,2,"saveAndCreateInvoice"))("disabled",!t.formGroup.dirty||t.formGroup.invalid)}}function De(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",72),e.TgZ(1,"div",1),e.TgZ(2,"app-button",73),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().cancel()}),e.ALo(3,"translate"),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"app-button",74),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().handleSubmitButton()}),e.ALo(6,"translate"),e.qZA(),e.YNc(7,Le,2,4,"app-button",75),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("text",e.lcZ(3,4,"cancel")),e.xp6(3),e.Q6J("text",e.lcZ(6,6,"save"))("disabled",!t.formGroup.dirty||t.formGroup.invalid),e.xp6(2),e.Q6J("ngIf",!t.isEdit)}}const Be=[{path:"",component:(()=>{class o{constructor(t,n,r,i,s,u,g,m,h,v,O,Z,y,w){this.router=t,this.route=n,this.globalService=r,this.listEntities=i,this.listEntitiesOnChange=s,this.buyerCreateEditPopupService=u,this.buyerWebService=g,this.translateService=m,this.settingsStoreService=h,this.webService=v,this.imageWebService=O,this.el=Z,this.sweetAlertService=y,this.authStoreService=w,this.subs=new z.L,this.workOrderOID=null,this.isEdit=!1,this.uomOptions=_.pM,this.workOrderItemsOptions=[],this.filteredOptions=[],this.buyersEntities=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.searchControl=new a.NI,this.compareFn=b.nt,this.sumMeter2=0,this.sumMeter2Quantity=0,this.sumMeter=0,this.sumMeterQuantity=0,this.sumPieces=0,this.sumHours=0,this.workOrderImages=[],this.sumOfGrinding=0,this.sumForGrindingsItems=[],this.allowChangeBuyer=!1,this.buyersEntitiesOnChange=this.listEntities.entities,this.isLoadingOnChange=this.listEntities.isLoading,this.searchControlOnChange=new a.NI,this.debounceTime=500}getDescription(t){return this.workOrderItemsFormArr.controls[t].get("description")}getUOM(t){return this.workOrderItemsFormArr.controls[t].get("uom")}getDimension1(t){return this.workOrderItemsFormArr.controls[t].get("dimension1")}getDimension2(t){return this.workOrderItemsFormArr.controls[t].get("dimension2")}getQuantity(t){return this.workOrderItemsFormArr.controls[t].get("quantity")}getSumQuantity(t){return this.workOrderItemsFormArr.controls[t].get("sumQuantity")}ngOnInit(){this.workOrderOID=this.route.snapshot.paramMap.get("workOrderOID"),this.subs.sink=this.webService.getAllWorkOrderItemDescriptions().subscribe(t=>{this.workOrderItemsOptions=t}),this.subs.sink=this.listEntities.setWebService(this.buyerWebService).requestFirstPage(),this.subs.sink=this.settingsStoreService.dataLoaded$.subscribe(t=>{t&&(this.settings=this.settingsStoreService.getSettings(),this.isEdit=!!this.workOrderOID,this.isEdit&&this.workOrderOID?this.webService.getEntityByOid(this.workOrderOID).subscribe(n=>{this.workOrder=n,this.initializeEdit()}):this.initializeCreate(),this.isBuyerSelected=this.isEdit||!1)}),this.inputSearchControlSubscription=this.searchControl.valueChanges.pipe((0,D.b)(this.debounceTime)).subscribe(()=>{this.searchHandler(this.searchControl.value)}),this.inputSearchControlOnChangeSubscription=this.searchControlOnChange.valueChanges.pipe((0,D.b)(this.debounceTime)).subscribe(()=>{this.searchHandlerOnChange(this.searchControlOnChange.value)})}hasPrivilege(t){return this.authStoreService.isAllowed(t)}initializeCreate(){var t;this.formGroup=new a.cw({number:new a.NI(0,[a.kI.required]),buyer:new a.NI("",[a.kI.required]),dateOfCreate:new a.NI((new Date).toISOString().substring(0,10),[a.kI.required]),placeOfIssue:new a.NI((null===(t=this.settings)||void 0===t?void 0:t.workOrderPlaceOfIssue)||"",[a.kI.required]),forPerson:new a.NI(""),description:new a.NI(""),note:new a.NI(""),workOrderItems:new a.Oe([])}),this.setWorkOrderNumber()}initializeEdit(){this.selectedBuyer=this.workOrder.buyer,this.formGroup=new a.cw({number:new a.NI(this.workOrder.number,[a.kI.required]),buyer:new a.NI(this.selectedBuyer,[a.kI.required]),dateOfCreate:new a.NI(this.workOrder.dateOfCreate,[a.kI.required]),placeOfIssue:new a.NI(this.workOrder.placeOfIssue,[a.kI.required]),forPerson:new a.NI(this.workOrder.forPerson,[]),description:new a.NI(this.workOrder.description,[]),note:new a.NI(this.workOrder.note,[]),workOrderItems:new a.Oe([])}),this.workOrder.workOrderItems.forEach((t,n)=>this.addNewItem(t)),this.workOrder.images.forEach((t,n)=>this.addNewImage(t))}get workOrderItemsFormArr(){return this.formGroup.get("workOrderItems")}addNewItem(t){this.workOrderItemsFormArr.push(new a.cw({oid:new a.NI((null==t?void 0:t.oid)||""),description:new a.NI((null==t?void 0:t.description)||"",[a.kI.required]),uom:new a.NI((null==t?void 0:t.uom)||this.uomOptions[0].value,[a.kI.required]),dimension1:new a.NI((null==t?void 0:t.dimension1)||0),dimension2:new a.NI((null==t?void 0:t.dimension2)||0),quantity:new a.NI((null==t?void 0:t.quantity)||0),sumQuantity:new a.NI((null==t?void 0:t.sumQuantity)||0,[a.kI.required]),note:new a.NI((null==t?void 0:t.note)||"")})),setTimeout(()=>{var n;const r=null===(n=this.getDescription(this.workOrderItemsFormArr.length-1))||void 0===n?void 0:n.valueChanges.pipe((0,$.O)(""),(0,V.U)(i=>this._filter(i||"")));this.filteredOptions.push(r)}),this.calculateSum(),this.sumForGrindingsItems.push({isCalculated:"M2"===(null==t?void 0:t.uom)&&(null==t?void 0:t.description.includes("kp obrad"))||!1,value:0})}removeItem(t){this.workOrderItemsFormArr.removeAt(t),this.calculateSum(),this.formGroup.markAsDirty(),this.sumForGrindingsItems.splice(t,1),this.calculateWorkOrderSumOfGrinding()}calculateWorkOrderSum(t,n=!0){var r,i,s,u,g,m,h,v,O,Z,y,w,N,q,W,S,F;switch(null===(r=this.getUOM(t))||void 0===r?void 0:r.value){case"M2":const K=(n?(0,b.ZB)(1*(null===(i=this.getDimension1(t))||void 0===i?void 0:i.value)/10,null===(s=this.settings)||void 0===s?void 0:s.constructionMeasureCM):1*(null===(u=this.getDimension1(t))||void 0===u?void 0:u.value)/10)*(n?(0,b.ZB)(1*(null===(g=this.getDimension2(t))||void 0===g?void 0:g.value)/10,null===(m=this.settings)||void 0===m?void 0:m.constructionMeasureCM):1*(null===(h=this.getDimension2(t))||void 0===h?void 0:h.value)/10)/1e4;null===(v=this.getSumQuantity(t))||void 0===v||v.setValue((null===(O=this.getDescription(t))||void 0===O?void 0:O.value.toLowerCase().includes("termoizolaciono"))&&K<((null===(Z=this.settings)||void 0===Z?void 0:Z.termoizolacGlassMinArea)||.2)?(0,b.wz)(((null===(y=this.settings)||void 0===y?void 0:y.termoizolacGlassMinArea)||.2)*(1*(null===(w=this.getQuantity(t))||void 0===w?void 0:w.value)),3):(0,b.wz)(K*(null===(N=this.getQuantity(t))||void 0===N?void 0:N.value)*1,3));break;case"M":const $e=(1*(null===(q=this.getDimension1(t))||void 0===q?void 0:q.value)/10*2/100+1*(null===(W=this.getDimension2(t))||void 0===W?void 0:W.value)/10*2/100)*(1*(null===(S=this.getQuantity(t))||void 0===S?void 0:S.value));null===(F=this.getSumQuantity(t))||void 0===F||F.setValue((0,b.wz)($e,3))}this.calculateSum()}calculateSum(){this.sumMeter2=0,this.sumMeter2Quantity=0,this.sumMeter=0,this.sumMeterQuantity=0,this.sumPieces=0,this.sumHours=0,this.workOrderItemsFormArr.controls.forEach((t,n)=>{var r,i,s,u,g,m,h;switch(null===(r=this.getUOM(n))||void 0===r?void 0:r.value){case"M2":this.sumMeter2+=1*(null===(i=this.getSumQuantity(n))||void 0===i?void 0:i.value),this.sumMeter2Quantity+=1*(null===(s=this.getQuantity(n))||void 0===s?void 0:s.value);break;case"M":this.sumMeter+=1*(null===(u=this.getSumQuantity(n))||void 0===u?void 0:u.value),this.sumMeterQuantity+=1*(null===(g=this.getQuantity(n))||void 0===g?void 0:g.value);break;case"PCS":this.sumPieces+=1*(null===(m=this.getSumQuantity(n))||void 0===m?void 0:m.value);break;case"HOUR":this.sumHours+=1*(null===(h=this.getSumQuantity(n))||void 0===h?void 0:h.value)}})}uomChanged(t,n){var r,i,s,u,g,m,h,v,O;"PCS"===t||"HOUR"===t?(null===(r=this.getDimension1(n))||void 0===r||r.setValue(0),null===(i=this.getDimension1(n))||void 0===i||i.disable(),null===(s=this.getDimension2(n))||void 0===s||s.setValue(0),null===(u=this.getDimension2(n))||void 0===u||u.disable(),null===(g=this.getQuantity(n))||void 0===g||g.setValue(0),null===(m=this.getQuantity(n))||void 0===m||m.disable(),setTimeout(()=>{this.setFocusOn("sumQuantity",n,!0)})):(null===(h=this.getDimension1(n))||void 0===h||h.enable(),null===(v=this.getDimension2(n))||void 0===v||v.enable(),null===(O=this.getQuantity(n))||void 0===O||O.enable(),setTimeout(()=>{this.setFocusOn("dimension1",n,!0)})),this.getSumQuantity(n),this.calculateSum()}setWorkOrderNumber(){var t;this.webService.getNextWorkOrderNumber(null===(t=this.formGroup.get("dateOfCreate"))||void 0===t?void 0:t.value).subscribe(n=>{var r;null===(r=this.formGroup.get("number"))||void 0===r||r.setValue(n)})}buyerChanged(){setTimeout(()=>{var t;this.isBuyerSelected=null===(t=this.formGroup.get("buyer"))||void 0===t?void 0:t.value,0===this.workOrderItemsFormArr.controls.length&&this.addNewItem(),this.setFocusOn("forPerson")})}bottomReachedHandlerBuyers(){this.listEntities.requestNextPage()}bottomReachedHandlerBuyersOnChange(){this.listEntitiesOnChange.requestNextPage()}selectBuyer(t){t&&t.value&&(this.selectedBuyer=t.value)}selectBuyerOnChange(t){if(t&&t.value){this.selectedBuyerOnChange=t.value,this.subs.sink.$markWorkOrder=this.sweetAlertService.getDataBackFromSweetAlert().subscribe(r=>{var i,s;r&&r.confirmed&&this.workOrderOID&&(null===(i=this.selectedBuyerOnChange)||void 0===i?void 0:i.oid)&&(this.subs.sink=this.webService.changeBuyer(this.workOrderOID,null===(s=this.selectedBuyerOnChange)||void 0===s?void 0:s.oid).subscribe(u=>{u&&(this.globalService.showBasicAlert(p.I.success,this.translateService.instant("successfully"),this.translateService.instant("workOrderIsSuccessfullyUpdated")),window.location.reload())}))});const n={mode:"warning",icon:"alert-triangle",type:{name:re.N.submit,buttons:{submit:this.translateService.instant("change"),cancel:this.translateService.instant("cancel")}},title:this.translateService.instant("changeBuyer"),message:this.translateService.instant("areYouSureYouWantToAllowChangeOfBuyerWithAllConsequencesWorkOrder")};this.sweetAlertService.openMeSweetAlert(n)}}searchHandler(t){let n=new T.h;n.criteriaQuick=t,this.listEntities.setFilter(n)}searchHandlerOnChange(t){let n=new T.h;n.criteriaQuick=t,this.listEntitiesOnChange.setFilter(n)}createBuyer(){this.buyerCreateEditPopupService.openDialog().subscribe(t=>{t&&this.listEntities.requestFirstPage()})}cancel(){this.router.navigate(["/"])}handleSubmitButton(t=!1){const n=new FormData;let r=!1;const i=this.formGroup.value;i.images=[],this.workOrderImages.forEach(s=>{s.file?(n.append("files",s.file),r=!0,i.images.push({oid:"",url:"",description:s.description||""})):s.oid&&i.images.push({oid:s.oid,url:s.url,description:s.description})}),r?this.subs.sink=this.imageWebService.upload(n).subscribe(s=>{s.forEach((u,g)=>{for(let m=0;m<i.images.length;m++)if(""===i.images[m].url){i.images[m].url=u;break}}),this.submit(t,i)}):this.submit(t,i)}submit(t,n){this.isEdit&&this.workOrderOID?this.webService.updateEntity(this.workOrderOID,n).subscribe(r=>{r&&this.globalService.showBasicAlert(p.I.success,this.translateService.instant("successfully"),this.translateService.instant("workOrderIsSuccessfullyUpdated"))}):this.createWorkOrderRequest(t,n)}createWorkOrderRequest(t,n){this.subs.sink=this.webService.createEntity(n).subscribe(r=>{r&&(this.globalService.showBasicAlert(p.I.success,this.translateService.instant("successfully"),this.translateService.instant("newWorkOrderIsSuccessfullyCreated")),window.open("#/print/work-order-view/"+r.oid),t?this.router.navigate(["invoices","create"],{queryParams:{workOrderOID:r.oid}}):location.reload())})}openedToggleOnUomSelect(t,n){var r,i;!t&&(null===(r=this.getUOM(n))||void 0===r?void 0:r.value)&&this.uomChanged(null===(i=this.getUOM(n))||void 0===i?void 0:i.value,n)}onKeypress(t,n,r=-1){var i;if("Enter"===t.key)switch(t.preventDefault(),n){case"number":this.setFocusOn("buyer");break;case"forPerson":this.setFocusOn("description");break;case"description":r<0?this.setFocusOn("dateOfCreate",0,!0):this.setFocusOn("uom",r);break;case"dateOfCreate":this.setFocusOn("placeOfIssue",0,!0);break;case"placeOfIssue":this.setFocusOn("description",r+2,!0);break;case"dimension1":this.setFocusOn("dimension2",r,!0);break;case"dimension2":this.setFocusOn("quantity",r,!0);break;case"quantity":this.setFocusOn("sumQuantity",r,!0);break;case"sumQuantity":this.setFocusOn("note",r,!0);break;case"note":r>=0&&!(null===(i=this.workOrderItemsFormArr.controls[r+1])||void 0===i?void 0:i.value)&&this.addNewItem(this.workOrderItemsFormArr.controls[r].value),setTimeout(()=>{this.setFocusOn("description",r+2,!0)})}}setFocusOn(t,n=0,r=!1){const i=this.el.nativeElement.querySelectorAll('[formcontrolname="'+t+'"]')[n<0?0:n];null==i||i.focus(),r&&i.select()}_filter(t){const n=t.toLowerCase();return this.workOrderItemsOptions.filter(r=>r.toLowerCase().includes(n))}getFilteredOptions(t){return this.filteredOptions[t]}onFileSelected(t,n){const r=t.target.files[0];if(r){this.workOrderImages[n].file=r;const i=URL.createObjectURL(r);this.workOrderImages[n].oid="",this.workOrderImages[n].url=i,this.workOrderImages[n].fullUrl=i}this.formGroup.markAsDirty()}addNewImage(t){this.workOrderImages.push({oid:(null==t?void 0:t.oid)||"",url:(null==t?void 0:t.url)||"",fullUrl:(null==t?void 0:t.url)?(0,b.Er)(t.url):"",description:(null==t?void 0:t.description)||"",file:void 0})}removeImage(t){this.workOrderImages.splice(t,1),this.formGroup.markAsDirty()}uploadFile(t){var n;null===(n=this.fileCtrls.get(t))||void 0===n||n.nativeElement.click()}addSumOfGrindingItems(){this.addNewItem({oid:"",description:this.translateService.instant("grinding"),uom:"M",dimension1:0,dimension2:0,dimension3:0,quantity:this.sumOfGrinding,sumQuantity:this.sumOfGrinding,note:"",settled:!1}),this.sumOfGrinding=0}calculateWorkOrderSumOfGrinding(){this.sumOfGrinding=0;let t=0;this.sumForGrindingsItems.forEach(n=>{n.isCalculated&&(t+=Number(n.value))}),this.sumOfGrinding=t/1e3}calculateGrindingLengthForItem(t){var n,r,i;const s=(2*(null===(n=this.getDimension1(t))||void 0===n?void 0:n.value)+2*(null===(r=this.getDimension2(t))||void 0===r?void 0:r.value))*(null===(i=this.getQuantity(t))||void 0===i?void 0:i.value)+0;this.sumForGrindingsItems[t].value=s,this.calculateWorkOrderSumOfGrinding()}switchOnCalcBasedOnDescription(t){var n;(null===(n=this.getDescription(t))||void 0===n?void 0:n.value).toLowerCase().includes("kp obrad")&&(this.sumForGrindingsItems[t].isCalculated=!0)}ngOnDestroy(){this.inputSearchControlSubscription.unsubscribe(),this.inputSearchControlOnChangeSubscription.unsubscribe(),this.subs.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.F0),e.Y36(x.gz),e.Y36(oe.U),e.Y36(k.y),e.Y36(k.y),e.Y36(d.X),e.Y36(J.e),e.Y36(E.sK),e.Y36(ie.G),e.Y36(L.o),e.Y36(B),e.Y36(e.SBq),e.Y36(se.T),e.Y36(ae.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-work-order-create-edit"]],viewQuery:function(t,n){if(1&t&&e.Gf(de,5),2&t){let r;e.iGM(r=e.CRH())&&(n.fileCtrls=r)}},inputs:{debounceTime:"debounceTime"},features:[e._Bn([L.o,d.X,J.e,k.y,B])],decls:8,vars:5,consts:[[1,"wrapper"],[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],["class","button-section",4,"ngIf"],[1,"form",3,"formGroup"],[1,"row"],["type","text","appDecimal","","matInput","","formControlName","number",3,"keypress"],[1,"bottom-padding",3,"isTransparentMode","text","clickEvent"],["formControlName","buyer","msInfiniteScroll","",3,"compareWith","disabled","matTooltip","valueChange","infiniteScroll","selectionChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel","hideClearSearchButton","clearSearchInput","searching","disableScrollToActiveOnOptionsChanged"],[3,"value",4,"ngIf"],[4,"ngFor","ngForOf"],["class","create-buyer-button",3,"color","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[4,"ngIf"],["class","create-buyer-button","class","bottom-padding",3,"iconName","disabled","clickEvent",4,"ngIf"],["type","text","matInput","","formControlName","forPerson",3,"keypress"],["type","text","matInput","","formControlName","description",3,"keypress"],["type","date","matInput","","formControlName","dateOfCreate",3,"keypress"],["type","text","matInput","","formControlName","placeOfIssue",3,"keypress"],["formArrayName","workOrderItems",1,"work-order-items"],["class","work-order-item",4,"ngFor","ngForOf"],[1,"row","full-width","bottom-margin"],[1,"items-buttons"],[1,"big-button",3,"iconName","text","disabled","clickEvent"],["class","big-button",3,"iconName","text","isTransparentMode","disabled","clickEvent",4,"ngIf"],["class","sum-info",4,"ngIf"],[1,"text-area"],["matInput","","formControlName","note","rows","3",3,"keypress"],[1,"images"],["class","image",4,"ngFor","ngForOf"],[1,"add-image-button",3,"text","clickEvent"],[3,"value"],[1,"create-buyer-button",3,"color","ngModel","ngModelOptions","ngModelChange"],["msInfiniteScroll","",3,"compareWith","infiniteScroll","selectionChange"],[1,"bottom-padding",3,"iconName","disabled","clickEvent"],[1,"work-order-item"],[1,"form-group",3,"formGroupName"],[1,"full-width"],["type","text","matInput","","formControlName","description",3,"matAutocomplete","matTooltip","keydown.enter","keypress","change"],["trigger","matAutocompleteTrigger"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"number-field"],["formControlName","uom",1,"color-black",3,"focusout","openedChange"],["type","text","appDecimal","","matInput","","formControlName","dimension1",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","dimension2",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","quantity",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","sumQuantity",3,"keypress","change"],["type","text","matInput","","formControlName","note",3,"keypress"],[1,"additional-button",3,"iconName","isTransparentMode","clickEvent"],[1,"cons-measure-checkbox",3,"color","checked","change"],["class","cons-measure-checkbox",3,"color","ngModel","ngModelOptions","disabled","ngModelChange","change",4,"ngIf"],["class","small-number-input",4,"ngIf"],[1,"cons-measure-checkbox",3,"color","ngModel","ngModelOptions","disabled","ngModelChange","change"],[1,"small-number-input"],["type","text","matInput","","appDecimal","",3,"ngModel","ngModelOptions","ngModelChange","change"],[1,"big-button",3,"iconName","text","isTransparentMode","disabled","clickEvent"],[1,"sum-info"],["class","key",4,"ngIf"],["class","value",4,"ngIf"],[1,"key"],[1,"value1"],[1,"value2"],[1,"value"],[1,"image"],[1,"button-container"],[3,"iconName","isTransparentMode","clickEvent"],["type","file","hidden","",3,"change"],["fileCtrl",""],["type","text","matInput","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"image-preview",3,"ngStyle"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"],["class","update",3,"text","disabled","clickEvent",4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.YNc(6,Je,66,89,"form",3),e.YNc(7,De,8,8,"div",4),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij(" ",e.lcZ(5,3,n.isEdit?"editWorkOrder":"createWorkOrder")," "),e.xp6(2),e.Q6J("ngIf",n.formGroup),e.xp6(1),e.Q6J("ngIf",n.formGroup))},directives:[f.O5,a._Y,a.JL,a.sg,I.KE,I.hX,H.Nt,a.Fj,ce.U,a.JJ,a.u,le.r,U.gD,G.s,j.gM,ue.ey,Y.nu,a.oH,f.sg,a.CE,R.oG,a.On,a.x0,P.ZL,P.XC,f.PC],pipes:[E.X$,f.Ov,f.JJ],styles:[".wrapper[_ngcontent-%COMP%]{height:calc(100%)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 50px);overflow-y:auto}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:column;margin-top:20px;display:flex;width:100%;color:var(--color-black)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .create-buyer-button[_ngcontent-%COMP%]{margin:10px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .items-buttons[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .items-buttons[_ngcontent-%COMP%]   .big-button[_ngcontent-%COMP%]{margin-right:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-padding[_ngcontent-%COMP%]{display:flex;align-items:center;padding-bottom:1.34375em;margin-left:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row.full-width[_ngcontent-%COMP%]{justify-content:space-between}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .sum-info[_ngcontent-%COMP%]{display:flex;border:2px solid var(--color-main-dark)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .sum-info[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:130px;align-items:center;justify-content:space-evenly;border-right:1px dotted var(--color-main-dark);font-weight:600}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .sum-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:100px;padding-right:10px;align-items:flex-end;justify-content:space-evenly;border-right:2px solid var(--color-main-dark)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]{min-width:400px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row.bottom-margin[_ngcontent-%COMP%]{margin-bottom:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .work-order-items[_ngcontent-%COMP%]   .work-order-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .work-order-items[_ngcontent-%COMP%]   .work-order-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex-grow:1}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .work-order-items[_ngcontent-%COMP%]   .work-order-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .number-field[_ngcontent-%COMP%]{flex-shrink:1;max-width:100px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .work-order-items[_ngcontent-%COMP%]   .work-order-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .additional-button[_ngcontent-%COMP%]{margin:10px 5px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .add-image-button[_ngcontent-%COMP%]{margin-bottom:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:60px;flex-direction:row;align-items:center;justify-content:space-between}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{margin-right:20px}.cons-measure-checkbox[_ngcontent-%COMP%]{margin-top:15px}.images[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid var(--color-main-light);margin:10px}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:space-evenly;border-bottom:1px dotted var(--color-main-light)}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{margin-top:10px}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{height:400px;width:400px;background-position:center;background-size:contain;background-repeat:no-repeat}.display-none[_ngcontent-%COMP%]{display:none}.small-number-input[_ngcontent-%COMP%]{width:70px}"]}),o})(),canActivate:[C.Y],data:{permission:"WORK_ORDER_CREATE"}}];let He=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[x.Bz.forChild(Be)],x.Bz]}),o})();var Ue=c(2024),Ge=c(7707),je=c(6688),Ye=c(7942),Re=c(5245),Ke=c(7012);let ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.ez,He,E.aw,Ue.h,Ge.R,a.UX,a.u5,H.c,I.lN,U.LD,je.Hi,Ye.p,Re.Ps,Y.Co,G.I,R.p9,Ke.o,P.Bb,j.AV]]}),o})()},3336:(Q,M,c)=>{c.d(M,{U:()=>x});var f=c(7716);let x=(()=>{class C{constructor(d){this.el=d}keyup(){this.validateNumber(this.el.nativeElement.value)}validateNumber(d){d=d.replace(/[^\d,.-]/g,"");let p=-1;for(let _=0;_<d.length;_++)if("."===d.charAt(_)||","===d.charAt(_)){p=_;break}d=(d=d.replaceAll(".","")).replaceAll(",",""),0===p?d="0."+d:p>0&&(d=d.substring(0,p)+"."+(d.length>p?d.substring(p):"")),this.el.nativeElement.value=d}}return C.\u0275fac=function(d){return new(d||C)(f.Y36(f.SBq))},C.\u0275dir=f.lG2({type:C,selectors:[["","appDecimal",""]],hostBindings:function(d,p){1&d&&f.NdJ("keyup",function(){return p.keyup()})}}),C})()},7379:(Q,M,c)=>{c.d(M,{e:()=>p});var f=c(4292),x=c(136),C=c(3749),a=c(7716),d=c(7515);let p=(()=>{class _ extends f.h{constructor(k){super(k,C.w,x.Hz),this.baseWebService=k}}return _.\u0275fac=function(k){return new(k||_)(a.LFG(d.I))},_.\u0275prov=a.Yz7({token:_,factory:_.\u0275fac}),_})()}}]);