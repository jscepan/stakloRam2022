"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[509],{5509:(Z,v,i)=>{i.r(v),i.d(v,{OutcomesModule:()=>ft});var l=i(6895),h=i(8729),p=i(7095),d=i(5412),r=i(6498),s=i(4006),u=i(4794),b=i(4463),g=i(7379),Y=i(2134),E=i(5595),T=i(287),R=i(4292),j=i(136),Q=i(655),W=i(3429),G=i(8228),S=i(3749);class M extends G.g{constructor(){super(...arguments),this.date=new Date,this.amount=0,this.comment="",this.buyer=new S.w}}(0,Q.gn)([(0,W.D)(()=>S.w)],M.prototype,"buyer",void 0);var t=i(4650),H=i(3164);let y=(()=>{class n extends R.h{constructor(e){super(e,M,j.ki),this.baseWebService=e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(H.I))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var K=i(13),L=i(8794),C=i(8490),D=i(42),O=i(9549),P=i(4144),_=i(4385),I=i(3238),B=i(4603),F=i(3231),k=i(3336);function z(n,a){if(1&n&&(t.TgZ(0,"mat-option"),t._UZ(1,"ngx-mat-select-search",12),t.ALo(2,"translate"),t.ALo(3,"translate"),t.ALo(4,"async"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.s9C("placeholderLabel",t.lcZ(2,7,"searchFor")),t.s9C("noEntriesFoundLabel",t.lcZ(3,9,"noResults")),t.Q6J("formControl",e.searchControl)("hideClearSearchButton",!0)("clearSearchInput",!0)("searching",t.lcZ(4,11,e.isLoading)||!1)("disableScrollToActiveOnOptionsChanged",!0)}}function q(n,a){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("value",e.selectedBuyer),t.xp6(1),t.Oqu(e.selectedBuyer.name)}}function $(n,a){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.name)," ")}}function X(n,a){if(1&n&&(t.ynx(0),t.YNc(1,$,3,4,"mat-option",7),t.BQk()),2&n){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==o.selectedBuyer?null:o.selectedBuyer.oid)!==e.oid)}}function V(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",4)(1,"mat-form-field")(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",5),t.NdJ("infiniteScroll",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.bottomReachedHandler())})("selectionChange",function(c){t.CHM(e);const m=t.oxw();return t.KtG(m.selectBuyer(c))}),t.YNc(6,z,5,13,"mat-option",6),t.YNc(7,q,2,2,"mat-option",7),t.YNc(8,X,2,1,"ng-container",8),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"mat-form-field")(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",9),t.qZA(),t.TgZ(15,"mat-form-field")(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field")(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"input",11),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.formGroup),t.xp6(2),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(4,26,"buyer")," "),t.xp6(2),t.Q6J("disabled",e.isEdit)("compareWith",e.compareFn),t.xp6(1),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.selectedBuyer),t.xp6(1),t.Q6J("ngForOf",t.lcZ(9,28,e.buyersEntities)),t.xp6(3),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(13,30,"amount")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(18,32,"date")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(23,34,"comment")," ")}}function tt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"app-button",15),t.NdJ("clickEvent",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.cancel())}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"app-button",16),t.NdJ("clickEvent",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.handleSubmitButton())}),t.ALo(4,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("text",t.lcZ(2,3,"cancel")),t.xp6(2),t.Q6J("text",t.lcZ(4,5,"save"))("disabled",e.isEdit&&!e.formGroup.dirty||e.formGroup.invalid)}}let et=(()=>{class n{constructor(e,o,c,m,f,A,x){this.dialogRef=e,this.data=o,this.globalService=c,this.webService=m,this.buyerWebService=f,this.translateService=A,this.listEntities=x,this.subs=new b.L,this.isEdit=!1,this.buyersEntities=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.searchControl=new s.p4,this.compareFn=Y.nt,this.debounceTime=500}ngOnInit(){this.isEdit=!!this.data.oid,this.outcomeOID=this.data.oid,this.subs.sink=this.listEntities.setWebService(this.buyerWebService).requestFirstPage(),this.isEdit?this.initializeEdit():this.initializeCreate(),this.inputSearchControlSubscription=this.searchControl.valueChanges.pipe((0,K.b)(this.debounceTime)).subscribe(()=>{this.searchHandler(this.searchControl.value)})}initializeCreate(){this.formGroup=new s.nJ({date:new s.p4((new Date).toISOString().substring(0,10),[s.kI.required]),amount:new s.p4(0,[s.kI.required,s.kI.min(0)]),comment:new s.p4("",[]),buyer:new s.p4("",s.kI.required)})}initializeEdit(){this.subs.sink=this.webService.getEntityByOid(this.outcomeOID).subscribe(e=>{e&&(this.selectedBuyer=e.buyer,this.formGroup=new s.nJ({date:new s.p4(e.date,[s.kI.required]),amount:new s.p4(e.amount,[s.kI.required,s.kI.min(0)]),comment:new s.p4(e.comment,[]),buyer:new s.p4(this.selectedBuyer,s.kI.required)}))})}selectBuyer(e){e&&e.value&&(this.selectedBuyer=e.value)}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){const e=this.formGroup.value;this.isEdit?this.webService.updateEntity(this.outcomeOID,e).subscribe(o=>{o&&(this.globalService.showBasicAlert(u.I.success,this.translateService.instant("successfully"),this.translateService.instant("outcomeIsSuccessfullyUpdated")),this.dialogRef.close(o))}):this.webService.createEntity(e).subscribe(o=>{o&&(this.globalService.showBasicAlert(u.I.success,this.translateService.instant("successfully"),this.translateService.instant("newOutcomeIsSuccessfullyCreated")),this.dialogRef.close(o))})}bottomReachedHandler(){this.listEntities.requestNextPage()}searchHandler(e){let o=new T.h;o.criteriaQuick=e,this.listEntities.setFilter(o)}ngOnDestroy(){this.inputSearchControlSubscription.unsubscribe(),this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.so),t.Y36(d.WI),t.Y36(L.U),t.Y36(y),t.Y36(g.e),t.Y36(C.sK),t.Y36(E.y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-outcome-create-edit"]],inputs:{debounceTime:"debounceTime"},features:[t._Bn([y,g.e,E.y])],decls:7,vars:5,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],["class","button-section",4,"ngIf"],[1,"form",3,"formGroup"],["formControlName","buyer","msInfiniteScroll","",3,"disabled","compareWith","infiniteScroll","selectionChange"],[4,"ngIf"],[3,"value",4,"ngIf"],[4,"ngFor","ngForOf"],["type","text","appDecimal","","matInput","","formControlName","amount"],["type","date","matInput","","formControlName","date"],["type","text","matInput","","formControlName","comment"],[3,"formControl","placeholderLabel","noEntriesFoundLabel","hideClearSearchButton","clearSearchInput","searching","disableScrollToActiveOnOptionsChanged"],[3,"value"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,V,25,36,"form",2),t.YNc(6,tt,5,7,"div",3),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,o.isEdit?"editOutcome":"createOutcome")," "),t.xp6(2),t.Q6J("ngIf",o.formGroup),t.xp6(1),t.Q6J("ngIf",o.formGroup))},dependencies:[l.sg,l.O5,D.r,s._Y,s.Fj,s.JJ,s.JL,s.oH,s.sg,s.u,O.KE,O.hX,P.Nt,_.gD,I.ey,B.s,F.nu,k.U,l.Ov,C.X$],styles:["[_nghost-%COMP%]{display:flex;height:100%}.container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}.container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),n})(),N=(()=>{class n{constructor(e){this._matDialog=e}openDialog(e=""){return new r.y(o=>{const c=new d.vA;c.data={oid:e},this._matDialog.open(et,c).afterClosed().subscribe(m=>{o.next(m),o.complete()},()=>o.error())})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.uw))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var nt=i(3851),J=i(8879),it=i(8933),ot=i(4605),st=i(4286),U=i(1572);function rt(n,a){1&n&&(t.TgZ(0,"div",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"noResults")," "))}function at(n,a){1&n&&(t.TgZ(0,"div",16),t._UZ(1,"mat-spinner"),t.qZA())}function ct(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",17),t._uU(2),t.qZA(),t.TgZ(3,"div",17),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",18),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"div",17)(10,"app-button",19),t.NdJ("clickEvent",function(){const m=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.editOutcome(m.oid))}),t.qZA()(),t.TgZ(11,"div",17)(12,"app-button",19),t.NdJ("clickEvent",function(){const m=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.deleteOutcome(m))}),t.qZA()(),t.BQk()}if(2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",e.buyer.name," "),t.xp6(2),t.hij(" ",t.xi3(5,7,e.date,"dd.MM.yyyy")," "),t.xp6(3),t.hij(" ",t.Dn7(8,10,e.amount,"1.2-2","de")," "),t.xp6(3),t.Q6J("iconName","edit")("isTransparentMode",!0),t.xp6(2),t.Q6J("iconName","trash-2")("isTransparentMode",!0)}}const lt=[{path:"",component:(()=>{class n{constructor(e,o,c,m,f,A,x,Ct){this.globalService=e,this.translateService=o,this.webService=c,this.sweetAlertService=m,this.router=f,this.listEntities=A,this.outcomeCreateEditPopupService=x,this.authStoreService=Ct,this.subs=new b.L,this.isLoading=this.listEntities.isLoading,this.entities=this.listEntities.entities,this.totalEntitiesLength=this.listEntities.totalEntitiesLength,this.keyword="",this.searchFilter=new T.h}ngOnInit(){this.subs.sink=this.listEntities.setWebService(this.webService).requestFirstPage()}hasPrivilege(e){return this.authStoreService.isAllowed(e)}inputSearchHandler(e){this.searchFilter.criteriaQuick=e,this.listEntities.setFilter(this.searchFilter)}incomes(){this.router.navigate(["incomes"])}create(){this.outcomeCreateEditPopupService.openDialog().subscribe(e=>{e&&this.listEntities.requestFirstPage()})}editOutcome(e){this.outcomeCreateEditPopupService.openDialog(e).subscribe(o=>{o&&this.listEntities.requestFirstPage()})}deleteOutcome(e){this.subs.sink.$deleteOutcome=this.sweetAlertService.getDataBackFromSweetAlert().subscribe(c=>{c&&c.confirmed&&(this.subs.sink=this.webService.deleteEntity([e]).subscribe(()=>{this.globalService.showBasicAlert(u.I.success,this.translateService.instant("outcomeDeleted"),this.translateService.instant("outcomeHaveBeenSuccessfullyDeleted")),this.listEntities.requestFirstPage()}))});const o={mode:"warning",icon:"alert-triangle",type:{name:nt.N.submit,buttons:{submit:this.translateService.instant("delete"),cancel:this.translateService.instant("cancel")}},title:this.translateService.instant("deleteOutcome"),message:this.translateService.instant("areYouSureYouWantToDeleteTheOutcome")};this.sweetAlertService.openMeSweetAlert(o)}bottomReachedHandler(){this.listEntities.requestNextPage()}orderBy(e){this.searchFilter.ordering=e,this.listEntities.setFilter(this.searchFilter)}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(L.U),t.Y36(C.sK),t.Y36(y),t.Y36(J.T),t.Y36(h.F0),t.Y36(E.y),t.Y36(N),t.Y36(it.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-outcomes"]],features:[t._Bn([y,J.T,E.y,N])],decls:43,vars:52,consts:[[1,"container"],[1,"search-bar"],[3,"placeholder","keyword","changeEvent"],[1,"min-with"],[3,"valueChange"],["value","ASC"],["value","DESC"],[3,"text","isTransparentMode","clickEvent"],[3,"iconName","text","disabled","clickEvent"],["scrollToBottom","",1,"outcomes",3,"bottomReached"],[1,"grid-container","standard-grid-table"],[1,"grid-item","header","sticky"],["class","no-results",4,"ngIf"],["class","spinner",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"no-results"],[1,"spinner"],[1,"grid-item"],[1,"grid-item","align-right"],[3,"iconName","isTransparentMode","clickEvent"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-search-input",2),t.NdJ("changeEvent",function(m){return o.inputSearchHandler(m)}),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",3)(5,"mat-label"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-select",4),t.NdJ("valueChange",function(m){return o.orderBy(m)}),t.TgZ(9,"mat-option",5),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"mat-option",6),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.TgZ(15,"app-button",7),t.NdJ("clickEvent",function(){return o.incomes()}),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"app-button",8),t.NdJ("clickEvent",function(){return o.create()}),t.ALo(18,"translate"),t.qZA()(),t.TgZ(19,"div",9),t.NdJ("bottomReached",function(){return o.bottomReachedHandler()}),t.TgZ(20,"div",10)(21,"div",11),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div",11),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"div",11),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",11),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",11),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.YNc(36,rt,3,3,"div",12),t.ALo(37,"async"),t.ALo(38,"async"),t.YNc(39,at,2,0,"div",13),t.ALo(40,"async"),t.YNc(41,ct,13,14,"ng-container",14),t.ALo(42,"async"),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("placeholder",t.lcZ(3,22,"searchFor"))("keyword",o.keyword),t.xp6(3),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(7,24,"sortBy")," "),t.xp6(4),t.Oqu(t.lcZ(11,26,"asc")),t.xp6(3),t.Oqu(t.lcZ(14,28,"desc")),t.xp6(2),t.Q6J("text",t.lcZ(16,30,"incomes"))("isTransparentMode",!0),t.xp6(2),t.Q6J("iconName","plus")("text",t.lcZ(18,32,"createOutcome"))("disabled",!o.hasPrivilege("OUTCOME_CREATE")),t.xp6(5),t.hij(" ",t.lcZ(23,34,"buyerName")," "),t.xp6(3),t.hij(" ",t.lcZ(26,36,"date")," "),t.xp6(3),t.hij(" ",t.lcZ(29,38,"amount")," "),t.xp6(3),t.hij(" ",t.lcZ(32,40,"edit")," "),t.xp6(3),t.hij(" ",t.lcZ(35,42,"delete")," "),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(37,44,o.totalEntitiesLength)&&!t.lcZ(38,46,o.isLoading)),t.xp6(3),t.Q6J("ngIf",t.lcZ(40,48,o.isLoading)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(42,50,o.entities)))},dependencies:[l.sg,l.O5,D.r,ot.J,st.C,U.Ou,O.KE,O.hX,_.gD,I.ey,l.Ov,l.JJ,l.uU,C.X$],styles:["[_nghost-%COMP%]{display:flex;height:100%}.container[_ngcontent-%COMP%]{height:100%;min-width:500px}.container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.container[_ngcontent-%COMP%]   .outcomes[_ngcontent-%COMP%]{height:calc(100% - 120px);overflow-y:auto;margin-top:20px}.container[_ngcontent-%COMP%]   .outcomes[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto auto auto}.min-with[_ngcontent-%COMP%]{max-width:130px}"]}),n})(),canActivate:[p.Y],data:{permission:"OUTCOMES_VIEW"}}];let ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(lt),h.Bz]}),n})();var w=i(2024),mt=i(2763),dt=i(6460),pt=i(8287),ht=i(7707),vt=i(7012);let gt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,C.aw,w.h,ht.R,s.UX,P.c,O.lN,_.LD,B.I,F.Co,vt.o]}),n})(),ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,ut,C.aw,w.h,mt.i,dt.n,pt.n,gt,U.Cq,_.LD]}),n})()},3336:(Z,v,i)=>{i.d(v,{U:()=>h});var l=i(4650);let h=(()=>{class p{constructor(r){this.el=r}keyup(){this.validateNumber(this.el.nativeElement.value)}validateNumber(r){r=r.replace(/[^\d,.-]/g,"");let s=-1;for(let u=0;u<r.length;u++)if("."===r.charAt(u)||","===r.charAt(u)){s=u;break}r=(r=r.replaceAll(".","")).replaceAll(",",""),0===s?r="0."+r:s>0&&(r=r.substring(0,s)+"."+(r.length>s?r.substring(s):"")),this.el.nativeElement.value=r}}return p.\u0275fac=function(r){return new(r||p)(l.Y36(l.SBq))},p.\u0275dir=l.lG2({type:p,selectors:[["","appDecimal",""]],hostBindings:function(r,s){1&r&&l.NdJ("keyup",function(){return s.keyup()})}}),p})()},3749:(Z,v,i)=>{i.d(v,{w:()=>r});var l=i(655),h=i(3429),p=i(8228),d=i(8324);class r extends p.g{constructor(){super(...arguments),this.name="",this.address="",this.maticalNumber="",this.pib="",this.contactPerson="",this.phoneNumberFix="",this.phoneNumberMobile="",this.email=""}}(0,l.gn)([(0,h.D)(()=>d.v)],r.prototype,"city",void 0)},7379:(Z,v,i)=>{i.d(v,{e:()=>s});var l=i(4292),h=i(136),p=i(3749),d=i(4650),r=i(3164);let s=(()=>{class u extends l.h{constructor(g){super(g,p.w,h.Hz),this.baseWebService=g}}return u.\u0275fac=function(g){return new(g||u)(d.LFG(r.I))},u.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac}),u})()}}]);