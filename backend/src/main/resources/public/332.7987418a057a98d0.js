"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[332],{332:(w,O,c)=>{c.r(O),c.d(O,{WorkOrderCreateEditModule:()=>Qe});var _=c(6895),f=c(8729),g=c(7095),a=c(4006),u=c(8763),p=c(4794),m=c(136),v=c(287),h=c(5595),F=c(4463),C=c(2134),E=c(7379),Z=c(7126),A=c(13),J=c(1059),Q=c(4850),L=c(4292),D=c(8228);class K extends D.g{constructor(){super(...arguments),this.url="",this.description=""}}var e=c(4650),B=c(3164);let T=(()=>{class o extends L.h{constructor(t){super(t,K,m.IF),this.baseWebService=t}upload(t){return this.baseWebService.postRequest(m.Mr+"/"+this.domainName,t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(B.I))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var U=c(3851),H=c(8794),b=c(8490),j=c(7347),Y=c(8879),R=c(8933),z=c(42),M=c(9549),I=c(4144),P=c(4385),$=c(3238),W=c(3231),S=c(4603),N=c(6709),V=c(3336),y=c(7957),G=c(266);const X=["fileCtrl"];function ee(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("value",t.selectedBuyer),e.xp6(1),e.Oqu(t.selectedBuyer.name)}}function te(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function re(o,l){if(1&o&&(e.ynx(0),e.YNc(1,te,2,2,"mat-option",11),e.BQk()),2&o){const t=l.$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==r.selectedBuyer?null:r.selectedBuyer.oid)!==t.oid)}}const k=function(){return{standalone:!0}};function ne(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-checkbox",33),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw(2);return e.KtG(i.allowChangeBuyer=n)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("ngModel",t.allowChangeBuyer)("ngModelOptions",e.DdM(6,k)),e.xp6(1),e.Oqu(e.lcZ(2,4,"changeBuyer"))}}function oe(o,l){if(1&o&&(e.TgZ(0,"mat-option"),e._UZ(1,"ngx-mat-select-search",10),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"async"),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.s9C("placeholderLabel",e.lcZ(2,7,"searchFor")),e.s9C("noEntriesFoundLabel",e.lcZ(3,9,"noResults")),e.Q6J("formControl",t.searchControlOnChange)("hideClearSearchButton",!0)("clearSearchInput",!0)("searching",e.lcZ(4,11,t.isLoadingOnChange)||!1)("disableScrollToActiveOnOptionsChanged",!0)}}function ie(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.Q6J("value",t.selectedBuyerOnChange),e.xp6(1),e.Oqu(t.selectedBuyerOnChange.name)}}function se(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ae(o,l){if(1&o&&(e.ynx(0),e.YNc(1,se,2,2,"mat-option",11),e.BQk()),2&o){const t=l.$implicit,r=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(null==r.selectedBuyerOnChange?null:r.selectedBuyerOnChange.oid)!==t.oid)}}function ce(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-select",34),e.NdJ("infiniteScroll",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.bottomReachedHandlerBuyersOnChange())})("selectionChange",function(n){e.CHM(t);const i=e.oxw(2);return e.KtG(i.selectBuyerOnChange(n))}),e.YNc(5,oe,5,13,"mat-option",14),e.YNc(6,ie,2,2,"mat-option",11),e.YNc(7,ae,2,1,"ng-container",12),e.ALo(8,"async"),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(3,9,"buyer")," "),e.xp6(2),e.Q6J("compareWith",t.compareFn),e.xp6(1),e.Q6J("ngIf",t.isEdit),e.xp6(1),e.Q6J("ngIf",t.selectedBuyerOnChange),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,11,t.buyersEntitiesOnChange))}}function le(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-button",35),e.NdJ("clickEvent",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createBuyer())}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("iconName","plus")("disabled",!t.hasPrivilege("BUYER_CREATE"))}}function ue(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function de(o,l){if(1&o&&(e.TgZ(0,"mat-option",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.displayName)," ")}}function me(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-checkbox",54),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw().index,s=e.oxw(2);return e.KtG(s.sumForGrindingsItems[i].isCalculated=n)})("change",function(){e.CHM(t);const n=e.oxw().index,i=e.oxw(2);return i.calculateGrindingLengthForItem(n),e.KtG(i.calculateWorkOrderSumOfGrinding())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw().index,r=e.oxw(2);let n;e.Q6J("color","primary")("ngModel",r.sumForGrindingsItems[t].isCalculated)("ngModelOptions",e.DdM(7,k))("disabled","M2"!==(null==(n=r.getUOM(t))?null:n.value)),e.xp6(1),e.Oqu(e.lcZ(2,5,"calcLength"))}}function pe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",55)(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",56),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw().index,s=e.oxw(2);return e.KtG(s.sumForGrindingsItems[i].value=n)})("change",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.calculateWorkOrderSumOfGrinding())}),e.qZA()()}if(2&o){const t=e.oxw().index,r=e.oxw(2);e.xp6(1),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(3,7,"length")," "),e.xp6(2),e.Q6J("ngModel",r.sumForGrindingsItems[t].value)("ngModelOptions",e.DdM(9,k))}}function _e(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"div",37)(2,"mat-form-field",38)(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"input",39,40),e.NdJ("keydown.enter",function(){e.CHM(t);const n=e.MAs(7);return e.KtG(n.closePanel())})("keypress",function(n){const s=e.CHM(t).index,d=e.oxw(2);return d.onKeypress(n,"description",s),d.calculateGrindingLengthForItem(s),e.KtG(d.switchOnCalcBasedOnDescription(s))})("change",function(){const i=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.switchOnCalcBasedOnDescription(i))}),e.qZA(),e.TgZ(8,"mat-autocomplete",null,41),e.YNc(10,ue,2,2,"mat-option",42),e.ALo(11,"async"),e.qZA()(),e.TgZ(12,"mat-form-field",43)(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-select",44),e.NdJ("focusout",function(){const i=e.CHM(t).index,s=e.oxw(2);return s.calculateWorkOrderSum(i),e.KtG(s.calculateGrindingLengthForItem(i))})("openedChange",function(n){const s=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.openedToggleOnUomSelect(n,s))}),e.YNc(17,de,3,4,"mat-option",42),e.qZA()(),e.TgZ(18,"mat-form-field",43)(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"input",45),e.NdJ("keypress",function(n){const s=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.onKeypress(n,"dimension1",s))})("change",function(){const i=e.CHM(t).index,s=e.oxw(2);return s.calculateWorkOrderSum(i),e.KtG(s.calculateGrindingLengthForItem(i))})("focusout",function(){const i=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.calculateWorkOrderSum(i))}),e.qZA()(),e.TgZ(23,"mat-form-field",43)(24,"mat-label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"input",46),e.NdJ("keypress",function(n){const s=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.onKeypress(n,"dimension2",s))})("change",function(){const i=e.CHM(t).index,s=e.oxw(2);return s.calculateWorkOrderSum(i),e.KtG(s.calculateGrindingLengthForItem(i))})("focusout",function(){const i=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.calculateWorkOrderSum(i))}),e.qZA()(),e.TgZ(28,"mat-form-field",43)(29,"mat-label"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"input",47),e.NdJ("keypress",function(n){const s=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.onKeypress(n,"quantity",s))})("change",function(){const i=e.CHM(t).index,s=e.oxw(2);return s.calculateWorkOrderSum(i),e.KtG(s.calculateGrindingLengthForItem(i))})("focusout",function(){const i=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.calculateWorkOrderSum(i))}),e.qZA()(),e.TgZ(33,"mat-form-field",43)(34,"mat-label"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"input",48),e.NdJ("keypress",function(n){const s=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.onKeypress(n,"sumQuantity",s))})("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.calculateSum())}),e.qZA()(),e.TgZ(38,"mat-form-field")(39,"mat-label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"input",49),e.NdJ("keypress",function(n){const s=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.onKeypress(n,"note",s))}),e.qZA()(),e.TgZ(43,"app-button",50),e.NdJ("clickEvent",function(){const i=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.removeItem(i))}),e.qZA(),e.TgZ(44,"mat-checkbox",51),e.NdJ("change",function(n){const s=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.calculateWorkOrderSum(s,n.checked))}),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.YNc(47,me,3,8,"mat-checkbox",52),e.YNc(48,pe,5,10,"mat-form-field",53),e.qZA()()}if(2&o){const t=l.index,r=e.MAs(9),n=e.oxw(2);let i;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(5,47,"description")," "),e.xp6(2),e.Q6J("matAutocomplete",r)("matTooltip",null==(i=n.getDescription(t))?null:i.value),e.xp6(4),e.Q6J("ngForOf",e.lcZ(11,49,n.getFilteredOptions(t))),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(15,51,"uom")," "),e.xp6(3),e.Q6J("ngForOf",n.uomOptions),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(21,53,"widthMM")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(26,55,"heightMM")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(31,57,"quantity")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(36,59,"sum")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(41,61,"note")," "),e.xp6(3),e.Q6J("iconName","minus")("isTransparentMode",!0),e.xp6(1),e.Q6J("color","primary")("checked",!0),e.xp6(1),e.Oqu(e.lcZ(46,63,"consMeas")),e.xp6(2),e.Q6J("ngIf",!n.sumForGrindingsItems[t].isCalculated),e.xp6(1),e.Q6J("ngIf",n.sumForGrindingsItems[t].isCalculated)}}function ge(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-button",57),e.NdJ("clickEvent",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.addSumOfGrindingItems())}),e.ALo(1,"translate"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("iconName","plus")("text",e.lcZ(1,4,"addGrinding")+" ("+t.sumOfGrinding+")")("isTransparentMode",!0)("disabled",!t.isBuyerSelected)}}function fe(o,l){1&o&&(e.TgZ(0,"div",61)(1,"div",62),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",63),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sumMeter2")),e.xp6(3),e.Oqu(e.lcZ(6,4,"quantity")))}function he(o,l){if(1&o&&(e.TgZ(0,"div",64)(1,"div",62),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"div",63),e._uU(5),e.ALo(6,"number"),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(e.Dn7(3,2,t.sumMeter2,"1.2-2","de")),e.xp6(3),e.hij(" ",e.Dn7(6,6,t.sumMeter2Quantity,"1.2-2","de")," ")}}function Ce(o,l){1&o&&(e.TgZ(0,"div",61)(1,"div",62),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",63),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"sumMeter")),e.xp6(3),e.Oqu(e.lcZ(6,4,"quantity")))}function Oe(o,l){if(1&o&&(e.TgZ(0,"div",64)(1,"div",62),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"div",63),e._uU(5),e.ALo(6,"number"),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(e.Dn7(3,2,t.sumMeter,"1.2-2","de")),e.xp6(3),e.hij(" ",e.Dn7(6,6,t.sumMeterQuantity,"1.2-2","de")," ")}}function xe(o,l){1&o&&(e.TgZ(0,"div",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sumPieces")," "))}function ve(o,l){if(1&o&&(e.TgZ(0,"div",64),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.Dn7(2,1,t.sumPieces,"1.2-2","de")," ")}}function ke(o,l){1&o&&(e.TgZ(0,"div",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sumHours")," "))}function be(o,l){if(1&o&&(e.TgZ(0,"div",64),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.Dn7(2,1,t.sumHours,"1.2-2","de")," ")}}function Me(o,l){1&o&&(e.TgZ(0,"div",61),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sumKilogrames")," "))}function ye(o,l){if(1&o&&(e.TgZ(0,"div",64),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.Dn7(2,1,t.sumKilogrames,"1.2-2","de")," ")}}function we(o,l){if(1&o&&(e.TgZ(0,"div",58),e.YNc(1,fe,7,6,"div",59),e.YNc(2,he,7,10,"div",60),e.YNc(3,Ce,7,6,"div",59),e.YNc(4,Oe,7,10,"div",60),e.YNc(5,xe,3,3,"div",59),e.YNc(6,ve,3,5,"div",60),e.YNc(7,ke,3,3,"div",59),e.YNc(8,be,3,5,"div",60),e.YNc(9,Me,3,3,"div",59),e.YNc(10,ye,3,5,"div",60),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.sumMeter2>0),e.xp6(1),e.Q6J("ngIf",t.sumMeter2>0),e.xp6(1),e.Q6J("ngIf",t.sumMeter>0),e.xp6(1),e.Q6J("ngIf",t.sumMeter>0),e.xp6(1),e.Q6J("ngIf",t.sumPieces>0),e.xp6(1),e.Q6J("ngIf",t.sumPieces>0),e.xp6(1),e.Q6J("ngIf",t.sumHours>0),e.xp6(1),e.Q6J("ngIf",t.sumHours>0),e.xp6(1),e.Q6J("ngIf",t.sumKilogrames>0),e.xp6(1),e.Q6J("ngIf",t.sumKilogrames>0)}}const Ee=function(o){return{"background-image":o}};function Ze(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",65)(1,"div",66)(2,"app-button",67),e.NdJ("clickEvent",function(){const i=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.uploadFile(i))}),e.qZA(),e.TgZ(3,"input",68,69),e.NdJ("change",function(n){const s=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.onFileSelected(n,s))}),e.qZA(),e.TgZ(5,"mat-form-field")(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"input",70),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.description=n)}),e.qZA()(),e.TgZ(10,"app-button",67),e.NdJ("clickEvent",function(){const i=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.removeImage(i))}),e.qZA()(),e._UZ(11,"div",71),e.qZA()}if(2&o){const t=l.$implicit;e.xp6(2),e.Q6J("iconName","upload")("isTransparentMode",!0),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(8,12,"description")," "),e.xp6(2),e.Q6J("ngModel",t.description)("ngModelOptions",e.DdM(14,k)),e.xp6(1),e.Q6J("iconName","minus")("isTransparentMode",!0),e.xp6(1),e.Q6J("ngStyle",e.VKq(15,Ee,"url("+t.fullUrl+")"))}}function Ae(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"form",5)(1,"div",6)(2,"mat-form-field")(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"input",7),e.NdJ("keypress",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.onKeypress(n,"number"))}),e.qZA()(),e.TgZ(7,"app-button",8),e.NdJ("clickEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.setWorkOrderNumber())}),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",6)(10,"mat-form-field")(11,"mat-label"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"mat-select",9),e.NdJ("valueChange",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.buyerChanged())})("infiniteScroll",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.bottomReachedHandlerBuyers())})("selectionChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.selectBuyer(n))}),e.TgZ(15,"mat-option"),e._UZ(16,"ngx-mat-select-search",10),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"async"),e.qZA(),e.YNc(20,ee,2,2,"mat-option",11),e.YNc(21,re,2,1,"ng-container",12),e.ALo(22,"async"),e.qZA()(),e.YNc(23,ne,3,7,"mat-checkbox",13),e.YNc(24,ce,9,13,"mat-form-field",14),e.YNc(25,le,1,2,"app-button",15),e.qZA(),e.TgZ(26,"div",6)(27,"mat-form-field")(28,"mat-label"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"input",16),e.NdJ("keypress",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.onKeypress(n,"forPerson"))}),e.qZA()(),e.TgZ(32,"mat-form-field")(33,"mat-label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"input",17),e.NdJ("keypress",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.onKeypress(n,"description"))}),e.qZA()()(),e.TgZ(37,"div",6)(38,"mat-form-field")(39,"mat-label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"input",18),e.NdJ("keypress",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.onKeypress(n,"dateOfCreate"))}),e.qZA()(),e.TgZ(43,"mat-form-field")(44,"mat-label"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"input",19),e.NdJ("keypress",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.onKeypress(n,"placeOfIssue"))}),e.qZA()()(),e.TgZ(48,"div",20),e.YNc(49,_e,49,65,"div",21),e.qZA(),e.TgZ(50,"div",22)(51,"div",23)(52,"app-button",24),e.NdJ("clickEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addNewItem())}),e.ALo(53,"translate"),e.qZA(),e.YNc(54,ge,2,6,"app-button",25),e.qZA(),e.YNc(55,we,11,10,"div",26),e.qZA(),e.TgZ(56,"div",6)(57,"mat-form-field",27)(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"textarea",28),e.NdJ("keypress",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.onKeypress(n,"note"))}),e.qZA()()(),e.TgZ(62,"div",29),e.YNc(63,Ze,12,17,"div",30),e.qZA(),e.TgZ(64,"app-button",31),e.NdJ("clickEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addNewImage())}),e.ALo(65,"translate"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.formGroup),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(5,61,"numberOfWorkOrder")," "),e.xp6(3),e.Q6J("isTransparentMode",!0)("text",e.lcZ(8,63,"createNumber")),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(13,65,"buyer")," "),e.xp6(2),e.Q6J("compareWith",t.compareFn)("disabled",t.isEdit)("matTooltip",(null==t.selectedBuyer?null:t.selectedBuyer.name)||""),e.xp6(2),e.s9C("placeholderLabel",e.lcZ(17,67,"searchFor")),e.s9C("noEntriesFoundLabel",e.lcZ(18,69,"noResults")),e.Q6J("formControl",t.searchControl)("hideClearSearchButton",!0)("clearSearchInput",!0)("searching",e.lcZ(19,71,t.isLoading)||!1)("disableScrollToActiveOnOptionsChanged",!0),e.xp6(4),e.Q6J("ngIf",t.selectedBuyer),e.xp6(1),e.Q6J("ngForOf",e.lcZ(22,73,t.buyersEntities)),e.xp6(2),e.Q6J("ngIf",t.isEdit),e.xp6(1),e.Q6J("ngIf",t.isEdit&&t.allowChangeBuyer),e.xp6(1),e.Q6J("ngIf",!t.isEdit),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(30,75,"forNeedsOf")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(35,77,"description")," "),e.xp6(5),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(41,79,"dateOfCreate")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(46,81,"placeOfIssue")," "),e.xp6(4),e.Q6J("ngForOf",t.workOrderItemsFormArr.controls),e.xp6(3),e.Q6J("iconName","plus")("text",e.lcZ(53,83,"addNewItem"))("disabled",!t.isBuyerSelected),e.xp6(2),e.Q6J("ngIf",t.sumOfGrinding>0),e.xp6(1),e.Q6J("ngIf",t.sumMeter2>0||t.sumMeter>0||t.sumPieces>0||t.sumHours>0||t.sumKilogrames>0),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(60,85,"note")," "),e.xp6(4),e.Q6J("ngForOf",t.workOrderImages),e.xp6(1),e.Q6J("text",e.lcZ(65,87,"addImage"))}}function Te(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-button",74),e.NdJ("clickEvent",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.handleSubmitButton(!0))}),e.ALo(1,"translate"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("text",e.lcZ(1,2,"saveAndCreateInvoice"))("disabled",!t.formGroup.dirty||t.formGroup.invalid)}}function Ie(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",72)(1,"div",1)(2,"app-button",73),e.NdJ("clickEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancel())}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",1)(5,"app-button",74),e.NdJ("clickEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.handleSubmitButton())}),e.ALo(6,"translate"),e.qZA(),e.YNc(7,Te,2,4,"app-button",75),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("text",e.lcZ(3,4,"cancel")),e.xp6(3),e.Q6J("text",e.lcZ(6,6,"save"))("disabled",!t.formGroup.dirty||t.formGroup.invalid),e.xp6(2),e.Q6J("ngIf",!t.isEdit)}}const Pe=[{path:"",component:(()=>{class o{constructor(t,r,n,i,s,d,q,x,Le,De,Ke,Be,Ue,He){this.router=t,this.route=r,this.globalService=n,this.listEntities=i,this.listEntitiesOnChange=s,this.buyerCreateEditPopupService=d,this.buyerWebService=q,this.translateService=x,this.settingsStoreService=Le,this.webService=De,this.imageWebService=Ke,this.el=Be,this.sweetAlertService=Ue,this.authStoreService=He,this.subs=new F.L,this.workOrderOID=null,this.isEdit=!1,this.uomOptions=m.pM,this.workOrderItemsOptions=[],this.filteredOptions=[],this.buyersEntities=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.searchControl=new a.p4,this.compareFn=C.nt,this.sumMeter2=0,this.sumMeter2Quantity=0,this.sumMeter=0,this.sumMeterQuantity=0,this.sumPieces=0,this.sumHours=0,this.sumKilogrames=0,this.workOrderImages=[],this.sumOfGrinding=0,this.sumForGrindingsItems=[],this.allowChangeBuyer=!1,this.buyersEntitiesOnChange=this.listEntities.entities,this.isLoadingOnChange=this.listEntities.isLoading,this.searchControlOnChange=new a.p4,this.debounceTime=500}getDescription(t){return this.workOrderItemsFormArr.controls[t].get("description")}getUOM(t){return this.workOrderItemsFormArr.controls[t].get("uom")}getDimension1(t){return this.workOrderItemsFormArr.controls[t].get("dimension1")}getDimension2(t){return this.workOrderItemsFormArr.controls[t].get("dimension2")}getQuantity(t){return this.workOrderItemsFormArr.controls[t].get("quantity")}getSumQuantity(t){return this.workOrderItemsFormArr.controls[t].get("sumQuantity")}ngOnInit(){this.workOrderOID=this.route.snapshot.paramMap.get("workOrderOID"),this.subs.sink=this.webService.getAllWorkOrderItemDescriptions().subscribe(t=>{this.workOrderItemsOptions=t}),this.subs.sink=this.listEntities.setWebService(this.buyerWebService).requestFirstPage(),this.subs.sink=this.settingsStoreService.dataLoaded$.subscribe(t=>{t&&(this.settings=this.settingsStoreService.getSettings(),this.isEdit=!!this.workOrderOID,this.isEdit&&this.workOrderOID?this.webService.getEntityByOid(this.workOrderOID).subscribe(r=>{this.workOrder=r,this.initializeEdit()}):this.initializeCreate(),this.isBuyerSelected=this.isEdit||!1)}),this.inputSearchControlSubscription=this.searchControl.valueChanges.pipe((0,A.b)(this.debounceTime)).subscribe(()=>{this.searchHandler(this.searchControl.value)}),this.inputSearchControlOnChangeSubscription=this.searchControlOnChange.valueChanges.pipe((0,A.b)(this.debounceTime)).subscribe(()=>{this.searchHandlerOnChange(this.searchControlOnChange.value)})}hasPrivilege(t){return this.authStoreService.isAllowed(t)}initializeCreate(){this.formGroup=new a.nJ({number:new a.p4(0,[a.kI.required]),buyer:new a.p4("",[a.kI.required]),dateOfCreate:new a.p4((new Date).toISOString().substring(0,10),[a.kI.required]),placeOfIssue:new a.p4(this.settings?.workOrderPlaceOfIssue||"",[a.kI.required]),forPerson:new a.p4(""),description:new a.p4(""),note:new a.p4(""),workOrderItems:new a.vC([])}),this.setWorkOrderNumber()}initializeEdit(){this.selectedBuyer=this.workOrder.buyer,this.formGroup=new a.nJ({number:new a.p4(this.workOrder.number,[a.kI.required]),buyer:new a.p4(this.selectedBuyer,[a.kI.required]),dateOfCreate:new a.p4(this.workOrder.dateOfCreate,[a.kI.required]),placeOfIssue:new a.p4(this.workOrder.placeOfIssue,[a.kI.required]),forPerson:new a.p4(this.workOrder.forPerson,[]),description:new a.p4(this.workOrder.description,[]),note:new a.p4(this.workOrder.note,[]),workOrderItems:new a.vC([])}),this.workOrder.workOrderItems.forEach((t,r)=>this.addNewItem(t)),this.workOrder.images.forEach((t,r)=>this.addNewImage(t))}get workOrderItemsFormArr(){return this.formGroup.get("workOrderItems")}addNewItem(t){this.workOrderItemsFormArr.push(new a.nJ({oid:new a.p4(t?.oid||""),description:new a.p4(t?.description||"",[a.kI.required]),uom:new a.p4(t?.uom||this.uomOptions[0].value,[a.kI.required]),dimension1:new a.p4(t?.dimension1||0),dimension2:new a.p4(t?.dimension2||0),quantity:new a.p4(t?.quantity||0),sumQuantity:new a.p4(t?.sumQuantity||0,[a.kI.required]),note:new a.p4(t?.note||"")})),setTimeout(()=>{const r=this.getDescription(this.workOrderItemsFormArr.length-1)?.valueChanges.pipe((0,J.O)(""),(0,Q.U)(n=>this._filter(n||"")));this.filteredOptions.push(r)}),this.calculateSum(),this.sumForGrindingsItems.push({isCalculated:"M2"===t?.uom&&t?.description.includes("kp obrad")||!1,value:0})}removeItem(t){this.workOrderItemsFormArr.removeAt(t),this.calculateSum(),this.formGroup.markAsDirty(),this.sumForGrindingsItems.splice(t,1),this.calculateWorkOrderSumOfGrinding()}calculateWorkOrderSum(t,r=!0){switch(this.getUOM(t)?.value){case"M2":const n=(r?(0,C.ZB)(1*this.getDimension1(t)?.value/10,this.settings?.constructionMeasureCM):1*this.getDimension1(t)?.value/10)*(r?(0,C.ZB)(1*this.getDimension2(t)?.value/10,this.settings?.constructionMeasureCM):1*this.getDimension2(t)?.value/10)/1e4;this.getSumQuantity(t)?.setValue(this.getDescription(t)?.value.toLowerCase().includes("termoizolaciono")&&n<(this.settings?.termoizolacGlassMinArea||.2)?(0,C.wz)((this.settings?.termoizolacGlassMinArea||.2)*(1*this.getQuantity(t)?.value),3):(0,C.wz)(n*this.getQuantity(t)?.value*1,3));break;case"M":const i=(1*this.getDimension1(t)?.value/10*2/100+1*this.getDimension2(t)?.value/10*2/100)*(1*this.getQuantity(t)?.value);this.getSumQuantity(t)?.setValue((0,C.wz)(i,3))}this.calculateSum()}calculateSum(){this.sumMeter2=0,this.sumMeter2Quantity=0,this.sumMeter=0,this.sumMeterQuantity=0,this.sumPieces=0,this.sumHours=0,this.sumKilogrames=0,this.workOrderItemsFormArr.controls.forEach((t,r)=>{switch(this.getUOM(r)?.value){case"M2":this.sumMeter2+=1*this.getSumQuantity(r)?.value,this.sumMeter2Quantity+=1*this.getQuantity(r)?.value;break;case"M":this.sumMeter+=1*this.getSumQuantity(r)?.value,this.sumMeterQuantity+=1*this.getQuantity(r)?.value;break;case"PCS":this.sumPieces+=1*this.getSumQuantity(r)?.value;break;case"HOUR":this.sumHours+=1*this.getSumQuantity(r)?.value;break;case"KG":this.sumKilogrames+=1*this.getSumQuantity(r)?.value}})}uomChanged(t,r){"PCS"===t||"HOUR"===t||"KG"===t?(this.getDimension1(r)?.setValue(0),this.getDimension1(r)?.disable(),this.getDimension2(r)?.setValue(0),this.getDimension2(r)?.disable(),this.getQuantity(r)?.setValue(0),this.getQuantity(r)?.disable(),setTimeout(()=>{this.setFocusOn("sumQuantity",r,!0)})):(this.getDimension1(r)?.enable(),this.getDimension2(r)?.enable(),this.getQuantity(r)?.enable(),setTimeout(()=>{this.setFocusOn("dimension1",r,!0)})),this.getSumQuantity(r),this.calculateSum()}setWorkOrderNumber(){this.webService.getNextWorkOrderNumber(this.formGroup.get("dateOfCreate")?.value).subscribe(t=>{this.formGroup.get("number")?.setValue(t)})}buyerChanged(){setTimeout(()=>{this.isBuyerSelected=this.formGroup.get("buyer")?.value,0===this.workOrderItemsFormArr.controls.length&&this.addNewItem(),this.setFocusOn("forPerson")})}bottomReachedHandlerBuyers(){this.listEntities.requestNextPage()}bottomReachedHandlerBuyersOnChange(){this.listEntitiesOnChange.requestNextPage()}selectBuyer(t){t&&t.value&&(this.selectedBuyer=t.value)}selectBuyerOnChange(t){if(t&&t.value){this.selectedBuyerOnChange=t.value,this.subs.sink.$markWorkOrder=this.sweetAlertService.getDataBackFromSweetAlert().subscribe(n=>{n&&n.confirmed&&this.workOrderOID&&this.selectedBuyerOnChange?.oid&&(this.subs.sink=this.webService.changeBuyer(this.workOrderOID,this.selectedBuyerOnChange?.oid).subscribe(i=>{i&&(this.globalService.showBasicAlert(p.I.success,this.translateService.instant("successfully"),this.translateService.instant("workOrderIsSuccessfullyUpdated")),window.location.reload())}))});const r={mode:"warning",icon:"alert-triangle",type:{name:U.N.submit,buttons:{submit:this.translateService.instant("change"),cancel:this.translateService.instant("cancel")}},title:this.translateService.instant("changeBuyer"),message:this.translateService.instant("areYouSureYouWantToAllowChangeOfBuyerWithAllConsequencesWorkOrder")};this.sweetAlertService.openMeSweetAlert(r)}}searchHandler(t){let r=new v.h;r.criteriaQuick=t,this.listEntities.setFilter(r)}searchHandlerOnChange(t){let r=new v.h;r.criteriaQuick=t,this.listEntitiesOnChange.setFilter(r)}createBuyer(){this.buyerCreateEditPopupService.openDialog().subscribe(t=>{t&&this.listEntities.requestFirstPage()})}cancel(){this.router.navigate(["/"])}handleSubmitButton(t=!1){const r=new FormData;let n=!1;const i=this.formGroup.value;i.images=[],this.workOrderImages.forEach(s=>{s.file?(r.append("files",s.file),n=!0,i.images.push({oid:"",url:"",description:s.description||""})):s.oid&&i.images.push({oid:s.oid,url:s.url,description:s.description})}),n?this.subs.sink=this.imageWebService.upload(r).subscribe(s=>{s.forEach((d,q)=>{for(let x=0;x<i.images.length;x++)if(""===i.images[x].url){i.images[x].url=d;break}}),this.submit(t,i)}):this.submit(t,i)}submit(t,r){this.isEdit&&this.workOrderOID?this.webService.updateEntity(this.workOrderOID,r).subscribe(n=>{n&&this.globalService.showBasicAlert(p.I.success,this.translateService.instant("successfully"),this.translateService.instant("workOrderIsSuccessfullyUpdated"))}):this.createWorkOrderRequest(t,r)}createWorkOrderRequest(t,r){this.subs.sink=this.webService.createEntity(r).subscribe(n=>{n&&(this.globalService.showBasicAlert(p.I.success,this.translateService.instant("successfully"),this.translateService.instant("newWorkOrderIsSuccessfullyCreated")),window.open("#/print/work-order-view/"+n.oid),t?this.router.navigate(["invoices","create"],{queryParams:{workOrderOID:n.oid}}):location.reload())})}openedToggleOnUomSelect(t,r){!t&&this.getUOM(r)?.value&&this.uomChanged(this.getUOM(r)?.value,r)}onKeypress(t,r,n=-1){if("Enter"===t.key)switch(t.preventDefault(),r){case"number":this.setFocusOn("buyer");break;case"forPerson":this.setFocusOn("description");break;case"description":n<0?this.setFocusOn("dateOfCreate",0,!0):this.setFocusOn("uom",n);break;case"dateOfCreate":this.setFocusOn("placeOfIssue",0,!0);break;case"placeOfIssue":this.setFocusOn("description",n+2,!0);break;case"dimension1":this.setFocusOn("dimension2",n,!0);break;case"dimension2":this.setFocusOn("quantity",n,!0);break;case"quantity":this.setFocusOn("sumQuantity",n,!0);break;case"sumQuantity":this.setFocusOn("note",n,!0);break;case"note":n>=0&&!this.workOrderItemsFormArr.controls[n+1]?.value&&this.addNewItem(this.workOrderItemsFormArr.controls[n].value),setTimeout(()=>{this.setFocusOn("description",n+2,!0)})}}setFocusOn(t,r=0,n=!1){const i=this.el.nativeElement.querySelectorAll('[formcontrolname="'+t+'"]')[r<0?0:r];i?.focus(),n&&i.select()}_filter(t){const r=t.toLowerCase();return this.workOrderItemsOptions.filter(n=>n.toLowerCase().includes(r))}getFilteredOptions(t){return this.filteredOptions[t]}onFileSelected(t,r){const n=t.target.files[0];if(n){this.workOrderImages[r].file=n;const i=URL.createObjectURL(n);this.workOrderImages[r].oid="",this.workOrderImages[r].url=i,this.workOrderImages[r].fullUrl=i}this.formGroup.markAsDirty()}addNewImage(t){this.workOrderImages.push({oid:t?.oid||"",url:t?.url||"",fullUrl:t?.url?(0,C.Er)(t.url):"",description:t?.description||"",file:void 0})}removeImage(t){this.workOrderImages.splice(t,1),this.formGroup.markAsDirty()}uploadFile(t){this.fileCtrls.get(t)?.nativeElement.click()}addSumOfGrindingItems(){this.addNewItem({oid:"",description:this.translateService.instant("grinding"),uom:"M",dimension1:0,dimension2:0,dimension3:0,quantity:this.sumOfGrinding,sumQuantity:this.sumOfGrinding,note:"",settled:!1}),this.sumOfGrinding=0}calculateWorkOrderSumOfGrinding(){this.sumOfGrinding=0;let t=0;this.sumForGrindingsItems.forEach(r=>{r.isCalculated&&(t+=Number(r.value))}),this.sumOfGrinding=t/1e3}calculateGrindingLengthForItem(t){const r=(2*this.getDimension1(t)?.value+2*this.getDimension2(t)?.value)*this.getQuantity(t)?.value+0;this.sumForGrindingsItems[t].value=r,this.calculateWorkOrderSumOfGrinding()}switchOnCalcBasedOnDescription(t){this.getDescription(t)?.value.toLowerCase().includes("kp obrad")&&(this.sumForGrindingsItems[t].isCalculated=!0)}ngOnDestroy(){this.inputSearchControlSubscription.unsubscribe(),this.inputSearchControlOnChangeSubscription.unsubscribe(),this.subs.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.F0),e.Y36(f.gz),e.Y36(H.U),e.Y36(h.y),e.Y36(h.y),e.Y36(u.X),e.Y36(E.e),e.Y36(b.sK),e.Y36(j.G),e.Y36(Z.o),e.Y36(T),e.Y36(e.SBq),e.Y36(Y.T),e.Y36(R.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-work-order-create-edit"]],viewQuery:function(t,r){if(1&t&&e.Gf(X,5),2&t){let n;e.iGM(n=e.CRH())&&(r.fileCtrls=n)}},inputs:{debounceTime:"debounceTime"},features:[e._Bn([Z.o,u.X,E.e,h.y,T])],decls:8,vars:5,consts:[[1,"wrapper"],[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],["class","button-section",4,"ngIf"],[1,"form",3,"formGroup"],[1,"row"],["type","text","appDecimal","","matInput","","formControlName","number",3,"keypress"],[1,"bottom-padding",3,"isTransparentMode","text","clickEvent"],["formControlName","buyer","msInfiniteScroll","",3,"compareWith","disabled","matTooltip","valueChange","infiniteScroll","selectionChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel","hideClearSearchButton","clearSearchInput","searching","disableScrollToActiveOnOptionsChanged"],[3,"value",4,"ngIf"],[4,"ngFor","ngForOf"],["class","create-buyer-button",3,"color","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[4,"ngIf"],["class","create-buyer-button","class","bottom-padding",3,"iconName","disabled","clickEvent",4,"ngIf"],["type","text","matInput","","formControlName","forPerson",3,"keypress"],["type","text","matInput","","formControlName","description",3,"keypress"],["type","date","matInput","","formControlName","dateOfCreate",3,"keypress"],["type","text","matInput","","formControlName","placeOfIssue",3,"keypress"],["formArrayName","workOrderItems",1,"work-order-items"],["class","work-order-item",4,"ngFor","ngForOf"],[1,"row","full-width","bottom-margin"],[1,"items-buttons"],[1,"big-button",3,"iconName","text","disabled","clickEvent"],["class","big-button",3,"iconName","text","isTransparentMode","disabled","clickEvent",4,"ngIf"],["class","sum-info",4,"ngIf"],[1,"text-area"],["matInput","","formControlName","note","rows","3",3,"keypress"],[1,"images"],["class","image",4,"ngFor","ngForOf"],[1,"add-image-button",3,"text","clickEvent"],[3,"value"],[1,"create-buyer-button",3,"color","ngModel","ngModelOptions","ngModelChange"],["msInfiniteScroll","",3,"compareWith","infiniteScroll","selectionChange"],[1,"bottom-padding",3,"iconName","disabled","clickEvent"],[1,"work-order-item"],[1,"form-group",3,"formGroupName"],[1,"full-width"],["type","text","matInput","","formControlName","description",3,"matAutocomplete","matTooltip","keydown.enter","keypress","change"],["trigger","matAutocompleteTrigger"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"number-field"],["formControlName","uom",1,"color-black",3,"focusout","openedChange"],["type","text","appDecimal","","matInput","","formControlName","dimension1",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","dimension2",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","quantity",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","sumQuantity",3,"keypress","change"],["type","text","matInput","","formControlName","note",3,"keypress"],[1,"additional-button",3,"iconName","isTransparentMode","clickEvent"],[1,"cons-measure-checkbox",3,"color","checked","change"],["class","cons-measure-checkbox",3,"color","ngModel","ngModelOptions","disabled","ngModelChange","change",4,"ngIf"],["class","small-number-input",4,"ngIf"],[1,"cons-measure-checkbox",3,"color","ngModel","ngModelOptions","disabled","ngModelChange","change"],[1,"small-number-input"],["type","text","matInput","","appDecimal","",3,"ngModel","ngModelOptions","ngModelChange","change"],[1,"big-button",3,"iconName","text","isTransparentMode","disabled","clickEvent"],[1,"sum-info"],["class","key",4,"ngIf"],["class","value",4,"ngIf"],[1,"key"],[1,"value1"],[1,"value2"],[1,"value"],[1,"image"],[1,"button-container"],[3,"iconName","isTransparentMode","clickEvent"],["type","file","hidden","",3,"change"],["fileCtrl",""],["type","text","matInput","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"image-preview",3,"ngStyle"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"],["class","update",3,"text","disabled","clickEvent",4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.YNc(6,Ae,66,89,"form",3),e.YNc(7,Ie,8,8,"div",4),e.qZA()()),2&t&&(e.xp6(4),e.hij(" ",e.lcZ(5,3,r.isEdit?"editWorkOrder":"createWorkOrder")," "),e.xp6(2),e.Q6J("ngIf",r.formGroup),e.xp6(1),e.Q6J("ngIf",r.formGroup))},dependencies:[_.sg,_.O5,_.PC,z.r,a._Y,a.Fj,a.JJ,a.JL,a.oH,a.sg,a.u,a.x0,a.CE,a.On,M.KE,M.hX,I.Nt,P.gD,$.ey,W.nu,S.s,N.oG,V.U,y.XC,y.ZL,G.gM,_.Ov,_.JJ,b.X$],styles:[".wrapper[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 50px);overflow-y:auto}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:column;margin-top:20px;display:flex;width:100%;color:var(--color-black)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .create-buyer-button[_ngcontent-%COMP%]{margin:10px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .items-buttons[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .items-buttons[_ngcontent-%COMP%]   .big-button[_ngcontent-%COMP%]{margin-right:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-padding[_ngcontent-%COMP%]{display:flex;align-items:center;padding-bottom:1.34375em;margin-left:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row.full-width[_ngcontent-%COMP%]{justify-content:space-between}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .sum-info[_ngcontent-%COMP%]{display:flex;border:2px solid var(--color-main-dark)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .sum-info[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:130px;align-items:center;justify-content:space-evenly;border-right:1px dotted var(--color-main-dark);font-weight:600}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .sum-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:100px;padding-right:10px;align-items:flex-end;justify-content:space-evenly;border-right:2px solid var(--color-main-dark)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]{min-width:400px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row.bottom-margin[_ngcontent-%COMP%]{margin-bottom:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .work-order-items[_ngcontent-%COMP%]   .work-order-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .work-order-items[_ngcontent-%COMP%]   .work-order-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex-grow:1}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .work-order-items[_ngcontent-%COMP%]   .work-order-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .number-field[_ngcontent-%COMP%]{flex-shrink:1;max-width:100px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .work-order-items[_ngcontent-%COMP%]   .work-order-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .additional-button[_ngcontent-%COMP%]{margin:10px 5px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .add-image-button[_ngcontent-%COMP%]{margin-bottom:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:60px;flex-direction:row;align-items:center;justify-content:space-between}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{margin-right:20px}.cons-measure-checkbox[_ngcontent-%COMP%]{margin-top:15px}.images[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid var(--color-main-light);margin:10px}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:space-evenly;border-bottom:1px dotted var(--color-main-light)}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{margin-top:10px}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{height:400px;width:400px;background-position:center;background-size:contain;background-repeat:no-repeat}.display-none[_ngcontent-%COMP%]{display:none}.small-number-input[_ngcontent-%COMP%]{width:70px}"]}),o})(),canActivate:[g.Y],data:{permission:"WORK_ORDER_CREATE"}}];let We=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(Pe),f.Bz]}),o})();var Se=c(2024),Ne=c(7707),Ge=c(7331),qe=c(4494),Fe=c(7392),Je=c(7012);let Qe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[_.ez,We,b.aw,Se.h,Ne.R,a.UX,a.u5,I.c,M.lN,P.LD,Ge.Hi,qe.p,Fe.Ps,W.Co,S.I,N.p9,Je.o,y.Bb,G.AV]}),o})()},3336:(w,O,c)=>{c.d(O,{U:()=>f});var _=c(4650);let f=(()=>{class g{constructor(u){this.el=u}keyup(){this.validateNumber(this.el.nativeElement.value)}validateNumber(u){u=u.replace(/[^\d,.-]/g,"");let p=-1;for(let m=0;m<u.length;m++)if("."===u.charAt(m)||","===u.charAt(m)){p=m;break}u=(u=u.replaceAll(".","")).replaceAll(",",""),0===p?u="0."+u:p>0&&(u=u.substring(0,p)+"."+(u.length>p?u.substring(p):"")),this.el.nativeElement.value=u}}return g.\u0275fac=function(u){return new(u||g)(_.Y36(_.SBq))},g.\u0275dir=_.lG2({type:g,selectors:[["","appDecimal",""]],hostBindings:function(u,p){1&u&&_.NdJ("keyup",function(){return p.keyup()})}}),g})()},7379:(w,O,c)=>{c.d(O,{e:()=>p});var _=c(4292),f=c(136),g=c(3749),a=c(4650),u=c(3164);let p=(()=>{class m extends _.h{constructor(h){super(h,g.w,f.Hz),this.baseWebService=h}}return m.\u0275fac=function(h){return new(h||m)(a.LFG(u.I))},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac}),m})()}}]);