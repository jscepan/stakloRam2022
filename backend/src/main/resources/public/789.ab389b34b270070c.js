"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[789],{6789:(I,g,i)=>{i.d(g,{r:()=>Y});var d=i(5412),y=i(6498),o=i(4006),f=i(13),h=i(4794),v=i(287),e=i(5595),E=i(4463),l=i(2134),S=i(4068),Z=i(29),x=i(5986),t=i(4650),P=i(8794),A=i(8490),M=i(8933),c=i(6895),_=i(42),r=i(9549),m=i(4144),p=i(3238),b=i(4385),T=i(4603),L=i(3231);function D(s,C){if(1&s&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&s){const n=t.oxw(3);t.Q6J("value",n.selectedCountry),t.xp6(1),t.Oqu(n.selectedCountry.description)}}function G(s,C){if(1&s&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&s){const n=t.oxw().$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.description," ")}}function J(s,C){if(1&s&&(t.ynx(0),t.YNc(1,G,2,2,"mat-option",13),t.BQk()),2&s){const n=C.$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",(null==a.selectedCountry?null:a.selectedCountry.oid)!==n.oid)}}function w(s,C){if(1&s){const n=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-select",11),t.NdJ("infiniteScroll",function(){t.CHM(n);const u=t.oxw(2);return t.KtG(u.bottomReachedHandler())})("selectionChange",function(u){t.CHM(n);const O=t.oxw(2);return t.KtG(O.selectCountry(u))}),t.TgZ(5,"mat-option"),t._UZ(6,"ngx-mat-select-search",12),t.ALo(7,"translate"),t.ALo(8,"translate"),t.ALo(9,"async"),t.qZA(),t.YNc(10,D,2,2,"mat-option",13),t.YNc(11,J,2,1,"ng-container",14),t.ALo(12,"async"),t.qZA()()}if(2&s){const n=t.oxw(2);t.xp6(1),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(3,15,"country")," "),t.xp6(2),t.Q6J("compareWith",n.compareFn),t.xp6(2),t.s9C("placeholderLabel",t.lcZ(7,17,"searchFor")),t.s9C("noEntriesFoundLabel",t.lcZ(8,19,"noResults")),t.Q6J("formControl",n.searchControl)("hideClearSearchButton",!0)("clearSearchInput",!1)("searching",t.lcZ(9,21,n.isLoading)||!1)("disableScrollToActiveOnOptionsChanged",!0),t.xp6(4),t.Q6J("ngIf",n.selectedCountry),t.xp6(1),t.Q6J("ngForOf",t.lcZ(12,23,n.countries))}}function U(s,C){if(1&s){const n=t.EpF();t.TgZ(0,"form",3)(1,"mat-form-field")(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.YNc(11,w,13,25,"mat-form-field",6),t.TgZ(12,"app-button",7),t.NdJ("clickEvent",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.createCountry())}),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",8)(15,"app-button",9),t.NdJ("clickEvent",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.cancel())}),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"app-button",10),t.NdJ("clickEvent",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.handleSubmitButton())}),t.ALo(18,"translate"),t.qZA()()()}if(2&s){const n=t.oxw();t.Q6J("formGroup",n.formGroup),t.xp6(2),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(4,18,"zipCode")," "),t.xp6(4),t.ekj("mark-required",!0)("mark-opt-required",!0),t.xp6(1),t.hij(" ",t.lcZ(9,20,"name")," "),t.xp6(3),t.Q6J("ngIf",n.countryControl),t.xp6(1),t.Q6J("text",t.lcZ(13,22,"createCountry"))("color","secondary")("disabled",!n.hasPrivilege("COUNTRY_CREATE")),t.xp6(3),t.Q6J("text",t.lcZ(16,24,"cancel")),t.xp6(2),t.Q6J("text",t.lcZ(18,26,"save"))("disabled",n.isEdit&&!n.formGroup.dirty||n.formGroup.invalid)}}let F=(()=>{class s{constructor(n,a,u,O,N,B,R,W,K){this.dialogRef=n,this.data=a,this.globalService=u,this.countryCreateEditPopupService=O,this.webService=N,this.countryWebService=B,this.translateService=R,this.listEntities=W,this.authStoreService=K,this.subs=new E.L,this.isEdit=!1,this.countries=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.compareFn=l.nt,this.searchControl=new o.p4,this.debounceTime=500}get countryControl(){return this.formGroup.get("country")}ngOnInit(){this.isEdit=!!this.data.oid,this.cityOID=this.data.oid,this.subs.sink=this.listEntities.setWebService(this.countryWebService).requestFirstPage(),this.isEdit?this.initializeEdit():this.initializeCreate(),this.inputSearchControlSubscription=this.searchControl.valueChanges.pipe((0,f.b)(this.debounceTime)).subscribe(()=>{this.searchHandler(this.searchControl.value)})}hasPrivilege(n){return this.authStoreService.isAllowed(n)}initializeCreate(){this.formGroup=new o.nJ({zipCode:new o.p4("",[o.kI.required]),name:new o.p4("",[o.kI.required]),country:new o.p4("",[o.kI.required])})}initializeEdit(){this.webService.getEntityByOid(this.cityOID).subscribe(n=>{n&&(this.selectedCountry=n.country,this.formGroup=new o.nJ({zipCode:new o.p4(n.zipCode,[o.kI.required]),name:new o.p4(n.name,[o.kI.required]),country:new o.p4(this.selectedCountry,[o.kI.required])}))})}selectCountry(n){n&&n.value&&(this.selectedCountry=n.value)}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){const n=this.formGroup.value;this.isEdit?this.webService.updateEntity(this.cityOID,n).subscribe(a=>{a&&(this.globalService.showBasicAlert(h.I.success,this.translateService.instant("successfully"),this.translateService.instant("cityIsSuccessfullyUpdated")),this.dialogRef.close(a))}):this.webService.createEntity(n).subscribe(a=>{a&&(this.globalService.showBasicAlert(h.I.success,this.translateService.instant("successfully"),this.translateService.instant("newCityIsSuccessfullyCreated")),this.dialogRef.close(a))})}createCountry(){this.countryCreateEditPopupService.openDialog().subscribe(n=>{n&&this.listEntities.requestFirstPage()})}bottomReachedHandler(){this.listEntities.requestNextPage()}searchHandler(n){let a=new v.h;a.criteriaQuick=n,this.listEntities.setFilter(a)}ngOnDestroy(){this.inputSearchControlSubscription.unsubscribe(),this.subs.unsubscribe()}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(d.so),t.Y36(d.WI),t.Y36(P.U),t.Y36(x.b),t.Y36(S.D),t.Y36(Z.N),t.Y36(A.sK),t.Y36(e.y),t.Y36(M.g))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-city-create-edit"]],features:[t._Bn([S.D,Z.N,x.b,e.y])],decls:6,vars:4,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],[1,"form",3,"formGroup"],["matInput","","formControlName","zipCode"],["matInput","","formControlName","name"],[4,"ngIf"],[1,"create-button",3,"text","color","disabled","clickEvent"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"],["formControlName","country","msInfiniteScroll","",3,"compareWith","infiniteScroll","selectionChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel","hideClearSearchButton","clearSearchInput","searching","disableScrollToActiveOnOptionsChanged"],[3,"value",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,U,19,28,"form",2),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,a.isEdit?"editCity":"createCity")," "),t.xp6(2),t.Q6J("ngIf",a.formGroup))},dependencies:[c.sg,c.O5,_.r,o._Y,o.Fj,o.JJ,o.JL,o.oH,o.sg,o.u,r.KE,r.hX,m.Nt,p.ey,b.gD,T.s,L.nu,c.Ov,A.X$],styles:[".container[_ngcontent-%COMP%]{height:100%;width:100%}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px;align-items:center}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),s})(),Y=(()=>{class s{constructor(n){this._matDialog=n}openDialog(n=""){return new y.y(a=>{const u=new d.vA;u.data={oid:n},this._matDialog.open(F,u).afterClosed().subscribe(O=>{a.next(O),a.complete()},()=>a.error())})}}return s.\u0275fac=function(n){return new(n||s)(t.LFG(d.uw))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})()},5986:(I,g,i)=>{i.d(g,{b:()=>M});var d=i(5412),y=i(6498),o=i(4006),f=i(4794),h=i(4463),v=i(29),e=i(4650),E=i(8794),l=i(8490),S=i(6895),Z=i(42),x=i(9549),t=i(4144);function P(c,_){if(1&c){const r=e.EpF();e.TgZ(0,"form",3)(1,"mat-form-field")(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",4),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.TgZ(11,"div",6)(12,"app-button",7),e.NdJ("clickEvent",function(){e.CHM(r);const p=e.oxw();return e.KtG(p.cancel())}),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"app-button",8),e.NdJ("clickEvent",function(){e.CHM(r);const p=e.oxw();return e.KtG(p.handleSubmitButton())}),e.ALo(15,"translate"),e.qZA()()()}if(2&c){const r=e.oxw();e.Q6J("formGroup",r.formGroup),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(4,14,"description")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(9,16,"identCode")," "),e.xp6(4),e.Q6J("text",e.lcZ(13,18,"cancel")),e.xp6(2),e.Q6J("text",e.lcZ(15,20,"save"))("disabled",r.isEdit&&!r.formGroup.dirty||r.formGroup.invalid)}}let A=(()=>{class c{constructor(r,m,p,b,T){this.dialogRef=r,this.data=m,this.globalService=p,this.webService=b,this.translateService=T,this.subs=new h.L,this.isEdit=!1}get descriptionControl(){return this.formGroup.get("description")}get identificationCodeControl(){return this.formGroup.get("identificationCode")}ngOnInit(){this.isEdit=!!this.data.oid,this.countryOID=this.data.oid,this.isEdit?this.initializeEdit():this.initializeCreate()}initializeCreate(){this.formGroup=new o.nJ({description:new o.p4("",[o.kI.required]),identificationCode:new o.p4("",[o.kI.required])})}initializeEdit(){this.webService.getEntityByOid(this.countryOID).subscribe(r=>{r&&(this.formGroup=new o.nJ({description:new o.p4(r.description,[o.kI.required]),identificationCode:new o.p4(r.identificationCode,[o.kI.required])}))})}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){this.isEdit?this.webService.updateEntity(this.countryOID,this.formGroup.value).subscribe(r=>{r&&(this.globalService.showBasicAlert(f.I.success,this.translateService.instant("successfully"),this.translateService.instant("countryIsSuccessfullyUpdated")),this.dialogRef.close(r))}):this.webService.createEntity(this.formGroup.value).subscribe(r=>{r&&(this.globalService.showBasicAlert(f.I.success,this.translateService.instant("successfully"),this.translateService.instant("newCountryIsSuccessfullyCreated")),this.dialogRef.close(r))})}ngOnDestroy(){this.subs.unsubscribe()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(d.so),e.Y36(d.WI),e.Y36(E.U),e.Y36(v.N),e.Y36(l.sK))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-country-create-edit"]],features:[e._Bn([v.N])],decls:6,vars:4,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],[1,"form",3,"formGroup"],["matInput","","formControlName","description"],["matInput","","formControlName","identificationCode"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"]],template:function(r,m){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,P,16,22,"form",2),e.qZA()),2&r&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,m.isEdit?"editCountry":"createCountry")," "),e.xp6(2),e.Q6J("ngIf",m.formGroup))},dependencies:[S.O5,Z.r,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,x.KE,x.hX,t.Nt,l.X$],styles:[".container[_ngcontent-%COMP%]{height:100%;width:100%}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:column;margin-top:20px;display:flex}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),c})(),M=(()=>{class c{constructor(r){this._matDialog=r}openDialog(r=""){return new y.y(m=>{const p=new d.vA;p.data={oid:r},this._matDialog.open(A,p).afterClosed().subscribe(b=>{m.next(b),m.complete()},()=>m.error())})}}return c.\u0275fac=function(r){return new(r||c)(e.LFG(d.uw))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac}),c})()},4068:(I,g,i)=>{i.d(g,{D:()=>v});var d=i(4292),y=i(136),o=i(8324),f=i(4650),h=i(3164);let v=(()=>{class e extends d.h{constructor(l){super(l,o.v,y.EF),this.baseWebService=l}}return e.\u0275fac=function(l){return new(l||e)(f.LFG(h.I))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac}),e})()},29:(I,g,i)=>{i.d(g,{N:()=>v});var d=i(4292),y=i(136),o=i(9360),f=i(4650),h=i(3164);let v=(()=>{class e extends d.h{constructor(l){super(l,o.K,y.HT),this.baseWebService=l}}return e.\u0275fac=function(l){return new(l||e)(f.LFG(h.I))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac}),e})()}}]);