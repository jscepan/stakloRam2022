"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[618],{9618:(ct,B,d)=>{d.r(B),d.d(B,{InvoiceCreateEditModule:()=>rt});var h=d(8583),M=d(4655),ae=d(7095),c=d(3679),H=d(1217),R=d(4794),b=d(4463),Y=d(7379),le=d(6254),V=d(7342),P=d(136),C=d(2134),y=d(5595),de=d(287),ue=d(9761),me=d(8002),Z=d(2050),x=d(8966),G=d(7574),$=d(6215),z=d(8939),e=d(7716),K=d(4286),X=d(4237),q=d(42),k=d(7446),O=d(4333);const pe=function(i){return{selected:i}};let _e=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-work-order-selection-item"]],inputs:{dataModel:"dataModel"},features:[e._Bn([])],decls:31,vars:27,consts:[[1,"item-card",3,"ngClass"],[1,"container"],[1,"number"],[1,"date"],[1,"bold"],[1,"for-person"],[1,"value"],[1,"note"],[1,"description"],[1,"checkbox"],["name","Primary","color","primary",3,"checked"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"span",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"div",5),e.TgZ(13,"div",6),e.TgZ(14,"span",4),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._uU(17),e.qZA(),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"div",6),e.TgZ(20,"span",4),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._uU(23),e.qZA(),e.qZA(),e.TgZ(24,"div",8),e.TgZ(25,"span",4),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._uU(28),e.qZA(),e.qZA(),e.TgZ(29,"div",9),e._UZ(30,"mat-checkbox",10),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(25,pe,o.dataModel.selected)),e.xp6(4),e.AsE("",e.lcZ(5,12,"nr"),": ",o.dataModel.number,""),e.xp6(4),e.Oqu(e.lcZ(9,14,"date")),e.xp6(2),e.hij(": ",e.xi3(11,16,o.dataModel.date,"dd.MM.yyyy")," "),e.xp6(5),e.Oqu(e.lcZ(16,19,"forPerson")),e.xp6(2),e.hij(": ",o.dataModel.forPerson," "),e.xp6(4),e.Oqu(e.lcZ(22,21,"note")),e.xp6(2),e.hij(": ",o.dataModel.note," "),e.xp6(3),e.Oqu(e.lcZ(27,23,"description")),e.xp6(2),e.hij(": ",o.dataModel.description," "),e.xp6(2),e.Q6J("checked",o.dataModel.selected||!1))},directives:[h.mk,k.oG],pipes:[O.X$,h.uU],styles:[".item-card[_ngcontent-%COMP%]{display:flex;cursor:pointer;transition:transform .5s ease;width:200px;height:200px;background-color:var(--color-white);position:relative;box-shadow:0 4px 4px #0000001a;border-radius:6px;border:1px solid var(--color-main-light, #bbbbbb);width:150px;height:150px;margin:10px}.item-card[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:absolute;width:100%;display:flex;flex-direction:column;margin-top:5px;width:150px;height:140px}.item-card[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-weight:600;margin:5px 0;text-align:center}.item-card[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;width:100%;height:100%}.item-card[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;position:absolute;z-index:1;margin-top:10px;margin-left:130px}.item-card.selected[_ngcontent-%COMP%]{opacity:.7}.item-card[_ngcontent-%COMP%]:hover{transform:scale(1.15)}.value[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.bold[_ngcontent-%COMP%]{font-weight:600}"]}),i})();function ve(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-work-order-selection-item",4),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().handleItemClick(r.item)}),e.qZA(),e.BQk()}if(2&i){const t=a.$implicit;e.xp6(1),e.Q6J("dataModel",t.item)}}let ge=(()=>{class i{constructor(t,o,n,r,s){this.dialogRef=t,this.data=o,this.cdRef=n,this.webService=r,this.listEntities=s,this.subs=new b.L,this.buyerOID="",this.invoiceType="",this.excludedOids=[],this.isSingleSelection=!0,this.isLoading$=new $.X(!1),this.isLoading=this.isLoading$.asObservable(),this.selection=[],this.items=[],this.buyerOID=o.buyerOID,this.excludedOids=(null==o?void 0:o.excludedOids)||[],this.isSingleSelection=!1!==o.isSingleSelection}ngOnInit(){this.isLoading$.next(!0),this.subs.sink=this.webService.getAllUnsettledWorkOrderForBuyer(this.buyerOID).pipe((0,z.x)(()=>{this.isLoading$.next(!1)})).subscribe(t=>{this.items=t.map(o=>({item:{oid:o.oid,date:o.dateOfCreate,number:(0,C.Nw)(o),forPerson:o.forPerson,note:o.note,description:o.description},object:o}))})}ngAfterViewInit(){this.cdRef.detectChanges()}handleItemClick(t){this.items=this.items.map(o=>this.isSingleSelection?Object.assign(Object.assign({},o),{item:Object.assign(Object.assign({},o.item),{selected:o.item.oid===t.oid})}):o.item.oid===t.oid?Object.assign(Object.assign({},o),{item:Object.assign(Object.assign({},o.item),{selected:!o.item.selected})}):Object.assign({},o)),this.updateSelection()}updateSelection(){this.selection=[],this.items.forEach(t=>{t.item.selected&&this.selection.push(t.item.oid)})}saveSelection(){const t=[];this.items.forEach(o=>{o.item.selected&&t.push(o.object)}),this.dialogRef.close(t)}cancelSaveSelection(){this.dialogRef.close()}bottomReachedHandler(){this.listEntities.requestNextPage()}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.so),e.Y36(x.WI),e.Y36(e.sBO),e.Y36(Z.o),e.Y36(y.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-work-order-selection-popup"]],features:[e._Bn([y.y,Z.o])],decls:8,vars:11,consts:[["scrollToBottom","",3,"componentLoading","bottomReached"],[4,"ngFor","ngForOf"],["color","secondary",3,"text","clickEvent"],["color","primary",3,"text","disabled","clickEvent"],[1,"item",3,"dataModel","click"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-dialog-content",0),e.NdJ("bottomReached",function(){return o.bottomReachedHandler()}),e.ALo(1,"async"),e.YNc(2,ve,2,1,"ng-container",1),e.qZA(),e.TgZ(3,"mat-dialog-actions"),e.TgZ(4,"app-button",2),e.NdJ("clickEvent",function(){return o.cancelSaveSelection()}),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"app-button",3),e.NdJ("clickEvent",function(){return o.saveSelection()}),e.ALo(7,"translate"),e.qZA(),e.qZA()),2&t&&(e.Q6J("componentLoading",e.lcZ(1,5,o.isLoading)||!1),e.xp6(2),e.Q6J("ngForOf",o.items),e.xp6(2),e.Q6J("text",e.lcZ(5,7,"cancel")),e.xp6(2),e.Q6J("text",e.lcZ(7,9,"import"))("disabled",!o.selection.length))},directives:[x.xY,K.C,X.T,h.sg,x.H8,q.r,_e],pipes:[h.Ov,O.X$],styles:["mat-dialog-content[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid var(--attributes-border-color, #efeff3);display:flex;flex-wrap:wrap;height:calc(100% - 70px);max-height:100%}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.spacer[_ngcontent-%COMP%]{height:0;flex:1 1}"]}),i})(),ee=(()=>{class i{constructor(t){this._matDialog=t,this.subs=new b.L}openDialog(t,o=[],n=!1){return new G.y(r=>{const s=new x.vA;s.width="80%",s.height="80%",s.data={buyerOID:t,excludedOids:o,isSingleSelection:n},this.subs.sink.$openSelectPopup=this._matDialog.open(ge,s).afterClosed().subscribe(l=>{r.next(l),r.complete()},()=>r.error())})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(x.uw))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var fe=d(5411);function he(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"i-feather",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().toggleExpandWorkOrder(n.object.oid)}),e.qZA()}2&i&&e.Q6J("name","plus")}function Ce(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"i-feather",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().toggleExpandWorkOrder(n.object.oid)}),e.qZA()}2&i&&e.Q6J("name","minus")}function xe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",16),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw().toggleSelectAll(n,r)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,o=e.oxw();e.Q6J("checked",o.isAllChecked(t)),e.xp6(1),e.Oqu(e.lcZ(2,2,"selectDeselectAll"))}}function Ie(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",17),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.selected=n})("change",function(){return e.CHM(t),e.oxw(3).updateSelection()}),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw(3);e.Q6J("ngModel",t.selected),e.xp6(1),e.HOy(" ",t.object.description," ",e.lcZ(2,5,"pieces"),": ",t.object.sumQuantity," ",e.lcZ(3,7,o.getUOMDisplayValue(t.object.uom))," ")}}function Oe(i,a){if(1&i&&(e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.YNc(2,xe,3,4,"mat-checkbox",14),e.YNc(3,Ie,4,9,"mat-checkbox",15),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",t.workOrderItems.length>1),e.xp6(1),e.Q6J("ngForOf",t.workOrderItems)}}function Ae(i,a){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e.TgZ(2,"div",7),e.YNc(3,he,1,1,"i-feather",8),e.YNc(4,Ce,1,1,"i-feather",8),e.qZA(),e.TgZ(5,"div",9),e._uU(6),e.ALo(7,"translate"),e.ALo(8,"translate"),e.ALo(9,"translate"),e.ALo(10,"date"),e.qZA(),e.qZA(),e.YNc(11,Oe,4,2,"div",10),e.qZA()),2&i){const t=a.$implicit;e.xp6(3),e.Q6J("ngIf",!t.isExpanded),e.xp6(1),e.Q6J("ngIf",t.isExpanded),e.xp6(2),e.hij(" ",e.lcZ(7,4,"workOrder")+" "+e.lcZ(8,6,"nr")+" "+t.object.number+", "+e.lcZ(9,8,"date")+": "+e.xi3(10,10,t.object.dateOfCreate,"dd.MM.yyyy")," "),e.xp6(5),e.Q6J("ngIf",t.isExpanded)}}let ye=(()=>{class i{constructor(t,o,n,r,s){this.dialogRef=t,this.data=o,this.cdRef=n,this.webService=r,this.listEntities=s,this.subs=new b.L,this.buyerOID="",this.invoiceType="",this.excludedOids=[],this.uomOptions=P.pM,this.getUOMDisplayValue=C.HL,this.isLoading$=new $.X(!1),this.isLoading=this.isLoading$.asObservable(),this.selection=[],this.items=[],this.buyerOID=o.buyerOID,this.excludedOids=(null==o?void 0:o.excludedOids)||[]}ngOnInit(){this.isLoading$.next(!0),this.subs.sink=this.webService.getAllUnsettledWorkOrderForBuyer(this.buyerOID).pipe((0,z.x)(()=>{this.isLoading$.next(!1)})).subscribe(t=>{this.items=t.map(o=>({oid:o.oid,isExpanded:!1,object:o,workOrderItems:o.workOrderItems.filter(n=>!this.excludedOids.includes(n.oid)).map(n=>({selected:!1,object:n}))}))})}ngAfterViewInit(){this.cdRef.detectChanges()}toggleExpandWorkOrder(t){const o=this.items.findIndex(n=>n.object.oid===t);this.items[o].isExpanded&&(this.items[o].workOrderItems=this.items[o].workOrderItems.map(n=>Object.assign(Object.assign({},n),{selected:!1}))),this.items[o].isExpanded=!this.items[o].isExpanded,this.updateSelection()}updateSelection(){this.selection=[],this.items.forEach(t=>{t.workOrderItems.forEach(o=>{o.selected&&this.selection.push(o.object.oid)})})}saveSelection(){const t=[];this.items.forEach(o=>{let n;o.workOrderItems.forEach(r=>{r.selected&&(n||(n=Object.assign(Object.assign({},o.object),{workOrderItems:[]})),n.workOrderItems.push(r.object))}),n&&t.push(n)}),this.dialogRef.close(t)}cancelSaveSelection(){this.dialogRef.close()}bottomReachedHandler(){this.listEntities.requestNextPage()}toggleSelectAll(t,o){o.workOrderItems.forEach(t.checked?n=>n.selected=!0:n=>n.selected=!1),this.updateSelection()}isAllChecked(t){return t.workOrderItems.filter(o=>!0===o.selected).length===t.workOrderItems.length}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.so),e.Y36(x.WI),e.Y36(e.sBO),e.Y36(Z.o),e.Y36(y.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-work-order-item-selection-popup"]],features:[e._Bn([y.y,Z.o])],decls:9,vars:11,consts:[["scrollToBottom","",3,"componentLoading","bottomReached"],[1,"content"],["class","item",4,"ngFor","ngForOf"],["color","secondary",3,"text","clickEvent"],["color","primary",3,"text","disabled","clickEvent"],[1,"item"],[1,"title"],[1,"icon"],[3,"name","click",4,"ngIf"],[1,"description"],["class","childrens",4,"ngIf"],[3,"name","click"],[1,"childrens"],[1,"child"],["color","primary",3,"checked","change",4,"ngIf"],["color","primary",3,"ngModel","ngModelChange","change",4,"ngFor","ngForOf"],["color","primary",3,"checked","change"],["color","primary",3,"ngModel","ngModelChange","change"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-dialog-content",0),e.NdJ("bottomReached",function(){return o.bottomReachedHandler()}),e.ALo(1,"async"),e.TgZ(2,"div",1),e.YNc(3,Ae,12,13,"div",2),e.qZA(),e.qZA(),e.TgZ(4,"mat-dialog-actions"),e.TgZ(5,"app-button",3),e.NdJ("clickEvent",function(){return o.cancelSaveSelection()}),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"app-button",4),e.NdJ("clickEvent",function(){return o.saveSelection()}),e.ALo(8,"translate"),e.qZA(),e.qZA()),2&t&&(e.Q6J("componentLoading",e.lcZ(1,5,o.isLoading)||!1),e.xp6(3),e.Q6J("ngForOf",o.items),e.xp6(2),e.Q6J("text",e.lcZ(6,7,"cancel")),e.xp6(2),e.Q6J("text",e.lcZ(8,9,"import"))("disabled",!o.selection.length))},directives:[x.xY,K.C,X.T,h.sg,x.H8,q.r,h.O5,fe.uy,k.oG,c.JJ,c.On],pipes:[h.Ov,O.X$,h.uU],styles:["mat-dialog-content[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid var(--attributes-border-color, #efeff3);display:flex;flex-wrap:wrap;height:calc(100% - 70px);max-height:100%}mat-dialog-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-bottom:1px dotted var(--color-main)}mat-dialog-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center}mat-dialog-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;color:var(--color-info)}mat-dialog-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex}mat-dialog-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .childrens[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:40px}mat-dialog-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .childrens[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.spacer[_ngcontent-%COMP%]{height:0;flex:1 1}"]}),i})(),te=(()=>{class i{constructor(t){this._matDialog=t,this.subs=new b.L}openDialog(t,o=[]){return new G.y(n=>{const r=new x.vA;r.width="80%",r.height="80%",r.data={buyerOID:t,excludedOids:o},this.subs.sink.$openSelectPopup=this._matDialog.open(ye,r).afterClosed().subscribe(s=>{n.next(s),n.complete()},()=>n.error())})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(x.uw))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var Ze=d(8794),be=d(7347),ke=d(8933),T=d(7322),w=d(4107),oe=d(3722),ne=d(6591),Te=d(1862),ie=d(4657),Me=d(3336),E=d(1079);function we(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE(" - ",e.lcZ(2,2,"madeFromPreinvoiceNr"),": ",t.preInvoice.number,"")}}function Pe(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE(" - ",e.lcZ(2,2,"madeFromAdvanceinvoiceNr"),": ",t.advanceInvoice.number,"")}}function qe(i,a){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.displayName)," ")}}function Ee(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field"),e.TgZ(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",35),e.NdJ("keypress",function(n){return e.CHM(t),e.oxw(2).onKeypress(n,"numberOfCashBill")}),e.qZA(),e.qZA()}2&i&&(e.xp6(1),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(3,5,"numberOfCashBill")," "))}function Ne(i,a){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("value",t.selectedBuyer),e.xp6(1),e.Oqu(t.selectedBuyer.name)}}function Se(i,a){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Fe(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Se,2,2,"mat-option",15),e.BQk()),2&i){const t=a.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==o.selectedBuyer?null:o.selectedBuyer.oid)!==t.oid)}}function Je(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-button",36),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw(2).createBuyer()}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("iconName","plus")("disabled",!t.hasPrivilege("BUYER_CREATE"))}}function Le(i,a){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function je(i,a){if(1&i&&(e.TgZ(0,"mat-option",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.displayName)," ")}}function Ue(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-option",57),e.NdJ("click",function(){const r=e.CHM(t).index,s=e.oxw(2).index;return e.oxw(3).removeWorkOrderItemFromInvoiceItem(s,r)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw(5);e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.value.description+", "+t.value.sumQuantity+" "+e.lcZ(2,2,o.getUOMDisplayValue(t.value.uom)))}}function We(i,a){if(1&i&&(e.TgZ(0,"mat-form-field"),e.TgZ(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-select",55),e.YNc(5,Ue,3,4,"mat-option",56),e.qZA(),e.qZA()),2&i){const t=e.oxw(),o=t.$implicit,n=t.index,r=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,3,"workOrder")),e.xp6(2),e.Q6J("value",o.value.workOrderItems),e.xp6(1),e.Q6J("ngForOf",r.getWorkOrderItemsFormArr(n).controls)}}function Qe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"div",40),e.TgZ(2,"mat-form-field",41),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"input",42,43),e.NdJ("keydown.enter",function(){return e.CHM(t),e.MAs(7).closePanel()})("keypress",function(n){const s=e.CHM(t).index;return e.oxw(3).onKeypress(n,"description",s)}),e.qZA(),e.TgZ(8,"mat-autocomplete",null,44),e.YNc(10,Le,2,2,"mat-option",9),e.ALo(11,"async"),e.qZA(),e.qZA(),e.TgZ(12,"mat-form-field"),e.TgZ(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-select",45),e.NdJ("openedChange",function(n){const s=e.CHM(t).index;return e.oxw(3).openedToggleOnUomSelect(n,s)}),e.YNc(17,je,3,4,"mat-option",9),e.qZA(),e.qZA(),e.TgZ(18,"mat-form-field",46),e.TgZ(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"input",47),e.NdJ("keypress",function(n){const s=e.CHM(t).index;return e.oxw(3).onKeypress(n,"quantity",s)})("change",function(){const r=e.CHM(t).index;return e.oxw(3).calculateInvoiceItemAmount(r,"quantity")})("focusout",function(){e.CHM(t);const n=e.oxw(3);return n.calculateInvoiceAmount(),n.setAllInvoiceAmounts()}),e.qZA(),e.qZA(),e.TgZ(23,"mat-form-field",46),e.TgZ(24,"mat-label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"input",48),e.NdJ("keypress",function(n){const s=e.CHM(t).index;return e.oxw(3).onKeypress(n,"pricePerUnit",s)})("change",function(){const r=e.CHM(t).index;return e.oxw(3).calculateInvoiceItemAmount(r,"pricePerUnit")})("focusout",function(){e.CHM(t);const n=e.oxw(3);return n.calculateInvoiceAmount(),n.setAllInvoiceAmounts()}),e.qZA(),e.qZA(),e.TgZ(28,"mat-form-field",46),e.TgZ(29,"mat-label"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"input",49),e.NdJ("keypress",function(n){const s=e.CHM(t).index;return e.oxw(3).onKeypress(n,"netPrice",s)})("change",function(){const r=e.CHM(t).index;return e.oxw(3).calculateInvoiceItemAmount(r,"netPrice")})("focusout",function(){e.CHM(t);const n=e.oxw(3);return n.calculateInvoiceAmount(),n.setAllInvoiceAmounts()}),e.qZA(),e.qZA(),e.TgZ(33,"mat-form-field",46),e.TgZ(34,"mat-label"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"input",50),e.NdJ("keypress",function(n){const s=e.CHM(t).index;return e.oxw(3).onKeypress(n,"vatRate",s)})("change",function(){const r=e.CHM(t).index;return e.oxw(3).calculateInvoiceItemAmount(r,"vatRate")})("focusout",function(){e.CHM(t);const n=e.oxw(3);return n.calculateInvoiceAmount(),n.setAllInvoiceAmounts()}),e.qZA(),e.qZA(),e.TgZ(38,"mat-form-field",46),e.TgZ(39,"mat-label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"input",51),e.NdJ("keypress",function(n){const s=e.CHM(t).index;return e.oxw(3).onKeypress(n,"vatAmount",s)})("change",function(){const r=e.CHM(t).index;return e.oxw(3).calculateInvoiceItemAmount(r,"vatAmount")})("focusout",function(){e.CHM(t);const n=e.oxw(3);return n.calculateInvoiceAmount(),n.setAllInvoiceAmounts()}),e.qZA(),e.qZA(),e.TgZ(43,"mat-form-field",46),e.TgZ(44,"mat-label"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"input",52),e.NdJ("keypress",function(n){const s=e.CHM(t).index;return e.oxw(3).onKeypress(n,"grossPrice",s)})("change",function(){const r=e.CHM(t).index;return e.oxw(3).calculateInvoiceItemAmount(r,"grossPrice")})("focusout",function(){e.CHM(t);const n=e.oxw(3);return n.calculateInvoiceAmount(),n.setAllInvoiceAmounts()}),e.qZA(),e.qZA(),e.YNc(48,We,6,5,"mat-form-field",3),e.TgZ(49,"app-button",53),e.NdJ("clickEvent",function(){const r=e.CHM(t).index;return e.oxw(3).importWorkOrderItems(r)}),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"app-button",54),e.NdJ("clickEvent",function(){const r=e.CHM(t).index;return e.oxw(3).removeItem(r)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=a.$implicit,o=a.index,n=e.MAs(9),r=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",o),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(5,48,"description")," "),e.xp6(2),e.Q6J("matAutocomplete",n),e.xp6(4),e.Q6J("ngForOf",e.lcZ(11,50,r.getFilteredOptions(o))),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(15,52,"uom")," "),e.xp6(3),e.Q6J("ngForOf",r.uomOptions),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(21,54,"quantity")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(26,56,"pricePerUnit")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(31,58,"netPrice")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(36,60,"vatRate")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(41,62,"vatAmount")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(46,64,"grossPrice")," "),e.xp6(3),e.Q6J("ngIf",t.value.workOrderItems.length>0),e.xp6(1),e.Q6J("text",e.lcZ(50,66,"import")),e.xp6(2),e.Q6J("iconName","minus")("isTransparentMode",!0)}}function De(i,a){if(1&i&&(e.TgZ(0,"div",37),e.YNc(1,Qe,52,68,"div",38),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.invoiceItemsFormArr.controls)}}function Be(i,a){1&i&&(e.TgZ(0,"mat-form-field"),e.TgZ(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",58),e.qZA()),2&i&&(e.xp6(1),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(3,5,"advancePayAmount")," "))}function He(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",40),e.TgZ(2,"mat-form-field"),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",62),e.qZA(),e.TgZ(7,"mat-form-field"),e.TgZ(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",63),e.qZA(),e.qZA(),e.TgZ(12,"app-button",54),e.NdJ("clickEvent",function(){const r=e.CHM(t).index;return e.oxw(3).removeNote(r)}),e.qZA(),e.qZA()}if(2&i){const t=a.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.Oqu(e.lcZ(5,5,"field")),e.xp6(5),e.Oqu(e.lcZ(10,7,"value")),e.xp6(3),e.Q6J("iconName","minus")("isTransparentMode",!0)}}function Re(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",59),e.YNc(1,He,13,9,"div",60),e.TgZ(2,"app-button",61),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw(2).addNote()}),e.ALo(3,"translate"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.notesFormArr.controls),e.xp6(1),e.Q6J("text",e.lcZ(3,2,"addNote"))}}function Ye(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"form",6),e.TgZ(1,"div",7),e.TgZ(2,"mat-form-field"),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-select",8),e.NdJ("valueChange",function(n){return e.CHM(t),e.oxw().invoiceTypeChanged(n)}),e.YNc(7,qe,3,4,"mat-option",9),e.qZA(),e.qZA(),e.YNc(8,Ee,5,7,"mat-form-field",3),e.TgZ(9,"mat-form-field"),e.TgZ(10,"mat-label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"input",10),e.NdJ("keypress",function(n){return e.CHM(t),e.oxw().onKeypress(n,"currency")}),e.qZA(),e.qZA(),e.TgZ(14,"mat-form-field"),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"input",11),e.NdJ("keypress",function(n){return e.CHM(t),e.oxw().onKeypress(n,"number")}),e.qZA(),e.qZA(),e.TgZ(19,"app-button",12),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().setInvoiceNumber()}),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"div",7),e.TgZ(22,"mat-form-field"),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"mat-select",13),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw().buyerChanged()})("infiniteScroll",function(){return e.CHM(t),e.oxw().bottomReachedHandlerBuyers()})("selectionChange",function(n){return e.CHM(t),e.oxw().selectBuyer(n)}),e.TgZ(27,"mat-option"),e.TgZ(28,"ngx-mat-select-search",14),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().searchHandler(n)}),e.ALo(29,"translate"),e.ALo(30,"translate"),e.ALo(31,"async"),e.qZA(),e.qZA(),e.YNc(32,Ne,2,2,"mat-option",15),e.YNc(33,Fe,2,1,"ng-container",16),e.ALo(34,"async"),e.qZA(),e.qZA(),e.YNc(35,Je,1,2,"app-button",17),e.qZA(),e.TgZ(36,"div",7),e.TgZ(37,"mat-form-field"),e.TgZ(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"input",18),e.NdJ("change",function(){return e.CHM(t),e.oxw().consolidateAllDates()})("keypress",function(n){return e.CHM(t),e.oxw().onKeypress(n,"dateOfCreate")}),e.qZA(),e.qZA(),e.TgZ(42,"mat-form-field"),e.TgZ(43,"mat-label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"input",19),e.NdJ("keypress",function(n){return e.CHM(t),e.oxw().onKeypress(n,"dateOfTurnover")}),e.qZA(),e.qZA(),e.TgZ(47,"mat-form-field"),e.TgZ(48,"mat-label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"input",20),e.NdJ("keypress",function(n){return e.CHM(t),e.oxw().onKeypress(n,"dateOfMaturity")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",7),e.TgZ(53,"mat-form-field"),e.TgZ(54,"mat-label"),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"input",21),e.NdJ("keypress",function(n){return e.CHM(t),e.oxw().onKeypress(n,"country")}),e.qZA(),e.qZA(),e.TgZ(58,"mat-form-field"),e.TgZ(59,"mat-label"),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"input",22),e.NdJ("keypress",function(n){return e.CHM(t),e.oxw().onKeypress(n,"placeOfIssue")}),e.qZA(),e.qZA(),e.TgZ(63,"mat-form-field"),e.TgZ(64,"mat-label"),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"input",23),e.NdJ("keypress",function(n){return e.CHM(t),e.oxw().onKeypress(n,"methodOfPayment")}),e.qZA(),e.qZA(),e.qZA(),e.YNc(68,De,2,1,"div",24),e.TgZ(69,"div",25),e.TgZ(70,"app-button",26),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().addNewItem()}),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"app-button",27),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().autoImport()}),e.ALo(73,"translate"),e.qZA(),e.qZA(),e.TgZ(74,"mat-form-field"),e.TgZ(75,"mat-label"),e._uU(76),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"textarea",28),e.NdJ("keypress",function(n){return e.CHM(t),e.oxw().onKeypress(n,"comment")}),e.qZA(),e.qZA(),e.TgZ(79,"div",7),e.TgZ(80,"mat-form-field"),e.TgZ(81,"mat-label"),e._uU(82),e.ALo(83,"translate"),e.qZA(),e._UZ(84,"input",29),e.qZA(),e.TgZ(85,"mat-form-field"),e.TgZ(86,"mat-label"),e._uU(87),e.ALo(88,"translate"),e.qZA(),e._UZ(89,"input",30),e.qZA(),e.TgZ(90,"mat-form-field"),e.TgZ(91,"mat-label"),e._uU(92),e.ALo(93,"translate"),e.qZA(),e._UZ(94,"input",31),e.qZA(),e.TgZ(95,"mat-form-field"),e.TgZ(96,"mat-label"),e._uU(97),e.ALo(98,"translate"),e.qZA(),e._UZ(99,"input",32),e.qZA(),e.YNc(100,Be,5,7,"mat-form-field",3),e.qZA(),e.YNc(101,Re,4,4,"div",33),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.formGroup),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(5,107,"type")," "),e.xp6(2),e.Q6J("disabled",t.isEdit),e.xp6(1),e.Q6J("ngForOf",t.typesOptions),e.xp6(1),e.Q6J("ngIf",t.numberOfCashBillControl),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(12,109,"currency")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(17,111,"number")," "),e.xp6(3),e.Q6J("isTransparentMode",!0)("text",e.lcZ(20,113,"createNumber")),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(25,115,"buyer")," "),e.xp6(2),e.Q6J("disabled",t.isEdit)("compareWith",t.compareFn),e.xp6(2),e.s9C("placeholderLabel",e.lcZ(29,117,"searchFor")),e.s9C("noEntriesFoundLabel",e.lcZ(30,119,"noResults")),e.Q6J("formControl",t.searchControl)("hideClearSearchButton",!0)("clearSearchInput",!0)("searching",e.lcZ(31,121,t.isLoading)||!1)("disableScrollToActiveOnOptionsChanged",!0),e.xp6(4),e.Q6J("ngIf",t.selectedBuyer),e.xp6(1),e.Q6J("ngForOf",e.lcZ(34,123,t.buyersEntities)),e.xp6(2),e.Q6J("ngIf",!t.isEdit),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(40,125,"dateOfCreate")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(45,127,"dateOfTurnover")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(50,129,"dateOfMaturity")," "),e.xp6(5),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(56,131,"country")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(61,133,"placeOfIssue")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(66,135,"methodOfPayment")," "),e.xp6(3),e.Q6J("ngIf",t.isBuyerSelected),e.xp6(2),e.Q6J("iconName","plus")("text",e.lcZ(71,137,"addNewItem"))("disabled",!t.isBuyerSelected),e.xp6(2),e.Q6J("iconName","plus")("text",e.lcZ(73,139,"autoImport"))("isTransparentMode",!0)("disabled",!t.isBuyerSelected),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(77,141,"comment")," "),e.xp6(5),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(83,143,"netAmount")," "),e.xp6(2),e.Q6J("readonly",!0),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(88,145,"vatRate")," "),e.xp6(2),e.Q6J("readonly",!0),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(93,147,"vatAmount")," "),e.xp6(2),e.Q6J("readonly",!0),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(98,149,"grossAmount")," "),e.xp6(2),e.Q6J("readonly",!0),e.xp6(1),e.Q6J("ngIf",t.advanceInvoice||t.invoice&&t.invoice.advancePayAmount>0),e.xp6(1),e.Q6J("ngIf",t.notesFormArr.controls)}}function Ve(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",64),e.TgZ(1,"app-button",65),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().cancel()}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-button",66),e.NdJ("clickEvent",function(){return e.CHM(t),e.oxw().handleSubmitButton()}),e.ALo(4,"translate"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("text",e.lcZ(2,3,"cancel")),e.xp6(2),e.Q6J("text",e.lcZ(4,5,"save"))("disabled",!t.formGroup.dirty||t.formGroup.invalid)}}const Ge=[{path:"",component:(()=>{class i{constructor(t,o,n,r,s,l,m,u,p,f,_,g,v,I){this.router=t,this.route=o,this.globalService=n,this.webService=r,this.workOrderWebService=s,this.buyerWebService=l,this.buyerCreateEditPopupService=m,this.settingsStoreService=u,this.translateService=p,this.listEntities=f,this.el=_,this.workOrderSelectionComponentService=g,this.workOrderItemSelectionComponentService=v,this.authStoreService=I,this.subs=new b.L,this.invoiceOID=null,this.isEdit=!1,this.typesOptions=P.TY,this.uomOptions=P.pM,this.invoiceItemsOptions=[],this.filteredOptions=[],this.buyersEntities=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.searchControl=new c.NI,this.compareFn=C.nt,this.getUOMDisplayValue=C.HL}get numberOfCashBillControl(){return this.formGroup.get("numberOfCashBill")}getDescription(t){return this.invoiceItemsFormArr.controls[t].get("description")}getUOM(t){return this.invoiceItemsFormArr.controls[t].get("uom")}getQuantity(t){return this.invoiceItemsFormArr.controls[t].get("quantity")}getPricePerUnit(t){return this.invoiceItemsFormArr.controls[t].get("pricePerUnit")}getNetPrice(t){return this.invoiceItemsFormArr.controls[t].get("netPrice")}getVatRate(t){return this.invoiceItemsFormArr.controls[t].get("vatRate")}getVatAmount(t){return this.invoiceItemsFormArr.controls[t].get("vatAmount")}getGrossPrice(t){return this.invoiceItemsFormArr.controls[t].get("grossPrice")}getWorkOrderItemsFormArr(t){return this.invoiceItemsFormArr.controls[t].get("workOrderItems")}get invoiceItemsFormArr(){return this.formGroup.get("invoiceItems")}get notesFormArr(){return this.formGroup.get("notes")}ngOnInit(){this.invoiceOID=this.route.snapshot.paramMap.get("invoiceOID");const t=this.route.snapshot.queryParamMap.get("workOrderOID"),o=this.route.snapshot.queryParamMap.get("preInvoiceOID"),n=this.route.snapshot.queryParamMap.get("advanceInvoiceOID");this.subs.sink=this.webService.getAllInvoiceItemDescriptions().subscribe(r=>{this.invoiceItemsOptions=r}),this.subs.sink=this.listEntities.setWebService(this.buyerWebService).requestFirstPage(),this.subs.sink=this.settingsStoreService.dataLoaded$.subscribe(r=>{r&&(this.settings=this.settingsStoreService.getSettings(),this.isEdit=!!this.invoiceOID,this.isEdit&&this.invoiceOID?this.subs.sink=this.webService.getEntityByOid(this.invoiceOID).subscribe(s=>{this.invoice=s,this.invoice.preInvoiceOid&&(this.subs.sink=this.webService.getEntityByOid(this.invoice.preInvoiceOid).subscribe(l=>{this.preInvoice=l})),this.invoice.advanceInvoiceOid&&(this.subs.sink=this.webService.getEntityByOid(this.invoice.advanceInvoiceOid).subscribe(l=>{this.preInvoice=l})),this.initializeCreate()}):(this.initializeCreate(),t?this.workOrderWebService.getEntityByOid(t).subscribe(s=>{var l;null===(l=this.formGroup.get("buyer"))||void 0===l||l.setValue(s.buyer),this.selectedBuyer=s.buyer,this.addWorkOrderToNewInvoiceItem([s])}):o?this.importInvoiceFrom("preInvoice",o):n&&this.importInvoiceFrom("advanceInvoice",n)))})}hasPrivilege(t){return this.authStoreService.isAllowed(t)}initializeCreate(){var t,o,n,r,s,l,m,u,p,f,_,g,v,I,A,F,J,L,j,U,W,Q,D;this.isEdit&&(this.selectedBuyer=this.invoice.buyer),this.formGroup=new c.cw({type:new c.NI((null===(t=this.invoice)||void 0===t?void 0:t.type)||this.typesOptions[0].value,[c.kI.required]),number:new c.NI((null===(o=this.invoice)||void 0===o?void 0:o.number)||0,[c.kI.required]),dateOfCreate:new c.NI((null===(n=this.invoice)||void 0===n?void 0:n.dateOfCreate)||(new Date).toISOString().substring(0,10),[c.kI.required]),dateOfTurnover:new c.NI((null===(r=this.invoice)||void 0===r?void 0:r.dateOfTurnover)||(new Date).toISOString().substring(0,10),[c.kI.required]),dateOfMaturity:new c.NI((null===(s=this.invoice)||void 0===s?void 0:s.dateOfMaturity)||(new Date).toISOString().substring(0,10),[c.kI.required]),placeOfIssue:new c.NI((null===(l=this.invoice)||void 0===l?void 0:l.placeOfIssue)||(null===(m=this.settings)||void 0===m?void 0:m.invoicePlaceOfIssue)||"",[c.kI.required]),methodOfPayment:new c.NI((null===(u=this.invoice)||void 0===u?void 0:u.methodOfPayment)||(null===(p=this.settings)||void 0===p?void 0:p.invoiceMethodOfPayment),[c.kI.required]),comment:new c.NI((null===(f=this.invoice)||void 0===f?void 0:f.comment)||"",[]),netAmount:new c.NI((null===(_=this.invoice)||void 0===_?void 0:_.netAmount)||0,[c.kI.required,c.kI.min(.01)]),vatRate:new c.NI((null===(g=this.invoice)||void 0===g?void 0:g.vatRate)||0,[c.kI.required]),vatAmount:new c.NI((null===(v=this.invoice)||void 0===v?void 0:v.vatAmount)||0,[c.kI.required]),grossAmount:new c.NI((null===(I=this.invoice)||void 0===I?void 0:I.grossAmount)||0,[c.kI.required,c.kI.min(.01)]),currency:new c.NI((null===(A=this.invoice)||void 0===A?void 0:A.currency)||(null===(F=this.settings)||void 0===F?void 0:F.invoiceCurrency)||"",[c.kI.required]),country:new c.NI((null===(J=this.invoice)||void 0===J?void 0:J.country)||(null===(L=this.settings)||void 0===L?void 0:L.invoiceCountry)||"",[c.kI.required]),buyer:new c.NI(this.selectedBuyer||"",[c.kI.required]),invoiceItems:new c.Oe([]),notes:new c.Oe([]),preInvoiceOid:new c.NI(null===(j=this.preInvoice)||void 0===j?void 0:j.oid),advanceInvoiceOid:new c.NI(null===(U=this.advanceInvoice)||void 0===U?void 0:U.oid),advancePayAmount:new c.NI((null===(W=this.invoice)||void 0===W?void 0:W.advancePayAmount)||(null===(Q=this.advanceInvoice)||void 0===Q?void 0:Q.grossAmount)||0)}),"CASH"===(null===(D=this.formGroup.get("type"))||void 0===D?void 0:D.value)&&this.formGroup.addControl("numberOfCashBill",new c.NI(this.invoice.numberOfCashBill||"",[c.kI.required])),this.isEdit?this.invoice.invoiceItems.forEach((st,lt)=>this.addNewItem(st)):this.setInvoiceNumber()}selectBuyer(t){t&&t.value&&(this.selectedBuyer=t.value)}isBuyerSelected(){var t;return!!(null===(t=this.formGroup.get("buyer"))||void 0===t?void 0:t.value)}addNewItem(t){var o;this.invoiceItemsFormArr.push(new c.cw({oid:new c.NI((null==t?void 0:t.oid)||""),description:new c.NI((null==t?void 0:t.description)||"",[c.kI.required]),uom:new c.NI((null==t?void 0:t.uom)||this.uomOptions[0].value,[c.kI.required]),quantity:new c.NI((null==t?void 0:t.quantity)||0,[c.kI.required,c.kI.min(0)]),pricePerUnit:new c.NI((null==t?void 0:t.pricePerUnit)||0,[c.kI.required,c.kI.min(0)]),netPrice:new c.NI((null==t?void 0:t.netPrice)||0,[c.kI.required,c.kI.min(0)]),vatRate:new c.NI(t?t.vatRate:(null===(o=this.settings)||void 0===o?void 0:o.invoiceVatRate)||0,[c.kI.required,c.kI.min(0)]),vatAmount:new c.NI((null==t?void 0:t.vatAmount)||0,[c.kI.required,c.kI.min(0)]),grossPrice:new c.NI((null==t?void 0:t.grossPrice)||0,[c.kI.required,c.kI.min(0)]),workOrderItems:new c.Oe([])})),setTimeout(()=>{var n;const r=null===(n=this.getDescription(this.invoiceItemsFormArr.length-1))||void 0===n?void 0:n.valueChanges.pipe((0,ue.O)(""),(0,me.U)(s=>this._filter(s||"")));this.filteredOptions.push(r)}),null==t||t.workOrderItems.forEach(n=>{this.addNewWorkOrderItemToInvoiceItem(this.invoiceItemsFormArr.length-1,[n])}),this.calculateInvoiceAmount()}_filter(t){const o=t.toLowerCase();return this.invoiceItemsOptions.filter(n=>n.toLowerCase().includes(o))}addWorkOrderToNewInvoiceItem(t){const o=[],n=this.getAllImportedWorkOrderItemOIDS();t.forEach(r=>{r.workOrderItems.forEach(s=>{var l;if(!n.includes(s.oid)){let m={oid:"",description:s.description,uom:s.uom,quantity:s.sumQuantity,pricePerUnit:0,netPrice:0,vatRate:(null===(l=this.settings)||void 0===l?void 0:l.invoiceVatRate)||20,vatAmount:0,grossPrice:0,workOrderItems:[s]};const u=o.filter(p=>p.description===m.description&&p.uom===m.uom)[0];u?(u.quantity=u.quantity+m.quantity,u.workOrderItems.push(s)):o.push(m)}}),this.addWorkOrderToComment(r)}),o.forEach(r=>{this.addNewItem(r)})}addWorkOrderToComment(t){const o=this.formGroup.get("comment");(null==o?void 0:o.value.length)&&!(null==o?void 0:o.value.includes((0,C.Nw)(t)))?o.setValue(o.value+", "+(0,C.Nw)(t)):null==o||o.setValue(this.translateService.instant("attachmentWorkOrderNumber")+" "+(0,C.Nw)(t))}addNewWorkOrderItemToInvoiceItem(t,o){o.forEach(n=>{this.getWorkOrderItemsFormArr(t).push(new c.cw({oid:new c.NI(n.oid),description:new c.NI(n.description),uom:new c.NI(n.uom),dimension1:new c.NI(n.dimension1),dimension2:new c.NI(n.dimension2),dimension3:new c.NI(n.dimension3),quantity:new c.NI(n.quantity),sumQuantity:new c.NI(n.sumQuantity),note:new c.NI(n.note)}))})}importWorkOrderItems(t){var o;this.workOrderItemSelectionComponentService.openDialog((null===(o=this.selectedBuyer)||void 0===o?void 0:o.oid)||"",this.getAllImportedWorkOrderItemOIDS()).subscribe(n=>{if(n){const r=[];n.forEach(s=>{s.workOrderItems.forEach(l=>{var m;let u={oid:"",description:l.description,uom:l.uom,quantity:l.sumQuantity,pricePerUnit:0,netPrice:0,vatRate:(null===(m=this.settings)||void 0===m?void 0:m.invoiceVatRate)||20,vatAmount:0,grossPrice:0,workOrderItems:[l]};const p=r.filter(f=>f.uom===u.uom)[0];p?(p.description=p.description.includes(l.description)?l.description:p.description+", "+l.description,p.quantity=p.quantity+u.quantity,p.workOrderItems.push(l)):r.push(u)})}),r.forEach((s,l)=>{var m,u,p,f,_,g,v,I;const A=null===(m=this.getDescription(t))||void 0===m?void 0:m.value;!A&&0===(null===(u=this.getQuantity(t))||void 0===u?void 0:u.value)||(null===(p=this.getDescription(t))||void 0===p?void 0:p.value.includes(s.description))&&(null===(f=this.getUOM(t))||void 0===f?void 0:f.value)===s.uom?(A.includes(s.description)||null===(_=this.getDescription(t))||void 0===_||_.setValue(A.length?", "+s.description:s.description),null===(g=this.getUOM(t))||void 0===g||g.setValue(s.uom),null===(v=this.getQuantity(t))||void 0===v||v.setValue((null===(I=this.getQuantity(t))||void 0===I?void 0:I.value)+s.quantity),this.addNewWorkOrderItemToInvoiceItem(t,s.workOrderItems)):this.addNewItem(s)}),n.forEach(s=>{this.addWorkOrderToComment(s)})}})}removeWorkOrderItemFromInvoiceItem(t,o){this.getWorkOrderItemsFormArr(t).removeAt(o),this.formGroup.markAsDirty()}buyerChanged(){setTimeout(()=>{var t;this.isBuyerSelected=null===(t=this.formGroup.get("buyer"))||void 0===t?void 0:t.value;for(let o=this.invoiceItemsFormArr.controls.length-1;o>=0;o--)this.invoiceItemsFormArr.controls[o].value.workOrderItems&&this.invoiceItemsFormArr.controls[o].value.workOrderItems.length&&this.invoiceItemsFormArr.removeAt(o);this.setFocusOn("dateOfCreate")})}removeItem(t){this.invoiceItemsFormArr.removeAt(t),this.calculateInvoiceAmount()}cancel(){this.router.navigate(["/"])}handleSubmitButton(){this.setAllInvoiceAmounts(),this.isEdit&&this.invoiceOID?this.webService.updateEntity(this.invoiceOID,this.formGroup.value).subscribe(t=>{t&&this.globalService.showBasicAlert(R.I.success,this.translateService.instant("successfully"),this.translateService.instant("invoiceIsSuccessfullyUpdated"))}):this.webService.createEntity(this.formGroup.value).subscribe(t=>{t&&(this.globalService.showBasicAlert(R.I.success,this.translateService.instant("successfully"),this.translateService.instant("newInvoiceIsSuccessfullyCreated")),window.open("#/print/invoice-view/"+t.oid),this.router.navigate(["invoices","edit",t.oid]))})}invoiceTypeChanged(t){setTimeout(()=>{var o,n,r,s,l,m,u,p;if(null===(o=this.formGroup.get("comment"))||void 0===o||o.setValue(""),"FOREIGN"!==t&&this.notesFormArr.controls.length)for(let f=this.notesFormArr.controls.length-1;f>=0;f--)this.removeNote(f);switch(t){case"CASH":this.formGroup.addControl("numberOfCashBill",new c.NI("",[c.kI.required])),null===(n=this.formGroup.get("currency"))||void 0===n||n.setValue(null===(r=this.settings)||void 0===r?void 0:r.invoiceCurrency),setTimeout(()=>{this.setFocusOn("numberOfCashBill")});break;case"FOREIGN":null===(s=this.formGroup.get("currency"))||void 0===s||s.setValue("EUR"),null===(l=this.formGroup.get("comment"))||void 0===l||l.setValue(null===(m=this.settings)||void 0===m?void 0:m.invoiceForeignNote),this.addNote({oid:"",name:"DEVIZNI RA\u010cUN:",description:"00-710-0000329.2"}),this.addNote({oid:"",name:"IBAN:",description:"RS35310007100000329270"}),this.addNote({oid:"",name:"SWIFT:",description:"CONARS22"}),this.addNote({oid:"",name:"Broj koleta:",description:"1"}),this.addNote({oid:"",name:"Bruto kg:",description:"1"}),this.addNote({oid:"",name:"Neto kg:",description:"1"});break;default:this.formGroup.removeControl("numberOfCashBill"),null===(u=this.formGroup.get("currency"))||void 0===u||u.setValue(null===(p=this.settings)||void 0===p?void 0:p.invoiceCurrency),this.setFocusOn("currency")}this.isEdit||this.setInvoiceNumber()})}setInvoiceNumber(){var t,o;this.webService.getNextInvoiceNumber(null===(t=this.formGroup.get("type"))||void 0===t?void 0:t.value,null===(o=this.formGroup.get("dateOfCreate"))||void 0===o?void 0:o.value).subscribe(n=>{var r,s;null===(r=this.formGroup.get("number"))||void 0===r||r.setValue(n+"/"+new Date(null===(s=this.formGroup.get("dateOfCreate"))||void 0===s?void 0:s.value).getFullYear().toString())})}createBuyer(){this.buyerCreateEditPopupService.openDialog().subscribe(t=>{t&&this.listEntities.requestFirstPage()})}calculateInvoiceItemAmount(t,o){let n=this.invoiceItemsFormArr.controls[t].get("quantity"),r=1*(null==n?void 0:n.value),s=this.invoiceItemsFormArr.controls[t].get("pricePerUnit"),l=1*(null==s?void 0:s.value),m=this.invoiceItemsFormArr.controls[t].get("netPrice"),u=1*(null==m?void 0:m.value),p=this.invoiceItemsFormArr.controls[t].get("vatRate"),f=1*(null==p?void 0:p.value),_=this.invoiceItemsFormArr.controls[t].get("vatAmount"),g=1*(null==_?void 0:_.value),v=this.invoiceItemsFormArr.controls[t].get("grossPrice"),I=1*(null==v?void 0:v.value);switch(o){case"quantity":case"pricePerUnit":u=r*l,null==m||m.setValue(u),g=u*f/100,null==_||_.setValue(g),null==v||v.setValue(u+g);break;case"netPrice":r<=0&&(r=1,null==n||n.setValue(r)),l=u/r,null==s||s.setValue(l),g=u*f/100,null==_||_.setValue(g),null==v||v.setValue(u+g);break;case"vatRate":g=u*f/100,null==_||_.setValue(g),null==v||v.setValue(u+g);break;case"vatAmount":u=100*g/f,null==m||m.setValue(u),r<=0&&(r=1,null==n||n.setValue(r)),l=u/r,null==s||s.setValue(l),null==v||v.setValue(u+g);break;case"grossPrice":g=I*f/(100+f),null==_||_.setValue(g),u=I-g,null==m||m.setValue(u),r<=0&&(r=1,null==n||n.setValue(r)),l=u/r,null==s||s.setValue(l)}this.calculateInvoiceAmount()}calculateInvoiceAmount(){setTimeout(()=>{var t,o,n,r;let s=0,l=0,m=0,u=0;this.invoiceItemsFormArr.value.forEach(p=>{s+=p.netPrice,l+=p.vatRate,m+=p.vatAmount,u+=p.grossPrice}),null===(t=this.formGroup.get("netAmount"))||void 0===t||t.setValue((0,C.wz)(s)),null===(o=this.formGroup.get("vatRate"))||void 0===o||o.setValue((0,C.wz)(l/this.invoiceItemsFormArr.length)),null===(n=this.formGroup.get("vatAmount"))||void 0===n||n.setValue((0,C.wz)(m)),null===(r=this.formGroup.get("grossAmount"))||void 0===r||r.setValue((0,C.wz)(u))})}setAllInvoiceAmounts(){this.invoiceItemsFormArr.controls.forEach(t=>{var o,n,r,s,l,m;const u=1*(null===(o=t.get("grossPrice"))||void 0===o?void 0:o.value),p=1*(null===(n=t.get("vatAmount"))||void 0===n?void 0:n.value),f=1*(null===(r=t.get("vatRate"))||void 0===r?void 0:r.value);null===(s=t.get("grossPrice"))||void 0===s||s.setValue((0,C.wz)(u)),null===(l=t.get("vatAmount"))||void 0===l||l.setValue((0,C.wz)(u*f/(100+f))),null===(m=t.get("netPrice"))||void 0===m||m.setValue((0,C.wz)(u-p))}),this.calculateInvoiceAmount()}autoImport(){var t;this.workOrderSelectionComponentService.openDialog((null===(t=this.selectedBuyer)||void 0===t?void 0:t.oid)||"",[]).subscribe(n=>{n&&this.addWorkOrderToNewInvoiceItem(n)})}getAllImportedWorkOrderItemOIDS(){const t=[];return this.invoiceItemsFormArr.controls.forEach((o,n)=>{this.getWorkOrderItemsFormArr(n).controls.forEach(r=>{t.push(r.value.oid)})}),t}searchHandler(t){let o=new de.h;o.criteriaQuick=t,this.listEntities.setFilter(o)}importInvoiceFrom(t,o){this.webService.getEntityByOid(o).subscribe(n=>{var r,s;"advanceInvoice"===t?this.advanceInvoice=n:this.preInvoice=n,this.selectedBuyer=n.buyer,this.initializeCreate(),null===(r=this.formGroup.get("comment"))||void 0===r||r.setValue((null===(s=this.formGroup.get("comment"))||void 0===s?void 0:s.value)+this.translateService.instant("advanceInvoice"===t?"invoiceCreatedOnAdvanceInvoice":"invoiceCreatedOnPreInvoice",{invoiceNumber:n.number,invoiceDate:new Date(n.dateOfCreate).getDay()+"/"+new Date(n.dateOfCreate).getMonth()+"/"+new Date(n.dateOfCreate).getFullYear()})),n.invoiceItems.forEach((l,m)=>{l.oid="",l.workOrderItems=[],this.addNewItem(l)}),this.formGroup.markAsDirty()})}bottomReachedHandlerBuyers(){this.listEntities.requestNextPage()}consolidateAllDates(){var t,o,n,r;null===(t=this.formGroup.get("dateOfTurnover"))||void 0===t||t.setValue(null===(o=this.formGroup.get("dateOfCreate"))||void 0===o?void 0:o.value),null===(n=this.formGroup.get("dateOfMaturity"))||void 0===n||n.setValue(null===(r=this.formGroup.get("dateOfCreate"))||void 0===r?void 0:r.value)}onKeypress(t,o,n=-1){if("Enter"===t.key)switch(t.preventDefault(),o){case"numberOfCashBill":this.setFocusOn("currency");break;case"currency":this.setFocusOn("number");break;case"number":this.setFocusOn("buyer");break;case"dateOfCreate":this.setFocusOn("dateOfTurnover");break;case"dateOfTurnover":this.setFocusOn("dateOfMaturity");break;case"dateOfMaturity":this.setFocusOn("country");break;case"country":this.setFocusOn("placeOfIssue");break;case"placeOfIssue":this.setFocusOn("methodOfPayment");break;case"methodOfPayment":this.setFocusOn("description",0,!0);break;case"description":this.setFocusOn("uom",n);break;case"uom":this.setFocusOn("quantity",n,!0);break;case"quantity":this.setFocusOn("pricePerUnit",n,!0);break;case"pricePerUnit":this.setFocusOn("netPrice",n,!0);break;case"netPrice":this.setFocusOn("vatRate",n,!0);break;case"vatRate":this.setFocusOn("vatAmount",n,!0);break;case"vatAmount":this.setFocusOn("grossPrice",n,!0);break;case"grossPrice":this.invoiceItemsFormArr.length===n+1&&this.addNewItem(),setTimeout(()=>{this.setFocusOn("description",n+1)})}}setFocusOn(t,o=0,n=!1){const r=this.el.nativeElement.querySelectorAll('[formcontrolname="'+t+'"]')[o<0?0:o];null==r||r.focus(),n&&r.select()}openedToggleOnUomSelect(t,o){var n,r;!t&&(null===(n=this.getUOM(o))||void 0===n?void 0:n.value)&&this.uomChanged(null===(r=this.getUOM(o))||void 0===r?void 0:r.value,o)}uomChanged(t,o){setTimeout(()=>{this.setFocusOn("quantity",o,!0)})}getFilteredOptions(t){return this.filteredOptions[t]}addNote(t){this.notesFormArr.push(new c.cw({oid:new c.NI((null==t?void 0:t.oid)||""),name:new c.NI((null==t?void 0:t.name)||"",[c.kI.required]),description:new c.NI((null==t?void 0:t.description)||"",[c.kI.required])}))}removeNote(t){this.notesFormArr.removeAt(t)}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.F0),e.Y36(M.gz),e.Y36(Ze.U),e.Y36(V.b),e.Y36(Z.o),e.Y36(Y.e),e.Y36(H.X),e.Y36(be.G),e.Y36(O.sK),e.Y36(y.y),e.Y36(e.SBq),e.Y36(ee),e.Y36(te),e.Y36(ke.g))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-invoice-create-edit"]],features:[e._Bn([V.b,H.X,Y.e,le.u,y.y,Z.o,ee,te])],decls:10,vars:7,consts:[[1,"wrapper"],[1,"container"],[1,"title"],[4,"ngIf"],["class","form",3,"formGroup",4,"ngIf"],["class","button-section",4,"ngIf"],[1,"form",3,"formGroup"],[1,"row"],["formControlName","type",3,"disabled","valueChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","currency",3,"keypress"],["type","text","matInput","","formControlName","number",3,"keypress"],[1,"bottom-padding",3,"isTransparentMode","text","clickEvent"],["formControlName","buyer","msInfiniteScroll","",3,"disabled","compareWith","valueChange","infiniteScroll","selectionChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel","hideClearSearchButton","clearSearchInput","searching","disableScrollToActiveOnOptionsChanged","ngModelChange"],[3,"value",4,"ngIf"],[4,"ngFor","ngForOf"],["class","create-buyer-button",3,"iconName","disabled","clickEvent",4,"ngIf"],["type","date","matInput","","formControlName","dateOfCreate",3,"change","keypress"],["type","date","matInput","","formControlName","dateOfTurnover",3,"keypress"],["type","date","matInput","","formControlName","dateOfMaturity",3,"keypress"],["type","text","matInput","","formControlName","country",3,"keypress"],["type","text","matInput","","formControlName","placeOfIssue",3,"keypress"],["type","text","matInput","","formControlName","methodOfPayment",3,"keypress"],["formArrayName","invoiceItems","class","invoice-items",4,"ngIf"],[1,"buttons"],[1,"big-button",3,"iconName","text","disabled","clickEvent"],[1,"big-button",3,"iconName","text","isTransparentMode","disabled","clickEvent"],["matInput","","formControlName","comment","rows","3",3,"keypress"],["type","text","appDecimal","","matInput","","formControlName","netAmount",3,"readonly"],["type","text","appDecimal","","matInput","","formControlName","vatRate",3,"readonly"],["type","text","appDecimal","","matInput","","formControlName","vatAmount",3,"readonly"],["type","text","appDecimal","","matInput","","formControlName","grossAmount",3,"readonly"],["class","notes","formArrayName","notes",4,"ngIf"],[3,"value"],["type","text","matInput","","formControlName","numberOfCashBill",3,"keypress"],[1,"create-buyer-button",3,"iconName","disabled","clickEvent"],["formArrayName","invoiceItems",1,"invoice-items"],["class","invoice-item",4,"ngFor","ngForOf"],[1,"invoice-item"],[1,"form-group",3,"formGroupName"],[1,"full-width"],["type","text","matInput","","formControlName","description",3,"matAutocomplete","keydown.enter","keypress"],["trigger","matAutocompleteTrigger"],["auto","matAutocomplete"],["formControlName","uom",3,"openedChange"],[1,"number-field"],["type","text","appDecimal","","matInput","","formControlName","quantity",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","pricePerUnit",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","netPrice",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","vatRate",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","vatAmount",3,"keypress","change","focusout"],["type","text","appDecimal","","matInput","","formControlName","grossPrice",3,"keypress","change","focusout"],[1,"additional-button",3,"text","clickEvent"],[1,"additional-button",3,"iconName","isTransparentMode","clickEvent"],["formArrayName","workOrderItems","multiple","",3,"value"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],["type","text","appDecimal","","matInput","","formControlName","advancePayAmount"],["formArrayName","notes",1,"notes"],["class","row",4,"ngFor","ngForOf"],[3,"text","clickEvent"],["type","text","matInput","","formControlName","name"],["type","text","matInput","","formControlName","description"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3"),e._uU(4),e.ALo(5,"translate"),e.YNc(6,we,3,4,"span",3),e.YNc(7,Pe,3,4,"span",3),e.qZA(),e.qZA(),e.YNc(8,Ye,102,151,"form",4),e.qZA(),e.YNc(9,Ve,5,7,"div",5),e.qZA()),2&t&&(e.xp6(4),e.hij(" ",e.lcZ(5,5,o.isEdit?"editInvoice":"createInvoice")," "),e.xp6(2),e.Q6J("ngIf",o.preInvoice),e.xp6(1),e.Q6J("ngIf",o.advanceInvoice),e.xp6(1),e.Q6J("ngIf",o.formGroup),e.xp6(1),e.Q6J("ngIf",o.formGroup))},directives:[h.O5,c._Y,c.JL,c.sg,T.KE,T.hX,w.gD,c.JJ,c.u,h.sg,oe.Nt,c.Fj,q.r,ne.s,Te.ey,ie.nu,c.oH,Me.U,c.CE,c.x0,E.ZL,E.XC],pipes:[O.X$,h.Ov],styles:[".wrapper[_ngcontent-%COMP%]{height:calc(100%)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 100px);overflow-y:auto}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:column;margin-top:20px;display:flex;width:100%}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .create-buyer-button[_ngcontent-%COMP%]{margin:10px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .import-buttons[_ngcontent-%COMP%]{display:flex;margin:10px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .import-buttons[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{margin-right:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-padding[_ngcontent-%COMP%]{display:flex;align-items:center;padding-bottom:1.34375em;margin-left:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .invoice-items[_ngcontent-%COMP%]   .invoice-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .invoice-items[_ngcontent-%COMP%]   .invoice-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex-grow:1}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .invoice-items[_ngcontent-%COMP%]   .invoice-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .number-field[_ngcontent-%COMP%]{flex-shrink:1;max-width:130px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .big-button[_ngcontent-%COMP%]{margin-right:20px}.wrapper[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:60px;flex-direction:row;align-items:center;justify-content:space-between}.additional-button[_ngcontent-%COMP%]{margin:10px 5px}"]}),i})(),canActivate:[ae.Y],data:{permission:"INVOICE_CREATE"}}];let $e=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[M.Bz.forChild(Ge)],M.Bz]}),i})();var N=d(2024),ze=d(7707),Ke=d(6688),S=d(7942),Xe=d(5245),et=d(9139),tt=d(7012),re=d(6460),se=d(8109),ce=d(8287);let ot=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[h.ez,S.p,k.p9,O.aw]]}),i})(),nt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[h.ez,x.Is,N.h,O.aw,re.n,T.lN,w.LD,se.V,ce.n,ot]]}),i})(),it=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[h.ez,x.Is,N.h,O.aw,re.n,T.lN,w.LD,se.V,ce.n,S.p,k.p9,c.u5]]}),i})(),rt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[h.ez,$e,O.aw,N.h,ze.R,c.UX,oe.c,T.lN,w.LD,et._,Ke.Hi,S.p,Xe.Ps,ie.Co,ne.I,tt.o,E.Bb,k.p9,nt,it]]}),i})()}}]);