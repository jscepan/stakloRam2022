"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[102],{7095:(y,v,n)=>{n.d(v,{Y:()=>e});var i=n(4794),c=n(5e3),s=n(8933),l=n(8794),d=n(8555),a=n(9285);let e=(()=>{class p{constructor(C,h,E,f){this.authStoreService=C,this.globalService=h,this.router=E,this.translateService=f}canActivate(C){var h;return!(!(null===(h=this.authStoreService.user)||void 0===h?void 0:h.roles)||!this.authStoreService.isAllowed(C.data.permission))||(this.globalService.showBasicAlert(i.I.error,this.translateService.instant("accessDenied"),this.translateService.instant("youDontHaveAccess")),!1)}}return p.\u0275fac=function(C){return new(C||p)(c.LFG(s.g),c.LFG(l.U),c.LFG(d.F0),c.LFG(a.sK))},p.\u0275prov=c.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},4102:(y,v,n)=>{n.r(v),n.d(v,{CountriesModule:()=>B});var i=n(9808),c=n(8555),s=n(7095),l=n(5986),d=n(287),a=n(5595),e=n(4463),p=n(29),t=n(5e3),C=n(8933),h=n(4605),E=n(42),f=n(4286),O=n(773),A=n(9285);function S(r,b){1&r&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"noResults")," "))}function g(r,b){1&r&&(t.TgZ(0,"div",10),t._UZ(1,"mat-spinner"),t.qZA())}function P(r,b){if(1&r){const u=t.EpF();t.ynx(0),t.TgZ(1,"div",11),t._uU(2),t.qZA(),t.TgZ(3,"div",11),t._uU(4),t.qZA(),t.TgZ(5,"div",11)(6,"app-button",12),t.NdJ("clickEvent",function(){const T=t.CHM(u).$implicit;return t.oxw().editCountry(T.oid)}),t.ALo(7,"translate"),t.qZA()(),t.BQk()}if(2&r){const u=b.$implicit,m=t.oxw();t.xp6(2),t.Oqu(u.description),t.xp6(2),t.Oqu(u.identificationCode),t.xp6(2),t.Q6J("text",t.lcZ(7,4,"edit"))("disabled",!m.hasPrivilege("COUNTRY_CREATE"))}}const _=[{path:"",component:(()=>{class r{constructor(u,m,x,T){this.countryCreateEditPopupService=u,this.webService=m,this.listEntities=x,this.authStoreService=T,this.subs=new e.L,this.entities=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.totalEntitiesLength=this.listEntities.totalEntitiesLength,this.keyword=""}ngOnInit(){this.subs.sink=this.listEntities.setWebService(this.webService).requestFirstPage()}hasPrivilege(u){return this.authStoreService.isAllowed(u)}inputSearchHandler(u){const m=new d.h;m.criteriaQuick=u,this.listEntities.setFilter(m)}createCountry(){this.countryCreateEditPopupService.openDialog().subscribe(u=>{u&&this.listEntities.requestFirstPage()})}editCountry(u){this.countryCreateEditPopupService.openDialog(u).subscribe(m=>{m&&this.listEntities.requestFirstPage()})}bottomReachedHandler(){this.listEntities.requestNextPage()}ngOnDestroy(){this.subs.unsubscribe()}}return r.\u0275fac=function(u){return new(u||r)(t.Y36(l.b),t.Y36(p.N),t.Y36(a.y),t.Y36(C.g))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-countries"]],features:[t._Bn([p.N,l.b,a.y])],decls:23,vars:29,consts:[[1,"container"],[1,"search-bar"],[3,"placeholder","keyword","changeEvent"],[1,"create-button",3,"iconName","text","disabled","clickEvent"],["scrollToBottom","",1,"grid-container","standard-grid-table",3,"bottomReached"],[1,"grid-item","header","sticky"],["class","no-results",4,"ngIf"],["class","spinner",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"no-results"],[1,"spinner"],[1,"grid-item"],[3,"text","disabled","clickEvent"]],template:function(u,m){1&u&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-search-input",2),t.NdJ("changeEvent",function(T){return m.inputSearchHandler(T)}),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-button",3),t.NdJ("clickEvent",function(){return m.createCountry()}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",4),t.NdJ("bottomReached",function(){return m.bottomReachedHandler()}),t.TgZ(7,"div",5),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",5),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",5),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.YNc(16,S,3,3,"div",6),t.ALo(17,"async"),t.ALo(18,"async"),t.YNc(19,g,2,0,"div",7),t.ALo(20,"async"),t.YNc(21,P,8,6,"ng-container",8),t.ALo(22,"async"),t.qZA()()),2&u&&(t.xp6(2),t.Q6J("placeholder",t.lcZ(3,11,"searchFor"))("keyword",m.keyword),t.xp6(2),t.Q6J("iconName","plus")("text",t.lcZ(5,13,"createCountry"))("disabled",!m.hasPrivilege("COUNTRY_CREATE")),t.xp6(4),t.Oqu(t.lcZ(9,15,"description")),t.xp6(3),t.hij(" ",t.lcZ(12,17,"identCode")," "),t.xp6(3),t.Oqu(t.lcZ(15,19,"edit")),t.xp6(2),t.Q6J("ngIf",0===t.lcZ(17,21,m.totalEntitiesLength)&&!t.lcZ(18,23,m.isLoading)),t.xp6(3),t.Q6J("ngIf",t.lcZ(20,25,m.isLoading)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(22,27,m.entities)))},directives:[h.J,E.r,f.C,i.O5,O.Ou,i.sg],pipes:[A.X$,i.Ov],styles:[".container[_ngcontent-%COMP%]{height:100%;min-width:500px}.container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto;max-height:calc(100% - 120px);overflow-y:auto;margin-top:20px}"]}),r})(),canActivate:[s.Y],data:{permission:"COUNTRIES_VIEW"}}];let I=(()=>{class r{}return r.\u0275fac=function(u){return new(u||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[c.Bz.forChild(_)],c.Bz]}),r})();var M=n(2024),D=n(8966),L=n(3497),Z=n(6460),R=n(8287);let B=(()=>{class r{}return r.\u0275fac=function(u){return new(u||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[i.ez,I,A.aw,M.h,D.Is,L.N,Z.n,O.Cq,R.n]]}),r})()},5986:(y,v,n)=>{n.d(v,{b:()=>S});var i=n(8966),c=n(2916),s=n(3075),l=n(4794),d=n(4463),a=n(29),e=n(5e3),p=n(8794),t=n(9285),C=n(9808),h=n(7322),E=n(7531),f=n(42);function O(g,P){if(1&g){const o=e.EpF();e.TgZ(0,"form",3)(1,"mat-form-field")(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",4),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.TgZ(11,"div",6)(12,"app-button",7),e.NdJ("clickEvent",function(){return e.CHM(o),e.oxw().cancel()}),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"app-button",8),e.NdJ("clickEvent",function(){return e.CHM(o),e.oxw().handleSubmitButton()}),e.ALo(15,"translate"),e.qZA()()()}if(2&g){const o=e.oxw();e.Q6J("formGroup",o.formGroup),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(4,14,"description")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(9,16,"identCode")," "),e.xp6(4),e.Q6J("text",e.lcZ(13,18,"cancel")),e.xp6(2),e.Q6J("text",e.lcZ(15,20,"save"))("disabled",o.isEdit&&!o.formGroup.dirty||o.formGroup.invalid)}}let A=(()=>{class g{constructor(o,_,I,M,D){this.dialogRef=o,this.data=_,this.globalService=I,this.webService=M,this.translateService=D,this.subs=new d.L,this.isEdit=!1}get descriptionControl(){return this.formGroup.get("description")}get identificationCodeControl(){return this.formGroup.get("identificationCode")}ngOnInit(){this.isEdit=!!this.data.oid,this.countryOID=this.data.oid,this.isEdit?this.initializeEdit():this.initializeCreate()}initializeCreate(){this.formGroup=new s.cw({description:new s.NI("",[s.kI.required]),identificationCode:new s.NI("",[s.kI.required])})}initializeEdit(){this.webService.getEntityByOid(this.countryOID).subscribe(o=>{o&&(this.formGroup=new s.cw({description:new s.NI(o.description,[s.kI.required]),identificationCode:new s.NI(o.identificationCode,[s.kI.required])}))})}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){this.isEdit?this.webService.updateEntity(this.countryOID,this.formGroup.value).subscribe(o=>{o&&(this.globalService.showBasicAlert(l.I.success,this.translateService.instant("successfully"),this.translateService.instant("countryIsSuccessfullyUpdated")),this.dialogRef.close(o))}):this.webService.createEntity(this.formGroup.value).subscribe(o=>{o&&(this.globalService.showBasicAlert(l.I.success,this.translateService.instant("successfully"),this.translateService.instant("newCountryIsSuccessfullyCreated")),this.dialogRef.close(o))})}ngOnDestroy(){this.subs.unsubscribe()}}return g.\u0275fac=function(o){return new(o||g)(e.Y36(i.so),e.Y36(i.WI),e.Y36(p.U),e.Y36(a.N),e.Y36(t.sK))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-country-create-edit"]],features:[e._Bn([a.N])],decls:6,vars:4,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],[1,"form",3,"formGroup"],["matInput","","formControlName","description"],["matInput","","formControlName","identificationCode"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"]],template:function(o,_){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,O,16,22,"form",2),e.qZA()),2&o&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,_.isEdit?"editCountry":"createCountry")," "),e.xp6(2),e.Q6J("ngIf",_.formGroup))},directives:[C.O5,s._Y,s.JL,s.sg,h.KE,h.hX,E.Nt,s.Fj,s.JJ,s.u,f.r],pipes:[t.X$],styles:[".container[_ngcontent-%COMP%]{height:100%;width:100%}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:column;margin-top:20px;display:flex}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),g})(),S=(()=>{class g{constructor(o){this._matDialog=o}openDialog(o=""){return new c.y(_=>{const I=new i.vA;I.data={oid:o},this._matDialog.open(A,I).afterClosed().subscribe(M=>{_.next(M),_.complete()},()=>_.error())})}}return g.\u0275fac=function(o){return new(o||g)(e.LFG(i.uw))},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac}),g})()},4605:(y,v,n)=>{n.d(v,{J:()=>C});var i=n(5e3),c=n(3075),s=n(13),l=n(7322),d=n(7531),a=n(9808),e=n(6541);function p(h,E){1&h&&i._UZ(0,"i-feather",4)}function t(h,E){if(1&h){const f=i.EpF();i.TgZ(0,"i-feather",5),i.NdJ("click",function(){return i.CHM(f),i.oxw().resetSearchInputValue()}),i.qZA()}}let C=(()=>{class h{constructor(){this.keyword="",this.placeholder="Search for...",this.debounceTime=500,this.minCharacters=1,this.changeEvent=new i.vpe,this.searchInput=new c.NI}ngOnInit(){this.inputChangeSubscription=this.searchInput.valueChanges.pipe((0,s.b)(this.debounceTime)).subscribe(()=>{(0===this.searchInput.value.length||this.searchInput.value.length>=this.minCharacters)&&this.changeEvent.emit(this.searchInput.value)})}ngOnChanges(f){f.keyword&&f.keyword.previousValue&&f.keyword.currentValue!==f.keyword.previousValue&&this.searchInput.setValue(this.keyword,{emitEvent:!1})}resetSearchInputValue(){this.searchInput.setValue("")}ngOnDestroy(){this.inputChangeSubscription.unsubscribe()}}return h.\u0275fac=function(f){return new(f||h)},h.\u0275cmp=i.Xpm({type:h,selectors:[["app-search-input"]],inputs:{keyword:"keyword",placeholder:"placeholder",debounceTime:"debounceTime",minCharacters:"minCharacters"},outputs:{changeEvent:"changeEvent"},features:[i.TTD],decls:6,vars:5,consts:[[1,"me-search-input-form-field"],["type","text","matInput","",3,"formControl","autocomplete"],["matSuffix","","name","search","class","search-icon",4,"ngIf"],["name","x","class","close","matSuffix","",3,"click",4,"ngIf"],["matSuffix","","name","search",1,"search-icon"],["name","x","matSuffix","",1,"close",3,"click"]],template:function(f,O){1&f&&(i.TgZ(0,"mat-form-field",0)(1,"mat-label"),i._uU(2),i.qZA(),i._UZ(3,"input",1),i.YNc(4,p,1,0,"i-feather",2),i.YNc(5,t,1,0,"i-feather",3),i.qZA()),2&f&&(i.xp6(2),i.Oqu(O.placeholder),i.xp6(1),i.Q6J("formControl",O.searchInput)("autocomplete","off"),i.xp6(1),i.Q6J("ngIf",!O.searchInput.value),i.xp6(1),i.Q6J("ngIf",O.searchInput.value))},directives:[l.KE,l.hX,d.Nt,c.Fj,c.JJ,c.oH,a.O5,e.uy,l.R9],styles:[".me-search-input-form-field .mat-form-field-wrapper{padding-bottom:0}\n"],encapsulation:2,changeDetection:0}),h})()},4286:(y,v,n)=>{n.d(v,{C:()=>l});var i=n(5e3),c=n(3753),s=n(13);let l=(()=>{class d{constructor(e){this.component=e,this.bottomReached=new i.vpe,this.className="scrollbar",this.scrollDelay=200}ngOnInit(){(0,c.R)(this.component.nativeElement,"scroll").pipe((0,s.b)(this.scrollDelay)).subscribe(()=>{const e=this.component.nativeElement;e.offsetHeight+e.scrollTop+10>=e.scrollHeight&&this.bottomReached.emit()})}}return d.\u0275fac=function(e){return new(e||d)(i.Y36(i.SBq))},d.\u0275dir=i.lG2({type:d,selectors:[["","scrollToBottom",""]],hostVars:2,hostBindings:function(e,p){2&e&&i.Tol(p.className)},outputs:{bottomReached:"bottomReached"}}),d})()},9360:(y,v,n)=>{n.d(v,{K:()=>c});var i=n(8228);class c extends i.g{constructor(){super(...arguments),this.description="",this.identificationCode=""}}},287:(y,v,n)=>{n.d(v,{h:()=>i});class i{constructor(){this.criteriaQuick="",this.betweenAttributes=[],this.ordering="ASC"}getBetweenAttributes(){return this.betweenAttributes}addBetweenAttribute(s){let l=this.betweenAttributes.findIndex(d=>d.attribute===s.attribute);l<0?this.betweenAttributes.push(s):this.betweenAttributes[l]=s}clearAllBetweenAttributes(){this.betweenAttributes=[]}removeBetweenAttribute(s){let l=this.betweenAttributes.findIndex(d=>d.attribute===s);l>=0&&this.betweenAttributes.splice(l,1)}}},5595:(y,v,n)=>{n.d(v,{y:()=>l});var i=n(591),c=n(537),s=n(287);class l{constructor(){this.entities$=new i.X([]),this.totalEntitiesLength$=new i.X(void 0),this.bottomReached$=new i.X(!1),this.isLoading$=new i.X(!1),this.entities=this.entities$.asObservable(),this.totalEntitiesLength=this.totalEntitiesLength$.asObservable(),this.isLoading=this.isLoading$.asObservable(),this.searchModel=new s.h,this.NUMBER_OF_ITEMS_ON_PAGE=50}get numberOfItemsOnPage(){return this.NUMBER_OF_ITEMS_ON_PAGE}set numberOfItemsOnPage(a){this.NUMBER_OF_ITEMS_ON_PAGE=a,this.requestFirstPage()}resetNumberOfItemsOnPage(){this.NUMBER_OF_ITEMS_ON_PAGE=50,this.requestFirstPage()}setWebService(a){return this.webService=a,this}setOrdering(a){return this.searchModel.ordering=a,this}setFilter(a){this.searchModel=a,this.requestFirstPage()}requestFirstPage(){this.bottomReached$.next(!1),this.entities$.next([]),this.totalEntitiesLength$.next(0),this.requestNextPage()}requestNextPage(){var a;this.bottomReached$.getValue()||(this.isLoading$.next(!0),null===(a=this.webService)||void 0===a||a.searchEntities(this.searchModel,this.entities$.getValue().length||0,this.NUMBER_OF_ITEMS_ON_PAGE).pipe((0,c.x)(()=>{this.isLoading$.next(!1)})).subscribe(e=>{this.entities$.next(this.entities$.getValue().concat(e.entities));const p=this.entities$.getValue().length||0;this.bottomReached$.next(!(p<e.totalCount)),this.totalEntitiesLength$.next(e.totalCount)}))}}},29:(y,v,n)=>{n.d(v,{N:()=>a});var i=n(4292),c=n(136),s=n(9360),l=n(5e3),d=n(3164);let a=(()=>{class e extends i.h{constructor(t){super(t,s.K,c.HT),this.baseWebService=t}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(d.I))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac}),e})()}}]);