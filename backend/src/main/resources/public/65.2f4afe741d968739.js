"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[65],{4065:(C,p,n)=>{n.d(p,{x:()=>G});var l=n(5412),f=n(6498),i=n(4006),u=n(4794),o=n(4463),c=n(7379),a=n(4420),g=n(2134),v=n(5595),I=n(287),b=n(13),e=n(4650),y=n(8794),S=n(8490),x=n(6895),O=n(42),A=n(9549),Z=n(4144),D=n(4385),B=n(3238),T=n(4603),L=n(3231),M=n(3336);function P(r,d){if(1&r&&(e.TgZ(0,"mat-option"),e._UZ(1,"ngx-mat-select-search",13),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"async"),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.s9C("placeholderLabel",e.lcZ(2,7,"searchFor")),e.s9C("noEntriesFoundLabel",e.lcZ(3,9,"noResults")),e.Q6J("formControl",t.searchControl)("hideClearSearchButton",!0)("clearSearchInput",!0)("searching",e.lcZ(4,11,t.isLoading)||!1)("disableScrollToActiveOnOptionsChanged",!0)}}function N(r,d){if(1&r&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.Q6J("value",t.selectedBuyer),e.xp6(1),e.Oqu(t.selectedBuyer.name)}}function U(r,d){if(1&r&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function F(r,d){if(1&r&&(e.ynx(0),e.YNc(1,U,2,2,"mat-option",7),e.BQk()),2&r){const t=d.$implicit,s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==s.selectedBuyer?null:s.selectedBuyer.oid)!==t.oid)}}function W(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"form",4)(1,"mat-form-field")(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-select",5),e.NdJ("infiniteScroll",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.bottomReachedHandler())})("selectionChange",function(m){e.CHM(t);const h=e.oxw();return e.KtG(h.selectBuyer(m))}),e.YNc(6,P,5,13,"mat-option",6),e.YNc(7,N,2,2,"mat-option",7),e.YNc(8,F,2,1,"ng-container",8),e.ALo(9,"async"),e.qZA()(),e.TgZ(10,"mat-form-field")(11,"mat-label"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",9),e.qZA(),e.TgZ(15,"mat-form-field")(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",10),e.qZA(),e.TgZ(20,"mat-form-field")(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",11),e.qZA(),e.TgZ(25,"mat-form-field")(26,"mat-label"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e._UZ(29,"input",12),e.qZA()()}if(2&r){const t=e.oxw();e.Q6J("formGroup",t.formGroup),e.xp6(2),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(4,31,"buyer")," "),e.xp6(2),e.Q6J("disabled",t.isEdit)("compareWith",t.compareFn),e.xp6(1),e.Q6J("ngIf",!t.isEdit),e.xp6(1),e.Q6J("ngIf",t.selectedBuyer),e.xp6(1),e.Q6J("ngForOf",e.lcZ(9,33,t.buyersEntities)),e.xp6(3),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(13,35,"amount")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(18,37,"date")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(23,39,"bankStatementNumber")," "),e.xp6(4),e.ekj("mark-required",!0)("mark-opt-required",!0),e.xp6(1),e.hij(" ",e.lcZ(28,41,"comment")," ")}}function w(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",15)(1,"app-button",16),e.NdJ("clickEvent",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.cancel())}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-button",17),e.NdJ("clickEvent",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.handleSubmitButton())}),e.ALo(4,"translate"),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("text",e.lcZ(2,3,"cancel")),e.xp6(2),e.Q6J("text",e.lcZ(4,5,"save"))("disabled",t.isEdit&&!t.formGroup.dirty||t.formGroup.invalid)}}let J=(()=>{class r{constructor(t,s,m,h,E,_,Y,k){this.dialogRef=t,this.data=s,this.globalService=m,this.webService=h,this.buyerWebService=E,this.translateService=_,this.el=Y,this.listEntities=k,this.subs=new o.L,this.isEdit=!1,this.buyersEntities=this.listEntities.entities,this.isLoading=this.listEntities.isLoading,this.searchControl=new i.p4,this.compareFn=g.nt,this.debounceTime=500}ngOnInit(){this.isEdit=!!this.data.oid,this.incomeOID=this.data.oid,this.subs.sink=this.listEntities.setWebService(this.buyerWebService).requestFirstPage(),this.isEdit?this.initializeEdit():this.initializeCreate(this.data.buyerOID,this.data.amount),this.inputSearchControlSubscription=this.searchControl.valueChanges.pipe((0,b.b)(this.debounceTime)).subscribe(()=>{this.searchHandler(this.searchControl.value)})}initializeCreate(t,s){this.subs.sink=this.buyerWebService.getEntityByOid(t).subscribe(m=>{t&&(this.selectedBuyer=m),this.formGroup=new i.nJ({date:new i.p4((new Date).toISOString().substring(0,10),[i.kI.required]),bankStatementNumber:new i.p4(""),amount:new i.p4(s||0,[i.kI.required,i.kI.min(0)]),comment:new i.p4("",[]),buyer:new i.p4(this.selectedBuyer,i.kI.required)})})}initializeEdit(){this.subs.sink=this.webService.getEntityByOid(this.incomeOID).subscribe(t=>{t&&(this.selectedBuyer=t.buyer,this.formGroup=new i.nJ({date:new i.p4(t.date,[i.kI.required]),bankStatementNumber:new i.p4(t.bankStatementNumber),amount:new i.p4(t.amount,[i.kI.required,i.kI.min(0)]),comment:new i.p4(t.comment,[]),buyer:new i.p4(this.selectedBuyer,i.kI.required)}))})}cancel(){this.dialogRef.close(!1)}handleSubmitButton(){const t=this.formGroup.value;this.isEdit?this.webService.updateEntity(this.incomeOID,t).subscribe(s=>{s&&(this.globalService.showBasicAlert(u.I.success,this.translateService.instant("successfully"),this.translateService.instant("incomeIsSuccessfullyUpdated")),this.dialogRef.close(s))}):this.webService.createEntity(t).subscribe(s=>{s&&(this.globalService.showBasicAlert(u.I.success,this.translateService.instant("successfully"),this.translateService.instant("newIncomeIsSuccessfullyCreated")),this.dialogRef.close(s))})}bottomReachedHandler(){this.listEntities.requestNextPage()}selectBuyer(t){t&&t.value&&(this.selectedBuyer=t.value)}searchHandler(t){let s=new I.h;s.criteriaQuick=t,this.listEntities.setFilter(s)}setFocusOn(t,s=0,m=!1){const h=this.el.nativeElement.querySelectorAll('[formcontrolname="'+t+'"]')[s<0?0:s];h?.focus(),m&&h.select()}ngOnDestroy(){this.inputSearchControlSubscription.unsubscribe(),this.subs.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(l.so),e.Y36(l.WI),e.Y36(y.U),e.Y36(a.L),e.Y36(c.e),e.Y36(S.sK),e.Y36(e.SBq),e.Y36(v.y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-income-create-edit"]],inputs:{debounceTime:"debounceTime"},features:[e._Bn([a.L,c.e,v.y])],decls:7,vars:5,consts:[[1,"container"],[1,"title"],["class","form",3,"formGroup",4,"ngIf"],["class","button-section",4,"ngIf"],[1,"form",3,"formGroup"],["formControlName","buyer","msInfiniteScroll","",3,"disabled","compareWith","infiniteScroll","selectionChange"],[4,"ngIf"],[3,"value",4,"ngIf"],[4,"ngFor","ngForOf"],["type","text","appDecimal","","matInput","","formControlName","amount"],["type","date","matInput","","formControlName","date"],["type","text","matInput","","formControlName","bankStatementNumber"],["type","text","matInput","","formControlName","comment"],[3,"formControl","placeholderLabel","noEntriesFoundLabel","hideClearSearchButton","clearSearchInput","searching","disableScrollToActiveOnOptionsChanged"],[3,"value"],[1,"button-section"],["color","secondary",1,"cancel",3,"text","clickEvent"],[1,"update",3,"text","disabled","clickEvent"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,W,30,43,"form",2),e.YNc(6,w,5,7,"div",3),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,3,s.isEdit?"editIncome":"createIncome")," "),e.xp6(2),e.Q6J("ngIf",s.formGroup),e.xp6(1),e.Q6J("ngIf",s.formGroup))},dependencies:[x.sg,x.O5,O.r,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,i.u,A.KE,A.hX,Z.Nt,D.gD,B.ey,T.s,L.nu,M.U,x.Ov,S.X$],styles:["[_nghost-%COMP%]{display:flex;height:100%}.container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;border-bottom:2px dotted var(--color-main-light)}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px;color:var(--color-black)}.container[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;flex-direction:row;align-items:center;justify-content:space-between;border-top:2px dotted var(--color-main-light)}"]}),r})(),G=(()=>{class r{constructor(t){this._matDialog=t}openDialog(t="",s,m=0){return new f.y(h=>{const E=new l.vA;E.data={oid:t,buyerOID:s,amount:m},this._matDialog.open(J,E).afterClosed().subscribe(_=>{h.next(_),h.complete()},()=>h.error())})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(l.uw))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})()},3336:(C,p,n)=>{n.d(p,{U:()=>f});var l=n(4650);let f=(()=>{class i{constructor(o){this.el=o}keyup(){this.validateNumber(this.el.nativeElement.value)}validateNumber(o){o=o.replace(/[^\d,.-]/g,"");let c=-1;for(let a=0;a<o.length;a++)if("."===o.charAt(a)||","===o.charAt(a)){c=a;break}o=(o=o.replaceAll(".","")).replaceAll(",",""),0===c?o="0."+o:c>0&&(o=o.substring(0,c)+"."+(o.length>c?o.substring(c):"")),this.el.nativeElement.value=o}}return i.\u0275fac=function(o){return new(o||i)(l.Y36(l.SBq))},i.\u0275dir=l.lG2({type:i,selectors:[["","appDecimal",""]],hostBindings:function(o,c){1&o&&l.NdJ("keyup",function(){return c.keyup()})}}),i})()},3749:(C,p,n)=>{n.d(p,{w:()=>o});var l=n(655),f=n(3429),i=n(8228),u=n(8324);class o extends i.g{constructor(){super(...arguments),this.name="",this.address="",this.maticalNumber="",this.pib="",this.contactPerson="",this.phoneNumberFix="",this.phoneNumberMobile="",this.email=""}}(0,l.gn)([(0,f.D)(()=>u.v)],o.prototype,"city",void 0)},7379:(C,p,n)=>{n.d(p,{e:()=>c});var l=n(4292),f=n(136),i=n(3749),u=n(4650),o=n(3164);let c=(()=>{class a extends l.h{constructor(v){super(v,i.w,f.Hz),this.baseWebService=v}}return a.\u0275fac=function(v){return new(v||a)(u.LFG(o.I))},a.\u0275prov=u.Yz7({token:a,factory:a.\u0275fac}),a})()},4420:(C,p,n)=>{n.d(p,{L:()=>I});var l=n(4292),f=n(136),i=n(655),u=n(3429),o=n(8228),c=n(3749);class a extends o.g{constructor(){super(...arguments),this.date=new Date,this.bankStatementNumber="",this.amount=0,this.comment="",this.buyer=new c.w}}(0,i.gn)([(0,u.D)(()=>c.w)],a.prototype,"buyer",void 0);var g=n(4650),v=n(3164);let I=(()=>{class b extends l.h{constructor(y){super(y,a,f.ku),this.baseWebService=y}}return b.\u0275fac=function(y){return new(y||b)(g.LFG(v.I))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac}),b})()}}]);